.\" Manpage for the Anvil! storage groups
.\" Contact mkelly@alteeve.com to report issues, concerns or suggestions.
.TH anvil-manage-storage-group "8" "August 15 2024" "Anvil! Intelligent Availabilityâ„¢ Platform"
.SH NAME
anvil-manage-storage-group \- This program manages if a server is (and when) a server is protected by a DR host.
.SH SYNOPSIS
.B anvil-manage-storage-group
\fI\,<command> \/\fR[\fI\,options\/\fR]
.SH DESCRIPTION
This tool manages storage groups. Storage Groups are collections of LVM Volume Groups across sub-nodes and DR hosts. A server's virtual hard disk syncs across LVs in common storage groups.
.IP
.SH OPTIONS
\-?, \-h, \fB\-\-help\fR
.IP
Show this man page.
.TP
\fB\-\-log\-secure\fR
.IP
When logging, record sensitive data, like passwords.
.TP
\-v, \-vv, \-vvv
.IP
Set the log level to 1, 2 or 3 respectively. Be aware that level 3 generates a significant amount of log data.
.IP
.SS "Commands:"
.TP
\fB\-\-add\fR
.IP
When managing a Storage Group, this adds a component, like a volume group.
.IP
This can also be used to create a new Storage Group on a given Anvil! node. Requires \fB\-\-group\fR <name>.
.TP
\fB\-\-anvil\fR <name or UUID>
.IP
This is the Anvil! node whose storage groups you want to see or work on.
.TP
\fB\-\-dr\fR
.IP
When using \fB\-\-show\fR, this will show the DR hosts as well as the nodes.
.TP
\fB\-\-remove\fR <group name or UUID>
.IP
This deletes a storage group entirely.
.TP
\fB\-\-rename\fR
.IP
This is used along with \fB\-\-new\-name\fR <new name> and \fB\-\-group\fR <name or UUID> to change the name of an existing storage group.
.TP
\fB\-\-group\fR <name or UUID>
.IP
The is the storage group name or UUID that is being worked with.
.TP
\fB\-\-member\fR <VG internal UUID>
.IP
This is the LVM volume group's INTERNAL UUID (as shown by \fBvgdisplay\fR or with \fB\-\-show\fR. It is used to specify which volume group is being added or removed.
.TP
\fB\-\-new\-name\fR <new name>
.IP
When used with \fB\-\-rename\fR and \fB\-\-group\fR <name or UUID>, this specifies the new storage group name.
.TP
\fB\-\-show\fR
.IP
This shows the storage groups on each Anvil! node (or just the one specified with \fB\-\-anvil\fR <name or UUID>). To also see DR hosts, use \fB\-\-dr\fR along with this switch.
.TP
.SH EXAMPLES
.TP
Show existing storage group details
.IP
anvil-manage-storage-groups --show
.TP
Add a VG to a storage group
.IP
anvil-manage-storage-groups --anvil vm-anvil-01 --group "Storage group 1" --add --member edrYMv-Fl2D-o0tO-g8ok-idOh-oBIh-65LuD6
.IP
.SH AUTHOR
Written by Madison Kelly, Alteeve staff and the Anvil! project contributors.
.SH "REPORTING BUGS"
Report bugs to users@clusterlabs.org
