.\" Manpage for the Anvil! server boot program
.\" Contact mkelly@alteeve.com to report issues, concerns or suggestions.
.TH anvil-change-password "8" "December 30 2024" "Anvil! Intelligent Availabilityâ„¢ Platform"
.SH NAME
anvil-change-password \- Tool used to change / reset the main Anvil! password.
.SH SYNOPSIS
.B anvil-change-password 
\fI\,<command> \/\fR[\fI\,options\/\fR]
.SH DESCRIPTION
anvil-change-password \- This is used to change / reset the password on the Anvil! cluster. Unless using \fB\-\-local\fR, this must be run on a striker dashboard. All machines must be available when this is run, unless \fB\-\-force\fR is used.
.TP
.B Note: 
This password is used for the shell users, for the postgresql user and, when setting an Anvil! password, for the IPMI BMC user. In the later case, passwords over 16 characters will be truncated. Allowed characters are set by the limits on normal shell passwords.
.IP
.SH OPTIONS
\-?, \-h, \fB\-\-help\fR
Show this man page.
.TP
\fB\-\-log\-secure\fR
When logging, record sensitive data, like passwords.
.TP
\-v, \-vv, \-vvv
Set the log level to 1, 2 or 3 respectively. Be aware that level 3 generates a significant amount of log data.
.IP
.SS "Commands:"
\fB\-\-confirm\fR
Normally, you will be asked to confirm before the update process starts. If you use this switch, no confirmation will be requested.
.TP
\fB\-\-delete\-pw\fR
If you specified the password using the \fB\-\-password\-file\fR, and you use this switch, the password file will be deleted once it has been read.
.TP
\fB\-\-force\fR
Normally, all systems get their passwords updated at the same time. As such, if any machine in the cluster is unavailable, the password reset will not proceed. This switch allows the update to proceed even though some machines are offline.
.TP
.B Note:
You will need to update the passwords manually for the machine(s) that are not online! You can use this tool with the \fB\-\-local\fR switch.
.TP
\fB\-\-local\fR
This updates the passwords on the local host only. Specifically, it is meant for use on hosts that were offline during a previous password update.
.TP
.B Note:
This will update the passwords used to connect to the databases in '/etc/anvil/anvil.conf'!
.TP
\fB\-\-new\-password\fR <secret>
This is the new password to set. See '\fB\-\-password-file\fR' below for an alternate way to pass in the password. 
.TP
If not set, you will be prompted to enter the new password.
.TP
\fB\-\-no\-wait\fR <secret>
Normally, a check is made and if any jobs are in progress, the password change will wait until the jobs complete. This switch skips that check. 
.TP
\fB\-\-password\-file\fR </path/to/file>
This is an alternative way to pass the new password to this program. If set, the file is read in and the file contents are used. Be sure to use one line only in the file.
.IP
.SH AUTHOR
Written by Madison Kelly, Alteeve staff and the Anvil! project contributors.
.SH "REPORTING BUGS"
Report bugs to users@clusterlabs.org
