.\" Manpage for the Anvil! node assembly tool
.\" Contact mkelly@alteeve.com to report issues, concerns or suggestions.
.TH anvil-join-anvil "8" "June 18 2024" "Anvil! Intelligent Availabilityâ„¢ Platform"
.SH NAME
anvil-join-anvil \- This tool assembles two subnodes into a node. 
.SH SYNOPSIS
.B anvil-join-anvil 
\fI\,<command> \/\fR[\fI\,options\/\fR]
.SH DESCRIPTION
This program takes two subnodes and merges them into an Anvil! node. This can be two new subnodes, or an existing subnode with a replacement subnode after a subnode failure.
.TP
.SH OPTIONS
\-?, \-h, \fB\-\-help\fR
Show this man page.
.TP
\fB\-\-log-secure\fR
When logging, record sensitive data, like passwords.
.TP
\-v, \-vv, \-vvv
Set the log level to 1, 2 or 3 respectively. Be aware that level 3 generates a significant amount of log data.
.SS "Commands:"
\fB\-\-as\-machine\fR <'node1' or 'node2'>
.TP
When using \fB\-\-rejoin\fR, this is the subnode role that this host will take. 
.TP
.B NOTE:
The previous subnode that held this position will be purged! All data associated with the previous subnode will be deleted from the Anvil! database.
.TP
\fB\-\-auto\-grow\-pv\fR
.TP
This checks the LVM physical volumes on the host and if any have usable free space after then, the PV is grown to use that free space.
.TP
.B NOTE:
This has the (low) potential to cause boot issues. If this is an in-production system, please consider manually growing any PVs.
.TP
\fB\-\-yes\fR
.TP
This confirms without prompt that you want to rejoin the detected Anvil! node.
.TP
\fB\-\-job\-uuid\fR
.TP
This is the job UUID that will be run. 
.TP
\fB\-\-manifest\fR <name or uuid>
.TP
If this is given, then this host will be joined to the manifest. This is required if \fB\-\-rejoin\fR is used.
.TP
\fB\-\-rejoin\fR
.TP
If this is set, the host will be (re)joined to an existing Anvil! node. This is used to bring this host into an Anvil! subnode, typically after a subnode failure / rebuild.
.IP
.SH AUTHOR
Written by Madison Kelly, Alteeve staff and the Anvil! project contributors.
.SH "REPORTING BUGS"
Report bugs to users@clusterlabs.org
