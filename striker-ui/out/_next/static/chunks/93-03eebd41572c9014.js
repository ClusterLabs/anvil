"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{96674:function(e,t,n){var l=n(85893),s=n(89256),r=n(62191),i=n(89262),o=n(59879),a=n(324),u=n(28721),c=n(73315),d=n(14440),p=n(55074),h=n(82492),x=n.n(h),m=n(67294),g=n(77831),v=n(34635),f=n(91029);let U=e=>(0,l.jsx)(s.Z,{in:!0,children:(0,l.jsx)(r.Z,{...e})}),b=(0,i.ZP)("ul")({padding:0}),j=o.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:n,getGroupLabel:s,label:r,ListboxProps:i,messageBoxProps:o,renderGroup:h,renderInput:S,sx:Z,...I}=e,y=(0,m.useMemo)(()=>x()({paper:{sx:{backgroundColor:g.s7,["& .".concat(a.Z.groupLabel)]:{backgroundColor:g.s7}}}},t),[t]),D=(0,m.useMemo)(()=>x()({sx:{["& .".concat(a.Z.option)]:{'&[aria-selected="true"]':{backgroundColor:g.lD,["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}},["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}}}},i),[i]),P=(0,m.useMemo)(()=>h||s&&(e=>(0,l.jsxs)("li",{children:[(0,l.jsx)(j,{component:"div",className:a.Z.groupLabel,children:s(e.group)}),(0,l.jsx)(b,{className:a.Z.groupUl,children:e.children})]},e.key)),[s,h]),C=(0,m.useMemo)(()=>null!=S?S:e=>{let{fullWidth:t,InputProps:s,InputLabelProps:i,inputProps:o}=e,a={formControlProps:{fullWidth:t,ref:s.ref},inputLabelProps:i,inputProps:{className:s.className,endAdornment:s.endAdornment,inputProps:o,startAdornment:s.startAdornment},label:r};return null==n||n.call(null,a,e),(0,l.jsx)(f.Z,{...a})},[n,r,S]),M=(0,m.useMemo)(()=>x()({["& .".concat(u.Z.root," .").concat(a.Z.endAdornment)]:{right:"7px",["& .".concat(c.Z.root)]:{color:g.s7}}},Z),[Z]);return(0,l.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)(p.Z,{autoHighlight:!0,autoSelect:!0,PaperComponent:U,...I,ListboxProps:D,renderGroup:P,renderInput:C,slotProps:y,sx:M}),(0,l.jsx)(v.Z,{...o})]})}},77583:function(e,t,n){var l=n(85893),s=n(14440),r=n(67294),i=n(34003),o=n(56903),a=n(87006),u=n(59278);let c=(0,r.forwardRef)((e,t)=>{let{actionCancelText:n="Cancel",actionProceedText:c,children:d,closeOnProceed:p=!1,contentContainerProps:h,dialogProps:x,disableProceed:m,loading:g,loadingAction:v=!1,onActionAppend:f,onCancelAppend:U,onProceedAppend:b,openInitially:j,preActionArea:S,proceedButtonProps:Z,proceedColour:I="blue",scrollContent:y=!1,scrollBoxProps:D,showActionArea:P=!0,showCancel:C,showClose:M,titleText:k,wide:A,content:G=d}=e,F=(0,r.useRef)(null),B=(0,r.useMemo)(()=>(0,a.Z)(G,u.Ac),[G]),w=(0,r.useMemo)(()=>(0,r.createElement)(y?i.VZ:s.Z,D,B),[B,D,y]),z=(0,r.useMemo)(()=>P&&(0,l.jsx)(i.ux,{cancelProps:{children:n,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==U||U.call(null,...t)}},closeOnProceed:p,loading:v,proceedProps:{background:I,children:c,disabled:m,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==b||b.call(null,...t)},...Z},showCancel:C}),[n,c,p,m,v,f,U,b,Z,I,P,C]);return(0,r.useImperativeHandle)(t,()=>({setOpen:e=>{var t;return null===(t=F.current)||void 0===t?void 0:t.setOpen(e)}}),[]),(0,l.jsx)(i.Js,{dialogProps:x,header:k,loading:g,openInitially:j,ref:F,showClose:M,wide:A,children:(0,l.jsxs)(o.Z,{...h,children:[w,S,z]})})});c.displayName="ConfirmDialog",t.Z=c},67732:function(e,t,n){var l=n(85893),s=n(89262),r=n(65086),i=n(60166),o=n(67294),a=n(77831),u=n(23833);let c=(0,s.ZP)(r.Z)({["& .".concat(i.Z.paper)]:{backgroundColor:a.s7}});t.Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s]=t,{children:r,getItemDisabled:i,items:a={},muiMenuProps:d,onItemClick:p,open:h,renderItem:x}=s,m=(0,o.useMemo)(()=>Object.entries(a),[a]),g=(0,o.useMemo)(()=>m.map(e=>{let[t,n]=e;return(0,l.jsx)(u.Z,{disabled:null==i?void 0:i.call(null,t,n),onClick:function(){for(var e=arguments.length,l=Array(e),s=0;s<e;s++)l[s]=arguments[s];return null==p?void 0:p.call(null,t,n,...l)},children:null==x?void 0:x.call(null,t,n)},t)}),[i,p,m,x]);return(0,l.jsx)(c,{open:h,...d,children:r||g})}},23833:function(e,t,n){var l=n(89262),s=n(85959),r=n(73970),i=n(77831);let o=(0,l.ZP)(s.Z)({backgroundColor:i.s7,paddingRight:"3em",["&.".concat(r.Z.selected)]:{backgroundColor:i.lD,fontWeight:400,["&.".concat(r.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}},["&.".concat(r.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}});t.Z=o},34179:function(e,t,n){var l=n(85893),s=n(14440),r=n(20408),i=n(28721),o=n(77831),a=n(34635),u=n(91029),c=n(6189);let d=e=>{let{id:t,label:n,inputWithLabelProps:d,messageBoxProps:p,onChange:h,selectItems:x,selectWithLabelProps:m,value:g}=e;return(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row","& > :first-child":{flexGrow:1},"& > :not(:last-child)":{marginRight:".5em"},["&:hover\n          .".concat(r.Z.root,"\n          .").concat(i.Z.root,"\n          .").concat(i.Z.notchedOutline)]:{borderColor:o.s7}},children:[(0,l.jsx)(u.Z,{id:t,label:n,onChange:h,value:g,...d}),(0,l.jsx)(c.Z,{formControlProps:{fullWidth:!1,sx:{minWidth:"min-content"}},id:"".concat(t,"-nested-select"),selectItems:x,...m})]}),(0,l.jsx)(a.Z,{...p})]})};d.defaultProps={inputWithLabelProps:void 0,messageBoxProps:void 0,selectWithLabelProps:void 0},t.Z=d},98337:function(e,t,n){let l,s;var r=n(85893),i=n(67294),o=n(14440),a=n(99514),u=n(92309),c=n(25934),d=n(84628),p=n(98484),h=n(96674),x=n(99429),m=n(56903),g=n(62800),v=n(97607),f=n(65895),U=n(99576),b=n(91029),j=n(34179),S=n(23930),Z=n(6189),I=n(25137),y=n(76811),D=n(52675),P=n(59278),C=n(2188),M=n(77510);let k=BigInt(0),A=BigInt(65536),G=BigInt(104857600),F=(e,t)=>{let{onButtonClick:n}=t;return(0,r.jsx)(x.Z,{disabled:void 0===n,onClick:n,sx:{minWidth:"unset",whiteSpace:"nowrap"},children:"Max: ".concat(e)})},B=function(){let{endAdornment:e,mainLabel:t,subLabel:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsxs)(o.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"row",width:"100%","& > :first-child":{flexGrow:1}},children:[(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:[t&&(0,r.jsx)(P.Ac,{inverted:!0,text:t}),n&&(0,r.jsx)(P.Ac,{inverted:!0,text:n})]}),e]})},w=e=>{let t={},n=e.reduce((e,n)=>{let{anvilUUID:l,anvilName:s,anvilTotalMemory:i,anvilTotalAllocatedMemory:a,anvilTotalAvailableMemory:u,hosts:c,servers:d,storageGroups:p,files:h}=n,{anvilStorageGroups:x,anvilStorageGroupUUIDs:m}=p.reduce((t,n)=>{let i={...n,anvilUUID:l,anvilName:s,storageGroupSize:BigInt(n.storageGroupSize),storageGroupFree:BigInt(n.storageGroupFree),humanizedStorageGroupFree:""};return(0,g.Bh)(n.storageGroupFree,{fromUnit:"B",onSuccess:{string:(e,t)=>{i.humanizedStorageGroupFree="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),t.anvilStorageGroupUUIDs.push(n.storageGroupUUID),t.anvilStorageGroups.push(i),e.storageGroups.push(i),e.storageGroupSelectItems.push({displayValue:B({endAdornment:(0,r.jsx)(P.Ac,{inverted:!0,text:"~".concat(i.humanizedStorageGroupFree," free")}),mainLabel:n.storageGroupName,subLabel:s}),value:n.storageGroupUUID}),e.storageGroupUUIDMapToData[n.storageGroupUUID]=i,t},{anvilStorageGroups:[],anvilStorageGroupUUIDs:[]}),v=[];h.forEach(e=>{let{fileUUID:n}=e;v.push(n),t[n]=e});let f={...n,anvilTotalMemory:BigInt(i),anvilTotalAllocatedMemory:BigInt(a),anvilTotalAvailableMemory:BigInt(u),humanizedAnvilTotalAvailableMemory:"",hosts:c.map(e=>({...e,hostMemory:BigInt(e.hostMemory)})),servers:d.map(t=>{let{serverMemory:n,serverName:l,...s}=t,r={...s,serverMemory:BigInt(n),serverName:l};return e.serverNameMapToData[l]=r,r}),storageGroupUUIDs:m,storageGroups:x,fileUUIDs:v};return(0,g.Bh)(u,{fromUnit:"B",onSuccess:{string:(e,t)=>{f.humanizedAnvilTotalAvailableMemory="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),e.anvils.push(f),e.anvilSelectItems.push({displayValue:B({endAdornment:(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",width:"8rem"},children:[(0,r.jsx)(P.Ac,{inverted:!0,text:"CPU: ".concat(f.anvilTotalCPUCores," cores")}),(0,r.jsx)(P.Ac,{inverted:!0,text:"Memory: ~".concat(f.humanizedAnvilTotalAvailableMemory)})]}),mainLabel:f.anvilName,subLabel:f.anvilDescription}),value:l}),e.anvilUUIDMapToData[l]=f,e},{anvils:[],anvilSelectItems:[],anvilUUIDMapToData:{},files:[],fileSelectItems:[],fileUUIDMapToData:{},serverNameMapToData:{},storageGroups:[],storageGroupSelectItems:[],storageGroupUUIDMapToData:{}});return Object.values(t).forEach(e=>{n.files.push(e),n.fileSelectItems.push({displayValue:e.fileName,value:e.fileUUID}),n.fileUUIDMapToData[e.fileUUID]=e}),n},z=function(e,t,n,l,s,r,i){let{includeAnvilUUIDs:o=[],includeFileUUIDs:a=[],includeStorageGroupUUIDs:u=[]}=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=()=>!0,d=()=>!0,p=()=>!0;o.length>0&&(c=e=>o.includes(e)),a.length>0&&(d=e=>a.includes(e)),u.length>0&&(p=e=>u.includes(e));let h={},x=r.reduce((e,t,n)=>{var l;let r=null!==(l=s[n])&&void 0!==l?l:k;return e.all+=r,""===t||(void 0===e[t]&&(e[t]=k),e[t]+=r),e},{all:k}),m=e.reduce((e,o)=>{let{anvilUUID:a}=o;if(c(a)){let{anvilTotalCPUCores:u,anvilTotalAvailableMemory:c,files:m,fileUUIDs:g,storageGroups:v}=o,f=[],U=k,b=k;v.forEach(e=>{let{storageGroupUUID:t,storageGroupFree:n}=e;p(t)&&(f.push(t),b+=n,n>U&&(U=n))}),[()=>v.length>0,()=>n<=u,()=>l<=c,()=>r.every((e,n)=>{var l;let r=null!==(l=s[n])&&void 0!==l?l:k,i=!0,o=r<=U;return""!==e&&(i=f.includes(e),o=r<=t[e].storageGroupFree),i&&o}),()=>Object.entries(x).every(e=>{let[n,l]=e;return"all"===n?l<=b:l<=t[n].storageGroupFree}),()=>i.every(e=>""===e||g.includes(e))].every(e=>e())&&(e.anvils.push(o),e.anvilUUIDs.push(a),e.maxCPUCores=Math.max(u,e.maxCPUCores),c>e.maxMemory&&(e.maxMemory=c),m.forEach(e=>{let{fileUUID:t}=e;d(t)&&(h[t]=!0)}),e.storageGroupUUIDs.push(...f),e.maxVirtualDiskSizes.fill(U))}return e},{anvils:[],anvilUUIDs:[],fileUUIDs:[],maxCPUCores:0,maxMemory:k,maxVirtualDiskSizes:r.map(()=>k),storageGroupUUIDs:[]});return m.fileUUIDs=Object.keys(h),r.forEach((e,n)=>{""!==e&&(m.maxVirtualDiskSizes[n]=t[e].storageGroupFree)}),m},O=(e,t,n,l,s,i,a,u)=>{let c=function(n){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return e[n][l]},p=function(l,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e[l][r]=s,n({...e})},h=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;p("sizes",n);let{formattedMaxVDSizes:l,maxVirtualDiskSizes:s}=i({virtualDisks:e});u({inputs:{["vd".concat(t,"Size")]:{displayMax:"".concat(l[t]),max:s[t],value:n}}})},x=e=>{let{value:t=c("inputSizes"),unit:n=c("inputUnits")}=e;t!==c("inputSizes")&&p("inputSizes",t),n!==c("inputUnits")&&p("inputUnits",n),(0,g.KY)(t,n,e=>h(e),()=>h())},m=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c("inputStorageGroupUUIDs");t!==c("inputStorageGroupUUIDs")&&p("inputStorageGroupUUIDs",t),i({virtualDisks:e})};return(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,r.jsx)(j.Z,{id:"ps-virtual-disk-size-".concat(t),label:"Disk size",messageBoxProps:c("inputSizeMessages"),inputWithLabelProps:{inputProps:{endAdornment:F("".concat(c("inputMaxes")," ").concat(c("inputUnits")),{onButtonClick:()=>{p("inputSizes",c("inputMaxes")),h(c("maxes"))}}),onChange:e=>{let{target:{value:t}}=e;x({value:t})},type:"number",value:c("inputSizes")},inputLabelProps:{isNotifyRequired:c("sizes")===k}},selectItems:d.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;x({unit:t})},value:c("inputUnits")}}}),(0,r.jsx)(Z.Z,{id:"ps-storage-group-".concat(t),label:"Storage group",disableItem:e=>!(s.includes(e)&&c("sizes")<=a[e].storageGroupFree),inputLabelProps:{isNotifyRequired:0===c("inputStorageGroupUUIDs").length},messageBoxProps:c("inputStorageGroupUUIDMessages"),selectItems:l,selectProps:{onChange:e=>{let{target:{value:t}}=e;m(t)},onClearIndicatorClick:()=>m(""),renderValue:e=>{var t;let{anvilName:n="?",storageGroupName:l="Unknown (".concat(e,")")}=null!==(t=a[e])&&void 0!==t?t:{};return"".concat(l," (").concat(n,")")},value:c("inputStorageGroupUUIDs")}})]},"ps-virtual-disk-".concat(c("stateIds")))},T=function(){let{existingVirtualDisks:e={stateIds:[],inputMaxes:[],inputSizeMessages:[],inputSizes:[],inputStorageGroupUUIDMessages:[],inputStorageGroupUUIDs:[],inputUnits:[],maxes:[],sizes:[]},stateId:t=(0,c.Z)(),inputMax:n="0",inputSize:l="",inputSizeMessage:s,inputStorageGroupUUID:r="",inputStorageGroupUUIDMessage:i,inputUnit:o="GiB",max:a=k,setVirtualDisks:u,size:d=k}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stateIds:p,inputMaxes:h,inputSizeMessages:x,inputSizes:m,inputStorageGroupUUIDMessages:g,inputStorageGroupUUIDs:v,inputUnits:f,maxes:U,sizes:b}=e;return p.push(t),h.push(n),x.push(s),m.push(l),g.push(i),v.push(r),f.push(o),U.push(a),b.push(d),null==u||u.call(null,{...e}),e},N=e=>e.filter(e=>""!==e),R=e=>({fromUnit:"B",onSuccess:{string:e},precision:0,toUnit:"ibyte"});(0,g.Bh)(A,R((e,t)=>{l="".concat(e," ").concat(t)})),(0,g.Bh)(G,R((e,t)=>{s="".concat(e," ").concat(t)}));let Q=e=>{let{dialogProps:{open:t},onClose:n}=e,[c,B]=(0,i.useState)([]),[R,Q]=(0,i.useState)({}),[q,L]=(0,i.useState)({}),[E,V]=(0,i.useState)({}),[W,H]=(0,i.useState)({}),[_,J]=(0,i.useState)([]),[Y,K]=(0,i.useState)([]),[X,$]=(0,i.useState)([]),[ee,et]=(0,i.useState)([]),[en,el]=(0,i.useState)(""),[es,er]=(0,i.useState)(),[ei,eo]=(0,i.useState)(2),[ea,eu]=(0,i.useState)(0),[ec,ed]=(0,i.useState)(),[ep,eh]=(0,i.useState)(k),[ex,em]=(0,i.useState)(k),[eg,ev]=(0,i.useState)(),[ef,eU]=(0,i.useState)("0"),[eb,ej]=(0,i.useState)(""),[eS,eZ]=(0,i.useState)("GiB"),[eI,ey]=(0,i.useState)(T()),[eD,eP]=(0,i.useState)(""),[eC,eM]=(0,i.useState)(),[ek,eA]=(0,i.useState)(""),[eG]=(0,i.useState)(),[eF,eB]=(0,i.useState)(""),[ew,ez]=(0,i.useState)(),[eO,eT]=(0,i.useState)(null),[eN,eR]=(0,i.useState)(),[eQ,eq]=(0,i.useState)([]),[eL,eE]=(0,i.useState)([]),[eV,eW]=(0,i.useState)([]),[eH,e_]=(0,i.useState)(!1),{confirmDialog:eJ,finishConfirm:eY,setConfirmDialogLoading:eK,setConfirmDialogOpen:eX,setConfirmDialogProps:e$}=(0,C.Z)(),e0=(0,i.useMemo)(()=>{let e=[];for(let t=1;t<=ea;t+=1)e.push(t);return e},[ea]),e1={serverName:{defaults:{onSuccess:()=>{er(void 0)},value:en},isRequired:!0,tests:[{onFailure:()=>{er({text:"The server name length must be 1 to 16 characters.",type:"warning"})},test:e=>{let{value:t}=e,{length:n}=t;return n>=1&&n<=16}},{onFailure:()=>{er({text:"The server name is expected to only contain alphanumeric, hyphen, or underscore characters.",type:"warning"})},test:e=>{let{value:t}=e;return/^[a-zA-Z0-9_-]+$/.test(t)}},{onFailure:()=>{er({text:"This server name already exists, please choose another name.",type:"warning"})},test:e=>{let{value:t}=e;return void 0===E[t]}}]},cpuCores:{defaults:{max:ea,min:1,onSuccess:()=>{ed(void 0)},value:ei},isRequired:!0,tests:[{onFailure:()=>{ed({text:"Non available.",type:"warning"})},test:D.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ed({text:"The number of CPU cores is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:D.SQ}]},memory:{defaults:{displayMax:"".concat(ef," ").concat(eS),displayMin:l,max:ex,min:A,onSuccess:()=>{ev(void 0)},value:ep},isRequired:!0,tests:[{onFailure:()=>{ev({text:"Non available.",type:"warning"})},test:D.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ev({text:"Memory is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:D.SQ}]},installISO:{defaults:{onSuccess:()=>{eM(void 0)},value:eD},isRequired:!0,tests:[{test:D.HJ}]},anvil:{defaults:{onSuccess:()=>{ez(void 0)},value:eF},isRequired:!0,tests:[{test:D.HJ}]},optimizeForOS:{defaults:{onSuccess:()=>{eR(void 0)},value:null==eO?void 0:eO.key},isRequired:!0,tests:[{test:D.HJ}]}};eI.inputSizeMessages.forEach((e,t)=>{e1["vd".concat(t,"Size")]={defaults:{displayMax:"".concat(eI.inputMaxes[t]," ").concat(eI.inputUnits[t]),displayMin:s,max:eI.maxes[t],min:G,onSuccess:()=>{eI.inputSizeMessages[t]=void 0},value:eI.sizes[t]},isRequired:!0,onFinishBatch:()=>{ey({...eI})},tests:[{onFailure:()=>{eI.inputSizeMessages[t]={text:"Non available.",type:"warning"}},test:D.X7},{onFailure:e=>{let{displayMax:n,displayMin:l}=e;eI.inputSizeMessages[t]={text:"Virtual disk ".concat(t," size is expected to be between ").concat(l," and ").concat(n,"."),type:"warning"}},test:D.SQ}]},e1["vd".concat(t,"StorageGroup")]={defaults:{onSuccess:()=>{eI.inputStorageGroupUUIDMessages[t]=void 0},value:eI.inputStorageGroupUUIDs[t]},isRequired:!0,onFinishBatch:()=>{ey({...eI})},tests:[{test:D.HJ}]}});let e2=function(){let{allAnvils:e=c,cpuCores:t=ei,fileUUIDs:n=[eD,ek],includeAnvilUUIDs:l=N([eF]),includeFileUUIDs:s,includeStorageGroupUUIDs:r,inputMemoryUnit:i=eS,memory:o=ep,storageGroupUUIDMapToData:a=W,virtualDisks:u=eI}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{anvilUUIDs:d,fileUUIDs:p,maxCPUCores:h,maxMemory:x,maxVirtualDiskSizes:m,storageGroupUUIDs:v}=z(e,a,t,o,u.sizes,u.inputStorageGroupUUIDs,n,{includeAnvilUUIDs:l,includeFileUUIDs:s,includeStorageGroupUUIDs:r});eu(h),em(x);let f=[];u.maxes=m,u.maxes.forEach((e,t)=>{(0,g.Bh)(e,{fromUnit:"B",onSuccess:{string:(e,n)=>{u.inputMaxes[t]=e,f[t]="".concat(e," ").concat(n)}},toUnit:u.inputUnits[t]})}),ey({...u}),eq(d),eE(p),eW(v);let U="";return(0,g.Bh)(x,{fromUnit:"B",onSuccess:{string:(e,t)=>{eU(e),U="".concat(e," ").concat(t)}},toUnit:i}),{formattedMaxMemory:U,formattedMaxVDSizes:f,maxCPUCores:h,maxMemory:x,maxVirtualDiskSizes:m}},e7=(0,i.useCallback)(e2,[]),e8=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[l,...s]=t;return(0,D.BD)({tests:e1,...l},...s)},e9=function(){let{cmValue:e=k,cmUnit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eh(e);let{formattedMaxMemory:n,maxMemory:l}=e2({inputMemoryUnit:t,memory:e});e8({inputs:{memory:{displayMax:n,max:l,value:e}}})},e3=function(){let{value:e=eb,unit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==eb&&ej(e),t!==eS&&eZ(t),(0,g.KY)(e,t,e=>e9({cmValue:e,cmUnit:t}),()=>e9({cmUnit:t}))},e6=e=>{eP(e),e2({fileUUIDs:[e,ek]})},e4=e=>{eA(e),e2({fileUUIDs:[eD,e]})},e5=e=>{let t=N([e]);eB(e),e2({includeAnvilUUIDs:t})},te=()=>(0,r.jsxs)(a.ZP,{container:!0,columns:10,direction:"column",children:[(0,r.jsx)(a.ZP,{item:!0,xs:10,children:(0,r.jsxs)(P.Ac,{children:["Server ",(0,r.jsx)(P.Q0,{text:en})," will be created on anvil node"," ",(0,r.jsx)(P.Q0,{text:R[eF].anvilName})," ","with the following properties:"]})}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(P.Ac,{text:"CPU"})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsxs)(P.Ac,{children:[(0,r.jsx)(P.Q0,{edge:"start",children:ei})," ","core(s)"]})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(P.Ac,{children:[(0,r.jsx)(P.Q0,{edge:"start",children:ea})," ","core(s) available"]})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(P.Ac,{text:"Memory"})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsx)(P.Ac,{children:(0,r.jsxs)(P.Q0,{edge:"start",children:[eb," ",eS]})})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(P.Ac,{children:[(0,r.jsxs)(P.Q0,{edge:"start",children:[ef," ",eS]})," ","available"]})})]}),eI.stateIds.map((e,t)=>{let n=eI.inputMaxes[t],l=eI.inputSizes[t],s=eI.inputUnits[t],i=W[eI.inputStorageGroupUUIDs[t]].storageGroupName;return(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsxs)(P.Ac,{children:["Disk ",(0,r.jsx)(P.Q0,{text:t})]})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsxs)(P.Ac,{children:[(0,r.jsxs)(P.Q0,{edge:"start",children:[l," ",s]})," ","on ",(0,r.jsx)(P.Q0,{children:i})]})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(P.Ac,{children:[(0,r.jsxs)(P.Q0,{edge:"start",children:[n," ",s]})," ","available"]})})]},"ps-virtual-disk-".concat(e,"-summary"))}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(P.Ac,{text:"Install ISO"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(P.Ac,{children:(0,r.jsx)(P.Q0,{edge:"start",children:q[eD].fileName})})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(P.Ac,{text:"Driver ISO"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(P.Ac,{children:q[ek]?(0,r.jsx)(P.Q0,{edge:"start",children:q[ek].fileName}):"none"})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(P.Ac,{text:"Optimize for OS"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(P.Ac,{children:(0,r.jsx)(P.Q0,{edge:"start",children:"".concat(null==eO?void 0:eO.label)})})})]})]}),tt=(0,i.useMemo)(()=>({"anvil node":!!Object.keys(R).length,file:!!Object.keys(q).length,"storage group":!!Object.keys(W).length}),[R,q,W]),{validating:tn}=(0,M.Z)("/anvil?anvilUUIDs=all&isForProvisionServer=1",{onSuccess:e=>{let{anvils:t,anvilSelectItems:n,anvilUUIDMapToData:l,fileSelectItems:s,fileUUIDMapToData:r,serverNameMapToData:i,storageGroupSelectItems:o,storageGroupUUIDMapToData:a}=w(e.anvils);B(t),Q(l),L(r),V(i),H(a),J(n),K(s),et(o);let u={allAnvils:t,storageGroupUUIDMapToData:a};if(1===n.length){let{0:{value:e}}=n;eB(e),u.includeAnvilUUIDs=[e]}if(1===s.length){let{0:{value:e}}=s;eP(e),u.fileUUIDs=[e,""]}if(1===o.length){let{0:{value:e}}=o;ey(t=>{let n={...t};return n.inputStorageGroupUUIDs[0]=e,u.virtualDisks=n,n})}e7(u),$(Object.entries(e.oses).map(e=>{let[t,n]=e;return{key:t,label:n}})),e_(!0)},refreshInterval:5e3});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.Z,{fullWidth:!0,maxWidth:"sm",open:t,PaperComponent:S.s_,PaperProps:{sx:{overflow:"visible"}},children:[(0,r.jsxs)(S.V9,{children:[(0,r.jsx)(P.z,{children:"Provision a server"}),(0,r.jsx)(y.Z,{syncing:tn}),(0,r.jsx)(f.Z,{mapPreset:"close",onClick:n,size:"small"})]}),(0,r.jsx)(m.Z,{spacing:".6em",children:Object.entries(tt).map(e=>{let[t,n]=e;return!n&&(0,r.jsxs)(U.Z,{type:"warning",children:["No ",t," available yet. It will appear shortly after creation."]})})}),eH?(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",maxHeight:"50vh",overflowY:"scroll",paddingTop:".6em","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,r.jsx)(b.Z,{id:"ps-server-name",label:"Server name",inputProps:{onChange:e=>{let{target:{value:t}}=e;el(t),e8({inputs:{serverName:{value:t}}})},value:en},inputLabelProps:{isNotifyRequired:0===en.length},messageBoxProps:es}),(0,r.jsx)(h.Z,{id:"ps-cpu-cores",disableClearable:!0,extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=ei<=0},getOptionLabel:e=>String(e),label:"CPU cores",messageBoxProps:ec,noOptionsText:"No available number of cores.",onChange:(e,t)=>{if(!t||t===ei)return;eo(t);let{maxCPUCores:n}=e2({cpuCores:t});e8({inputs:{cpuCores:{max:n,value:t}}})},openOnFocus:!0,options:e0,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-cpu-cores-".concat(t)},t),value:ei}),(0,r.jsx)(j.Z,{id:"ps-memory",label:"Memory",messageBoxProps:eg,inputWithLabelProps:{inputProps:{endAdornment:F("".concat(ef," ").concat(eS),{onButtonClick:()=>{ej(ef),e9({cmValue:ex})}}),onChange:e=>{let{target:{value:t}}=e;e3({value:t})},type:"number",value:eb},inputLabelProps:{isNotifyRequired:ep===k}},selectItems:d.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;e3({unit:t})},value:eS}}}),eI.stateIds.map((e,t)=>O(eI,t,ey,ee,eV,e2,W,e8)),(0,r.jsx)(Z.Z,{disableItem:e=>e===ek,hideItem:e=>!eL.includes(e),id:"ps-install-image",inputLabelProps:{isNotifyRequired:0===eD.length},label:"Install ISO",messageBoxProps:eC,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e6(t)},onClearIndicatorClick:()=>e6(""),value:eD}}),(0,r.jsx)(Z.Z,{disableItem:e=>e===eD,hideItem:e=>!eL.includes(e),id:"ps-driver-image",label:"Driver ISO",messageBoxProps:eG,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e4(t)},onClearIndicatorClick:()=>e4(""),value:ek}}),(0,r.jsx)(Z.Z,{disableItem:e=>!eQ.includes(e),id:"ps-anvil",inputLabelProps:{isNotifyRequired:0===eF.length},label:"Anvil node",messageBoxProps:ew,selectItems:_,selectProps:{onChange:e=>{let{target:{value:t}}=e;e5(t)},onClearIndicatorClick:()=>e5(""),renderValue:e=>{var t;let{anvilName:n="Unknown ".concat(e)}=null!==(t=R[e])&&void 0!==t?t:{};return n},value:eF}}),(0,r.jsx)(h.Z,{id:"ps-optimize-for-os",extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=null===eO},isOptionEqualToValue:(e,t)=>e.key===t.key,label:"Optimize for OS",messageBoxProps:eN,noOptionsText:"No matching OS",onChange:(e,t)=>{eT(t)},openOnFocus:!0,options:X,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-optimize-for-os-".concat(t.key),children:[t.label," (",t.key,")"]}),value:eO})]}):(0,r.jsx)(I.Z,{}),(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",marginTop:"1em","& > :not(:first-child)":{marginTop:"1em"}},children:(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"},children:(0,r.jsx)(x.Z,{background:"blue",disabled:!e8({isIgnoreOnCallbacks:!0}),onClick:()=>{e$({actionProceedText:"Provision",content:te(),onProceedAppend:()=>{eK(!0);let e={serverName:en,cpuCores:ei,memory:ep.toString(),virtualDisks:eI.stateIds.map((e,t)=>({storageSize:eI.sizes[t].toString(),storageGroupUUID:eI.inputStorageGroupUUIDs[t]})),installISOFileUUID:eD,driverISOFileUUID:ek,anvilUUID:eF,optimizeForOS:null==eO?void 0:eO.key};p.Z.post("/server",e).then(()=>{null==n||n.call(null),el(""),eY("Success",{children:(0,r.jsx)(r.Fragment,{children:"Provision server job registered."})})}).catch(e=>{let t=(0,v.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:["Failed to start provision server job."," ",t.children]}),eY("Error",t)})},titleText:"Provision ".concat(en,"?")}),eX(!0)},children:"Provision"})})})]}),eJ]})};Q.defaultProps={onClose:void 0},t.Z=Q},6189:function(e,t,n){n.d(t,{Z:function(){return I}});var l=n(85893),s=n(84799),r=n(20869),i=n(60166),o=n(51714),a=n(82492),u=n.n(a),c=n(67294),d=n(77831),p=n(34635),h=n(23833),x=n(15627),m=n(79237),g=n(12641),v=n(49440),f=n(80543),U=n(79588),b=n(99657),j=n(80594),S=n(64242),Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{onClearIndicatorClick:i,...o}=r,{sx:a,value:u,...p}=o,h=(0,c.useMemo)(()=>({["& .".concat(s.Z.icon)]:{color:d.s7},["& .".concat(v.Z.root)]:{marginRight:".8em"},["& .".concat(f.Z.root)]:{color:d.s7,visibility:"hidden"},["&:hover .".concat(v.Z.root," .").concat(f.Z.root,",\n      &.").concat(U.Z.focused," .").concat(v.Z.root," .").concat(f.Z.root)]:{visibility:"visible"},...a}),[a]),x=(0,c.useMemo)(()=>{if(u&&i)return(0,l.jsx)(b.Z,{position:"end",children:(0,l.jsx)(j.Z,{onClick:i,tabIndex:-1,children:(0,l.jsx)(g.Z,{fontSize:"small"})})})},[i,u]);return(0,l.jsx)(S.Z,{endAdornment:x,value:u,...p,sx:h})},I=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[a]=t,{id:g,label:v,selectItems:f,checkItem:U,disableItem:b,formControlProps:j,hideItem:S,inputLabelProps:I={},isReadOnly:y=!1,messageBoxProps:D={},name:P,noOptionsText:C="No options",onBlur:M,onChange:k,onFocus:A,required:G,selectProps:{MenuProps:F,multiple:B,sx:w,...z}={},value:O,isCheckableItems:T=B}=a,N=(0,c.useMemo)(()=>y?u()({["& .".concat(s.Z.icon)]:{visibility:"hidden"}},w):w,[y,w]),R=(0,c.useCallback)(e=>T&&(0,l.jsx)(r.Z,{checked:null==U?void 0:U.call(null,e)}),[U,T]),Q=(0,c.useCallback)((e,t)=>(0,l.jsxs)(h.Z,{disabled:null==b?void 0:b.call(null,e),sx:{display:(null==S?void 0:S.call(null,e))?"none":void 0},value:e,children:[R(e),t]},"".concat(g,"-").concat(e)),[R,b,S,g]),q=(0,c.useMemo)(()=>"".concat(g,"-select-element"),[g]),L=(0,c.useMemo)(()=>(0,l.jsx)(x.Z,{id:g,label:v}),[g,v]),E=(0,c.useMemo)(()=>v&&(0,l.jsx)(m.Z,{htmlFor:q,isNotifyRequired:G,...I,children:v}),[I,G,v,q]),V=(0,c.useMemo)(()=>f.length?f.map(e=>{if("string"==typeof e)return Q(e,e);let{value:t,displayValue:n=String(t)}=e;return Q(t,n)}):(0,l.jsx)(h.Z,{disabled:!0,children:C}),[Q,C,f]),W=(0,c.useMemo)(()=>u()({sx:{["& .".concat(i.Z.paper)]:{backgroundColor:d.s7}}},F),[F]);return(0,l.jsxs)(o.Z,{fullWidth:!0,...j,children:[E,(0,l.jsx)(Z,{id:q,input:L,MenuProps:W,multiple:B,name:P,onBlur:M,onChange:k,onFocus:A,readOnly:y,value:O,...z,sx:N,children:V}),(0,l.jsx)(p.Z,{...D})]})}},76811:function(e,t,n){var l=n(85893),s=n(42796),r=n(89262),i=n(77831);let o=(0,r.ZP)(e=>{let{syncing:t,...n}=e;return(0,l.jsx)(s.Z,{...n})})(e=>{let{syncing:t}=e,n=i.UZ;return t&&(n=i.Ej),{color:n}});t.Z=o},2188:function(e,t,n){var l=n(85893),s=n(67294),r=n(77583),i=n(99576);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:t="",content:n="",titleText:o="",...a}={}}=e,u=(0,s.useRef)(null),[c,d]=(0,s.useState)({actionProceedText:t,content:n,titleText:o}),p=(0,s.useCallback)(e=>d(t=>{let{loading:n,...l}=t;return{...l,loading:e}}),[]),h=(0,s.useCallback)(e=>{var t,n;return null==u?void 0:null===(n=u.current)||void 0===n?void 0:null===(t=n.setOpen)||void 0===t?void 0:t.call(null,e)},[]),x=(0,s.useCallback)((e,t)=>d({actionProceedText:"",content:(0,l.jsx)(i.Z,{...t}),showActionArea:!1,showClose:!0,titleText:e}),[]);return{confirmDialog:(0,s.useMemo)(()=>(0,l.jsx)(r.Z,{...a,...c,ref:u}),[c,a]),confirmDialogRef:u,setConfirmDialogLoading:p,setConfirmDialogOpen:h,setConfirmDialogProps:d,finishConfirm:x}}},77510:function(e,t,n){var l=n(67294),s=n(8100),r=n(92230),i=n(54120);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseUrl:n=r.Z,fetcher:o=i.Z,mod:a,...u}=t,{data:c,error:d,isValidating:p,mutate:h}=(0,s.ZP)("".concat(n).concat(e),o,u),x=(0,l.useMemo)(()=>a&&c&&a(c),[c,a]),m=!d&&!c;return{altData:x,data:c,error:d,mutate:h,loading:m,validating:p}}},84628:function(e,t,n){n.d(t,{k:function(){return l}});let l=["B","KiB","MiB","GiB","TiB"].map(e=>({value:e}))},62800:function(e,t,n){n.d(t,{Bh:function(){return s},KY:function(){return r},MU:function(){return i}});var l=n(54490),s=function(e){let{fromUnit:t,onFailure:n,onSuccess:s,precision:r,toUnit:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,l.gO)(e,{fromUnit:t,precision:r,toUnit:i});if(o){let{value:e,unit:t}=o;try{var a,u,c;null==s||null===(a=s.bigint)||void 0===a||a.call(null,BigInt(e),t),null==s||null===(u=s.number)||void 0===u||u.call(null,parseFloat(e),t),null==s||null===(c=s.string)||void 0===c||c.call(null,e,t)}catch(l){null==n||n.call(null,l,e,t)}}else null==n||n.call(null)},r=(e,t,n,l)=>{s(e,{fromUnit:t,onFailure:l,onSuccess:{bigint:n},precision:0,toUnit:"B"})},i=e=>(0,l._d)(e,{toUnit:"ibyte"})},52675:function(e,t,n){n.d(t,{_:function(){return o},dg:function(){return a},qY:function(){return d},Gn:function(){return p},LT:function(){return U},BD:function(){return f},X7:function(){return b},HJ:function(){return i},SQ:function(){return u}});var l=n(85893),s=n(38189),r=n(59278),i=e=>{let{value:t}=e;return!!t&&String(t).length>0},o=function(e,t){let{isRequired:n,onFinishBatch:r,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:r,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];a((0,l.jsxs)(l.Fragment,{children:[e," should be a valid IPv4 address."]}),...n)},test:e=>{let{value:t}=e;return s.tf.test(t)}}]}},a=function(e,t){let{isRequired:n,onFinishBatch:r,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:r,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];a((0,l.jsxs)(l.Fragment,{children:[e," must be one or more valid IPv4 addresses separated by comma(s); without trailing comma."]}),...n)},test:e=>{let{value:t}=e;return s.ah.test(t)}}]}},u=e=>{let{max:t,min:n,value:l}=e;return!!l&&l>=n&&l<=t},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parseInt";return"number"==typeof e?e:Number[t](String(e))},d=function(e,t){let{isRequired:n,onFinishBatch:s,...r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,d=[];return i?d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];i((0,l.jsxs)(l.Fragment,{children:[e," must be a valid integer."]}),...n)},test:e=>{let{value:t}=e;return Number.isSafeInteger(c(t))}}):o&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];o((0,l.jsxs)(l.Fragment,{children:[e," must be a valid floating-point number."]}),...n)},test:e=>{let{value:t}=e;return Number.isFinite(c(t,"parseFloat"))}}),a&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];let{displayMax:r,displayMin:i}=n[0];a((0,l.jsxs)(l.Fragment,{children:[e," is expected to be between ",i," and ",r,"."]}),...n)},test:u}),{defaults:{...r,onSuccess:t},isRequired:n,onFinishBatch:s,tests:d}},p=function(e,t){let{isRequired:n,onFinishBatch:o,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;return{defaults:{...a,onSuccess:t},isRequired:n,onFinishBatch:o,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];u((0,l.jsxs)(l.Fragment,{children:[e," cannot contain single-quote (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:"'"}),"), double-quote (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:'"'}),"), slash (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:"/"}),"), backslash (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:"\\"}),"), angle brackets (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:"<>"}),"), curly brackets (",(0,l.jsx)(r.Q0,{inheritColour:!0,text:"{}"}),")."]}),...n)},test:e=>{let{value:t}=e;return s.OU.test(t)}}]}};let h=()=>({}),x=e=>{let{onFailure:t,onSuccess:n}=e;return{cbFailure:t,cbSuccess:n}},m=e=>{let{isIgnoreOnCallbacks:t,onFinishBatch:n}=e;return t?{setTestCallbacks:h}:{cbFinishBatch:n,setTestCallbacks:x}},g=(e,t)=>null!=e?e:t,v=(e,t)=>e||t;var f=function(){let{excludeTestIds:e=[],excludeTestIdsRe:t,inputs:n={},isContinueOnFailure:l,isIgnoreOnCallbacks:s,isTestAll:r=0===Object.keys(n).length,tests:i={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[...e],a={},u=!0;return r&&Object.keys(i).forEach(e=>{a[e]={}}),a={...a,...n},t&&Object.keys(a).forEach(e=>{t.test(e)&&o.push(e)}),o.forEach(e=>{delete a[e]}),Object.keys(a).every(e=>{let{defaults:{compare:t=[],displayMax:n,displayMin:r,getCompare:o,getValue:c,isIgnoreOnCallbacks:d=s,max:p=0,min:h=0,onSuccess:x,value:f=null}={},isRequired:U=!1,onFinishBatch:b,optionalTests:j,tests:S}=i[e],{getCompare:Z=o,getValue:I=c,isIgnoreOnCallbacks:y=d,max:D=p,min:P=h,compare:C=g(null==Z?void 0:Z.call(null),t),value:M=g(null==I?void 0:I.call(null),f),displayMax:k=v(n,String(D)),displayMin:A=v(r,String(P))}=a[e],{cbFinishBatch:G,setTestCallbacks:F}=m({isIgnoreOnCallbacks:y,onFinishBatch:b});if(!M&&!U)return null==G||G.call(null,!0,e),!0;let B=e=>{let{onFailure:t,onSuccess:n=x,test:l}=e,s={},r=l({append:s,compare:C,max:D,min:P,value:M}),{cbFailure:i,cbSuccess:o}=F({onFailure:t,onSuccess:n});return r?null==o||o.call(null,{append:s}):(u=r,null==i||i.call(null,{append:s,compare:C,displayMax:k,displayMin:A,max:D,min:P,value:M})),r};null==j||j.forEach(B);let w=S.every(B);return null==G||G.call(null,w,e),w||l}),u},U=function(e){let{excludeTestIds:t=[],...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let{excludeTestIds:l=[],...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f({tests:e,excludeTestIds:[...t,...l],...n,...s})}},b=e=>{let{max:t,min:n}=e;return t>=n}}}]);