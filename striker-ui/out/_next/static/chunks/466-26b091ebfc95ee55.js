"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[466],{96674:function(e,t,n){var s=n(85893),r=n(89256),i=n(62191),l=n(89262),o=n(59879),a=n(324),u=n(28721),c=n(73315),d=n(14440),p=n(55074),x=n(67294),h=n(77831),m=n(34635),g=n(91029);let v=e=>(0,s.jsx)(r.Z,{in:!0,children:(0,s.jsx)(i.Z,{...e})}),f=(0,l.ZP)("ul")({padding:0}),U=o.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:n,getGroupLabel:r,label:i,messageBoxProps:l,renderGroup:o,renderInput:S,sx:j,...b}=e,I=(0,x.useMemo)(()=>({paper:{sx:{backgroundColor:h.lD,["& .".concat(a.Z.groupLabel)]:{backgroundColor:h.lD}}},...t}),[t]),y=(0,x.useMemo)(()=>o||r&&(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)(U,{component:"div",className:a.Z.groupLabel,children:r(e.group)}),(0,s.jsx)(f,{className:a.Z.groupUl,children:e.children})]},e.key)),[r,o]),D=(0,x.useMemo)(()=>null!=S?S:e=>{let{fullWidth:t,InputProps:r,InputLabelProps:l,inputProps:o}=e,a={formControlProps:{fullWidth:t,ref:r.ref},inputLabelProps:l,inputProps:{className:r.className,endAdornment:r.endAdornment,inputProps:o,startAdornment:r.startAdornment},label:i};return null==n||n.call(null,a,e),(0,s.jsx)(g.Z,{...a})},[n,i,S]),P=(0,x.useMemo)(()=>({["& .".concat(u.Z.root," .").concat(a.Z.endAdornment)]:{right:"7px",["& .".concat(c.Z.root)]:{color:h.s7}},...j}),[j]);return(0,s.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(p.Z,{PaperComponent:v,...b,componentsProps:I,renderGroup:y,renderInput:D,sx:P}),(0,s.jsx)(m.Z,{...l})]})}},56466:function(e,t,n){let s,r;n.d(t,{Z:function(){return V}});var i=n(85893),l=n(67294),o=n(14440),a=n(99514),u=n(92309),c=n(12641),d=n(25934),p=n(77831),x=n(98484),h=n(96674),m=n(77583),g=n(99429),v=n(56903),f=n(62800),U=n(65895),S=n(99576),j=n(91029),b=n(20408),I=n(28721),y=n(34635),D=n(6189);let P={inputWithLabelProps:{},messageBoxProps:{},selectWithLabelProps:{}},Z=e=>{let{id:t,label:n,inputWithLabelProps:s=P.inputWithLabelProps,messageBoxProps:r=P.messageBoxProps,selectItems:l,selectWithLabelProps:a=P.selectWithLabelProps}=e;return(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"row","& > :first-child":{flexGrow:1},"& > :not(:last-child)":{marginRight:".5em"},["&:hover\n          .".concat(b.Z.root,"\n          .").concat(I.Z.root,"\n          .").concat(I.Z.notchedOutline)]:{borderColor:p.s7}},children:[(0,i.jsx)(j.Z,{id:t,label:n,...s}),(0,i.jsx)(D.Z,{formControlProps:{fullWidth:!1,sx:{minWidth:"min-content"}},id:"".concat(t,"-nested-select"),selectItems:l,...a})]}),(0,i.jsx)(y.Z,{...r})]})};Z.defaultProps=P;var C=n(23930),M=n(53541),G=n(52675),k=n(59278);let A=BigInt(0),B=[{value:"B"},{value:"KiB"},{value:"MiB"},{value:"GiB"},{value:"TiB"}],F=BigInt(65536),z=BigInt(104857600),w={backgroundColor:p.Ej,color:p.lD,"&:hover":{backgroundColor:p.Ej}},T=(e,t)=>{let{onButtonClick:n}=t;return(0,i.jsx)(g.Z,{disabled:void 0===n,onClick:n,sx:{minWidth:"unset",whiteSpace:"nowrap"},children:"Max: ".concat(e)})},O=function(){let{endAdornment:e,mainLabel:t,subLabel:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.jsxs)(o.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"row",width:"100%","& > :first-child":{flexGrow:1}},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:[t&&(0,i.jsx)(k.Ac,{inverted:!0,text:t}),n&&(0,i.jsx)(k.Ac,{inverted:!0,text:n})]}),e]})},N=e=>{let t={},n=e.reduce((e,n)=>{let{anvilUUID:s,anvilName:r,anvilTotalMemory:l,anvilTotalAllocatedMemory:a,anvilTotalAvailableMemory:u,hosts:c,servers:d,storageGroups:p,files:x}=n,{anvilStorageGroups:h,anvilStorageGroupUUIDs:m}=p.reduce((t,n)=>{let l={...n,anvilUUID:s,anvilName:r,storageGroupSize:BigInt(n.storageGroupSize),storageGroupFree:BigInt(n.storageGroupFree),humanizedStorageGroupFree:""};return(0,f.Bh)(n.storageGroupFree,{fromUnit:"B",onSuccess:{string:(e,t)=>{l.humanizedStorageGroupFree="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),t.anvilStorageGroupUUIDs.push(n.storageGroupUUID),t.anvilStorageGroups.push(l),e.storageGroups.push(l),e.storageGroupSelectItems.push({displayValue:O({endAdornment:(0,i.jsx)(k.Ac,{inverted:!0,text:"~".concat(l.humanizedStorageGroupFree," free")}),mainLabel:n.storageGroupName,subLabel:r}),value:n.storageGroupUUID}),e.storageGroupUUIDMapToData[n.storageGroupUUID]=l,t},{anvilStorageGroups:[],anvilStorageGroupUUIDs:[]}),g=[];x.forEach(e=>{let{fileUUID:n}=e;g.push(n),t[n]=e});let v={...n,anvilTotalMemory:BigInt(l),anvilTotalAllocatedMemory:BigInt(a),anvilTotalAvailableMemory:BigInt(u),humanizedAnvilTotalAvailableMemory:"",hosts:c.map(e=>({...e,hostMemory:BigInt(e.hostMemory)})),servers:d.map(t=>{let{serverMemory:n,serverName:s,...r}=t,i={...r,serverMemory:BigInt(n),serverName:s};return e.serverNameMapToData[s]=i,i}),storageGroupUUIDs:m,storageGroups:h,fileUUIDs:g};return(0,f.Bh)(u,{fromUnit:"B",onSuccess:{string:(e,t)=>{v.humanizedAnvilTotalAvailableMemory="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),e.anvils.push(v),e.anvilSelectItems.push({displayValue:O({endAdornment:(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",width:"8rem"},children:[(0,i.jsx)(k.Ac,{inverted:!0,text:"CPU: ".concat(v.anvilTotalCPUCores," cores")}),(0,i.jsx)(k.Ac,{inverted:!0,text:"Memory: ~".concat(v.humanizedAnvilTotalAvailableMemory)})]}),mainLabel:v.anvilName,subLabel:v.anvilDescription}),value:s}),e.anvilUUIDMapToData[s]=v,e},{anvils:[],anvilSelectItems:[],anvilUUIDMapToData:{},files:[],fileSelectItems:[],fileUUIDMapToData:{},serverNameMapToData:{},storageGroups:[],storageGroupSelectItems:[],storageGroupUUIDMapToData:{}});return Object.values(t).forEach(e=>{n.files.push(e),n.fileSelectItems.push({displayValue:e.fileName,value:e.fileUUID}),n.fileUUIDMapToData[e.fileUUID]=e}),n},L=function(e,t,n,s,r,i,l){let{includeAnvilUUIDs:o=[],includeFileUUIDs:a=[],includeStorageGroupUUIDs:u=[]}=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=()=>!0,d=()=>!0,p=()=>!0;o.length>0&&(c=e=>o.includes(e)),a.length>0&&(d=e=>a.includes(e)),u.length>0&&(p=e=>u.includes(e));let x={},h=i.reduce((e,t,n)=>{var s;let i=null!==(s=r[n])&&void 0!==s?s:A;return e.all+=i,""===t||(void 0===e[t]&&(e[t]=A),e[t]+=i),e},{all:A}),m=e.reduce((e,o)=>{let{anvilUUID:a}=o;if(c(a)){let{anvilTotalCPUCores:u,anvilTotalAvailableMemory:c,files:m,fileUUIDs:g,storageGroups:v}=o,f=[],U=A,S=A;v.forEach(e=>{let{storageGroupUUID:t,storageGroupFree:n}=e;p(t)&&(f.push(t),S+=n,n>U&&(U=n))}),[()=>v.length>0,()=>n<=u,()=>s<=c,()=>i.every((e,n)=>{var s;let i=null!==(s=r[n])&&void 0!==s?s:A,l=!0,o=i<=U;return""!==e&&(l=f.includes(e),o=i<=t[e].storageGroupFree),l&&o}),()=>Object.entries(h).every(e=>{let[n,s]=e;return"all"===n?s<=S:s<=t[n].storageGroupFree}),()=>l.every(e=>""===e||g.includes(e))].every(e=>e())&&(e.anvils.push(o),e.anvilUUIDs.push(a),e.maxCPUCores=Math.max(u,e.maxCPUCores),c>e.maxMemory&&(e.maxMemory=c),m.forEach(e=>{let{fileUUID:t}=e;d(t)&&(x[t]=!0)}),e.storageGroupUUIDs.push(...f),e.maxVirtualDiskSizes.fill(U))}return e},{anvils:[],anvilUUIDs:[],fileUUIDs:[],maxCPUCores:0,maxMemory:A,maxVirtualDiskSizes:i.map(()=>A),storageGroupUUIDs:[]});return m.fileUUIDs=Object.keys(x),i.forEach((e,n)=>{""!==e&&(m.maxVirtualDiskSizes[n]=t[e].storageGroupFree)}),m},Q=(e,t,n,s,r,l,a,u)=>{let c=function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return e[n][s]},d=function(s,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e[s][i]=r,n({...e})},p=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;d("sizes",n);let{formattedMaxVDSizes:s,maxVirtualDiskSizes:r}=l({virtualDisks:e});u({inputs:{["vd".concat(t,"Size")]:{displayMax:"".concat(s[t]),max:r[t],value:n}}})},x=e=>{let{value:t=c("inputSizes"),unit:n=c("inputUnits")}=e;t!==c("inputSizes")&&d("inputSizes",t),n!==c("inputUnits")&&d("inputUnits",n),(0,f.KY)(t,n,e=>p(e),()=>p())},h=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c("inputStorageGroupUUIDs");t!==c("inputStorageGroupUUIDs")&&d("inputStorageGroupUUIDs",t),l({virtualDisks:e})};return(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsx)(Z,{id:"ps-virtual-disk-size-".concat(t),label:"Disk size",messageBoxProps:c("inputSizeMessages"),inputWithLabelProps:{inputProps:{endAdornment:T("".concat(c("inputMaxes")," ").concat(c("inputUnits")),{onButtonClick:()=>{d("inputSizes",c("inputMaxes")),p(c("maxes"))}}),onChange:e=>{let{target:{value:t}}=e;x({value:t})},type:"number",value:c("inputSizes")},inputLabelProps:{isNotifyRequired:c("sizes")===A}},selectItems:B,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;x({unit:t})},value:c("inputUnits")}}})}),(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsx)(D.Z,{id:"ps-storage-group-".concat(t),label:"Storage group",disableItem:e=>!(r.includes(e)&&c("sizes")<=a[e].storageGroupFree),inputLabelProps:{isNotifyRequired:0===c("inputStorageGroupUUIDs").length},messageBoxProps:c("inputStorageGroupUUIDMessages"),selectItems:s,selectProps:{onChange:e=>{let{target:{value:t}}=e;h(t)},onClearIndicatorClick:()=>h(""),renderValue:e=>{var t;let{anvilName:n="?",storageGroupName:s="Unknown (".concat(e,")")}=null!==(t=a[e])&&void 0!==t?t:{};return"".concat(s," (").concat(n,")")},value:c("inputStorageGroupUUIDs")}})})]},"ps-virtual-disk-".concat(c("stateIds")))},q=function(){let{existingVirtualDisks:e={stateIds:[],inputMaxes:[],inputSizeMessages:[],inputSizes:[],inputStorageGroupUUIDMessages:[],inputStorageGroupUUIDs:[],inputUnits:[],maxes:[],sizes:[]},stateId:t=(0,d.Z)(),inputMax:n="0",inputSize:s="",inputSizeMessage:r,inputStorageGroupUUID:i="",inputStorageGroupUUIDMessage:l,inputUnit:o="GiB",max:a=A,setVirtualDisks:u,size:c=A}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stateIds:p,inputMaxes:x,inputSizeMessages:h,inputSizes:m,inputStorageGroupUUIDMessages:g,inputStorageGroupUUIDs:v,inputUnits:f,maxes:U,sizes:S}=e;return p.push(t),x.push(n),h.push(r),m.push(s),g.push(l),v.push(i),f.push(o),U.push(a),S.push(c),null==u||u.call(null,{...e}),e},E=e=>e.filter(e=>""!==e),R=e=>({fromUnit:"B",onSuccess:{string:e},precision:0,toUnit:"ibyte"});(0,f.Bh)(F,R((e,t)=>{s="".concat(e," ").concat(t)})),(0,f.Bh)(z,R((e,t)=>{r="".concat(e," ").concat(t)}));var V=e=>{let{dialogProps:{open:t},onClose:n}=e,[d,b]=(0,l.useState)([]),[I,y]=(0,l.useState)({}),[P,O]=(0,l.useState)({}),[R,V]=(0,l.useState)({}),[W,_]=(0,l.useState)({}),[H,Y]=(0,l.useState)([]),[J,K]=(0,l.useState)([]),[X,$]=(0,l.useState)([]),[ee,et]=(0,l.useState)([]),[en,es]=(0,l.useState)(""),[er,ei]=(0,l.useState)(),[el,eo]=(0,l.useState)(1),[ea,eu]=(0,l.useState)(0),[ec,ed]=(0,l.useState)(),[ep,ex]=(0,l.useState)(A),[eh,em]=(0,l.useState)(A),[eg,ev]=(0,l.useState)(),[ef,eU]=(0,l.useState)("0"),[eS,ej]=(0,l.useState)(""),[eb,eI]=(0,l.useState)("GiB"),[ey,eD]=(0,l.useState)(q()),[eP,eZ]=(0,l.useState)(""),[eC,eM]=(0,l.useState)(),[eG,ek]=(0,l.useState)(""),[eA]=(0,l.useState)(),[eB,eF]=(0,l.useState)(""),[ez,ew]=(0,l.useState)(),[eT,eO]=(0,l.useState)(null),[eN,eL]=(0,l.useState)(),[eQ,eq]=(0,l.useState)([]),[eE,eR]=(0,l.useState)([]),[eV,eW]=(0,l.useState)([]),[e_,eH]=(0,l.useState)(!1),[eY,eJ]=(0,l.useState)(!1),[eK,eX]=(0,l.useState)(!1),[e$,e0]=(0,l.useState)(0),e1=(0,l.useMemo)(()=>{let e=[];for(let t=1;t<=ea;t+=1)e.push(t);return e},[ea]),e2={serverName:{defaults:{onSuccess:()=>{ei(void 0)},value:en},isRequired:!0,tests:[{onFailure:()=>{ei({text:"The server name length must be 1 to 16 characters.",type:"warning"})},test:e=>{let{value:t}=e,{length:n}=t;return n>=1&&n<=16}},{onFailure:()=>{ei({text:"The server name is expected to only contain alphanumeric, hyphen, or underscore characters.",type:"warning"})},test:e=>{let{value:t}=e;return/^[a-zA-Z0-9_-]+$/.test(t)}},{onFailure:()=>{ei({text:"This server name already exists, please choose another name.",type:"warning"})},test:e=>{let{value:t}=e;return void 0===R[t]}}]},cpuCores:{defaults:{max:ea,min:1,onSuccess:()=>{ed(void 0)},value:el},isRequired:!0,tests:[{onFailure:()=>{ed({text:"Non available.",type:"warning"})},test:G.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ed({text:"The number of CPU cores is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:G.SQ}]},memory:{defaults:{displayMax:"".concat(ef," ").concat(eb),displayMin:s,max:eh,min:F,onSuccess:()=>{ev(void 0)},value:ep},isRequired:!0,tests:[{onFailure:()=>{ev({text:"Non available.",type:"warning"})},test:G.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ev({text:"Memory is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:G.SQ}]},installISO:{defaults:{onSuccess:()=>{eM(void 0)},value:eP},isRequired:!0,tests:[{test:G.HJ}]},anvil:{defaults:{onSuccess:()=>{ew(void 0)},value:eB},isRequired:!0,tests:[{test:G.HJ}]},optimizeForOS:{defaults:{onSuccess:()=>{eL(void 0)},value:null==eT?void 0:eT.key},isRequired:!0,tests:[{test:G.HJ}]}};ey.inputSizeMessages.forEach((e,t)=>{e2["vd".concat(t,"Size")]={defaults:{displayMax:"".concat(ey.inputMaxes[t]," ").concat(ey.inputUnits[t]),displayMin:r,max:ey.maxes[t],min:z,onSuccess:()=>{ey.inputSizeMessages[t]=void 0},value:ey.sizes[t]},isRequired:!0,onFinishBatch:()=>{eD({...ey})},tests:[{onFailure:()=>{ey.inputSizeMessages[t]={text:"Non available.",type:"warning"}},test:G.X7},{onFailure:e=>{let{displayMax:n,displayMin:s}=e;ey.inputSizeMessages[t]={text:"Virtual disk ".concat(t," size is expected to be between ").concat(s," and ").concat(n,"."),type:"warning"}},test:G.SQ}]},e2["vd".concat(t,"StorageGroup")]={defaults:{onSuccess:()=>{ey.inputStorageGroupUUIDMessages[t]=void 0},value:ey.inputStorageGroupUUIDs[t]},isRequired:!0,onFinishBatch:()=>{eD({...ey})},tests:[{test:G.HJ}]}});let e5=function(){let{allAnvils:e=d,cpuCores:t=el,fileUUIDs:n=[eP,eG],includeAnvilUUIDs:s=E([eB]),includeFileUUIDs:r,includeStorageGroupUUIDs:i,inputMemoryUnit:l=eb,memory:o=ep,storageGroupUUIDMapToData:a=W,virtualDisks:u=ey}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{anvilUUIDs:c,fileUUIDs:p,maxCPUCores:x,maxMemory:h,maxVirtualDiskSizes:m,storageGroupUUIDs:g}=L(e,a,t,o,u.sizes,u.inputStorageGroupUUIDs,n,{includeAnvilUUIDs:s,includeFileUUIDs:r,includeStorageGroupUUIDs:i});eu(x),em(h);let v=[];u.maxes=m,u.maxes.forEach((e,t)=>{(0,f.Bh)(e,{fromUnit:"B",onSuccess:{string:(e,n)=>{u.inputMaxes[t]=e,v[t]="".concat(e," ").concat(n)}},toUnit:u.inputUnits[t]})}),eD({...u}),eq(c),eR(p),eW(g);let U="";return(0,f.Bh)(h,{fromUnit:"B",onSuccess:{string:(e,t)=>{eU(e),U="".concat(e," ").concat(t)}},toUnit:l}),{formattedMaxMemory:U,formattedMaxVDSizes:v,maxCPUCores:x,maxMemory:h,maxVirtualDiskSizes:m}},e9=(0,l.useCallback)(e5,[]),e3=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,...r]=t;return(0,G.BD)({tests:e2,...s},...r)},e6=function(){let{cmValue:e=A,cmUnit:t=eb}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ex(e);let{formattedMaxMemory:n,maxMemory:s}=e5({inputMemoryUnit:t,memory:e});e3({inputs:{memory:{displayMax:n,max:s,value:e}}})},e4=function(){let{value:e=eS,unit:t=eb}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==eS&&ej(e),t!==eb&&eI(t),(0,f.KY)(e,t,e=>e6({cmValue:e,cmUnit:t}),()=>e6({cmUnit:t}))},e7=e=>{eZ(e),e5({fileUUIDs:[e,eG]})},e8=e=>{ek(e),e5({fileUUIDs:[eP,e]})},te=e=>{let t=E([e]);eF(e),e5({includeAnvilUUIDs:t})},tt=(0,l.useMemo)(()=>({"anvil node":!!Object.keys(I).length,file:!!Object.keys(P).length,"storage group":!!Object.keys(W).length}),[I,P,W]);return(0,l.useEffect)(()=>{x.Z.get("/anvil",{params:{anvilUUIDs:"all",isForProvisionServer:!0}}).then(e=>{let{data:t}=e,{anvils:n,anvilSelectItems:s,anvilUUIDMapToData:r,fileSelectItems:i,fileUUIDMapToData:l,serverNameMapToData:o,storageGroupSelectItems:a,storageGroupUUIDMapToData:u}=N(t.anvils);b(n),y(r),O(l),V(o),_(u),Y(s),K(i),et(a);let c={allAnvils:n,storageGroupUUIDMapToData:u};if(1===s.length){let{0:{value:e}}=s;eF(e),c.includeAnvilUUIDs=[e]}if(1===i.length){let{0:{value:e}}=i;eZ(e),c.fileUUIDs=[e,""]}if(1===a.length){let{0:{value:e}}=a;eD(t=>{let n={...t};return n.inputStorageGroupUUIDs[0]=e,c.virtualDisks=n,n})}e9(c),$(Object.entries(t.oses).map(e=>{let[t,n]=e;return{key:t,label:n}})),eH(!0)}).catch(()=>{})},[e9]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.Z,{fullWidth:!0,maxWidth:"sm",open:t,PaperComponent:C.s_,PaperProps:{sx:{overflow:"visible"}},children:[(0,i.jsxs)(C.V9,{children:[(0,i.jsx)(k.z,{text:"Provision a Server"}),(0,i.jsx)(U.Z,{onClick:n,sx:{backgroundColor:p.hM,color:p.lD,"&:hover":{backgroundColor:p.hM}},children:(0,i.jsx)(c.Z,{})})]}),(0,i.jsx)(v.Z,{spacing:".6em",children:Object.entries(tt).map(e=>{let[t,n]=e;return!n&&(0,i.jsxs)(S.Z,{type:"warning",children:["No ",t," available yet. Try refreshing after the resource gets created."]})})}),e_?(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",maxHeight:"50vh",overflowY:"scroll",paddingTop:".6em","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,i.jsx)(j.Z,{id:"ps-server-name",label:"Server name",inputProps:{onChange:e=>{let{target:{value:t}}=e;es(t),e3({inputs:{serverName:{value:t}}})},value:en},inputLabelProps:{isNotifyRequired:0===en.length},messageBoxProps:er})}),(0,i.jsx)(h.Z,{id:"ps-cpu-cores",disableClearable:!0,extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=el<=0},getOptionLabel:e=>String(e),label:"CPU cores",messageBoxProps:ec,noOptionsText:"No available number of cores.",onChange:(e,t)=>{if(!t||t===el)return;eo(t);let{maxCPUCores:n}=e5({cpuCores:t});e3({inputs:{cpuCores:{max:n,value:t}}})},openOnFocus:!0,options:e1,renderOption:(e,t)=>(0,l.createElement)("li",{...e,key:"ps-cpu-cores-".concat(t)},t),value:el}),(0,i.jsx)(Z,{id:"ps-memory",label:"Memory",messageBoxProps:eg,inputWithLabelProps:{inputProps:{endAdornment:T("".concat(ef," ").concat(eb),{onButtonClick:()=>{ej(ef),e6({cmValue:eh})}}),onChange:e=>{let{target:{value:t}}=e;e4({value:t})},type:"number",value:eS},inputLabelProps:{isNotifyRequired:ep===A}},selectItems:B,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;e4({unit:t})},value:eb}}}),ey.stateIds.map((e,t)=>Q(ey,t,eD,ee,eV,e5,W,e3)),(0,i.jsx)(D.Z,{disableItem:e=>e===eG,hideItem:e=>!eE.includes(e),id:"ps-install-image",inputLabelProps:{isNotifyRequired:0===eP.length},label:"Install ISO",messageBoxProps:eC,selectItems:J,selectProps:{onChange:e=>{let{target:{value:t}}=e;e7(t)},onClearIndicatorClick:()=>e7(""),value:eP}}),(0,i.jsx)(D.Z,{disableItem:e=>e===eP,hideItem:e=>!eE.includes(e),id:"ps-driver-image",label:"Driver ISO",messageBoxProps:eA,selectItems:J,selectProps:{onChange:e=>{let{target:{value:t}}=e;e8(t)},onClearIndicatorClick:()=>e8(""),value:eG}}),(0,i.jsx)(D.Z,{disableItem:e=>!eQ.includes(e),id:"ps-anvil",inputLabelProps:{isNotifyRequired:0===eB.length},label:"Anvil node",messageBoxProps:ez,selectItems:H,selectProps:{onChange:e=>{let{target:{value:t}}=e;te(t)},onClearIndicatorClick:()=>te(""),renderValue:e=>{var t;let{anvilName:n="Unknown ".concat(e)}=null!==(t=I[e])&&void 0!==t?t:{};return n},value:eB}}),(0,i.jsx)(h.Z,{id:"ps-optimize-for-os",extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=null===eT},isOptionEqualToValue:(e,t)=>e.key===t.key,label:"Optimize for OS",messageBoxProps:eN,noOptionsText:"No matching OS",onChange:(e,t)=>{eO(t)},openOnFocus:!0,options:X,renderOption:(e,t)=>(0,l.createElement)("li",{...e,key:"ps-optimize-for-os-".concat(t.key),children:[t.label," (",t.key,")"]}),value:eT})]}):(0,i.jsx)(M.Z,{}),(0,i.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",marginTop:"1em","& > :not(:first-child)":{marginTop:"1em"}},children:[e$>0&&(0,i.jsx)(S.Z,{isAllowClose:!0,text:"Provision server job registered. You can provision another server, or exit; it won't affect the registered job."}),eK?(0,i.jsx)(M.Z,{mt:0}):(0,i.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"},children:(0,i.jsx)(g.Z,{disabled:!e3({isIgnoreOnCallbacks:!0}),onClick:()=>{eJ(!0)},sx:w,children:"Provision"})})]})]}),eY&&(0,i.jsx)(m.Z,{actionProceedText:"Provision",content:(0,i.jsxs)(a.ZP,{container:!0,columns:10,direction:"column",children:[(0,i.jsx)(a.ZP,{item:!0,xs:10,children:(0,i.jsxs)(k.Ac,{children:["Server ",(0,i.jsx)(k.Q0,{text:en})," will be created on anvil node"," ",(0,i.jsx)(k.Q0,{text:I[eB].anvilName})," ","with the following properties:"]})}),(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsx)(k.Ac,{text:"CPU"})}),(0,i.jsx)(a.ZP,{item:!0,xs:5,children:(0,i.jsxs)(k.Ac,{children:[(0,i.jsx)(k.Q0,{edge:"start",children:el})," ","core(s)"]})}),(0,i.jsx)(a.ZP,{item:!0,xs:3,children:(0,i.jsxs)(k.Ac,{children:[(0,i.jsx)(k.Q0,{edge:"start",children:ea})," ","core(s) available"]})})]}),(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsx)(k.Ac,{text:"Memory"})}),(0,i.jsx)(a.ZP,{item:!0,xs:5,children:(0,i.jsx)(k.Ac,{children:(0,i.jsxs)(k.Q0,{edge:"start",children:[eS," ",eb]})})}),(0,i.jsx)(a.ZP,{item:!0,xs:3,children:(0,i.jsxs)(k.Ac,{children:[(0,i.jsxs)(k.Q0,{edge:"start",children:[ef," ",eb]})," ","available"]})})]}),ey.stateIds.map((e,t)=>{let n=ey.inputMaxes[t],s=ey.inputSizes[t],r=ey.inputUnits[t],l=W[ey.inputStorageGroupUUIDs[t]].storageGroupName;return(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsxs)(k.Ac,{children:["Disk ",(0,i.jsx)(k.Q0,{text:t})]})}),(0,i.jsx)(a.ZP,{item:!0,xs:5,children:(0,i.jsxs)(k.Ac,{children:[(0,i.jsxs)(k.Q0,{edge:"start",children:[s," ",r]})," ","on ",(0,i.jsx)(k.Q0,{children:l})]})}),(0,i.jsx)(a.ZP,{item:!0,xs:3,children:(0,i.jsxs)(k.Ac,{children:[(0,i.jsxs)(k.Q0,{edge:"start",children:[n," ",r]})," ","available"]})})]},"ps-virtual-disk-".concat(e,"-summary"))}),(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsx)(k.Ac,{text:"Install ISO"})}),(0,i.jsx)(a.ZP,{item:!0,xs:8,children:(0,i.jsx)(k.Ac,{children:(0,i.jsx)(k.Q0,{edge:"start",children:P[eP].fileName})})})]}),(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsx)(k.Ac,{text:"Driver ISO"})}),(0,i.jsx)(a.ZP,{item:!0,xs:8,children:(0,i.jsx)(k.Ac,{children:P[eG]?(0,i.jsx)(k.Q0,{edge:"start",children:P[eG].fileName}):"none"})})]}),(0,i.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,i.jsx)(a.ZP,{item:!0,xs:2,children:(0,i.jsx)(k.Ac,{text:"Optimize for OS"})}),(0,i.jsx)(a.ZP,{item:!0,xs:8,children:(0,i.jsx)(k.Ac,{children:(0,i.jsx)(k.Q0,{edge:"start",children:"".concat(null==eT?void 0:eT.label)})})})]})]}),dialogProps:{open:eY},onCancelAppend:()=>{eJ(!1)},onProceedAppend:()=>{let e={serverName:en,cpuCores:el,memory:ep.toString(),virtualDisks:ey.stateIds.map((e,t)=>({storageSize:ey.sizes[t].toString(),storageGroupUUID:ey.inputStorageGroupUUIDs[t]})),installISOFileUUID:eP,driverISOFileUUID:eG,anvilUUID:eB,optimizeForOS:null==eT?void 0:eT.key};eX(!0),x.Z.post("/server",e).then(()=>{eX(!1),e0(e$+1)}),eJ(!1)},proceedButtonProps:{sx:w},titleText:"Provision ".concat(en,"?")})]})}},62800:function(e,t,n){n.d(t,{Bh:function(){return r},KY:function(){return i},MU:function(){return l}});var s=n(54490),r=function(e){let{fromUnit:t,onFailure:n,onSuccess:r,precision:i,toUnit:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,s.gO)(e,{fromUnit:t,precision:i,toUnit:l});if(o){let{value:e,unit:t}=o;try{var a,u,c;null==r||null===(a=r.bigint)||void 0===a||a.call(null,BigInt(e),t),null==r||null===(u=r.number)||void 0===u||u.call(null,parseFloat(e),t),null==r||null===(c=r.string)||void 0===c||c.call(null,e,t)}catch(s){null==n||n.call(null,s,e,t)}}else null==n||n.call(null)},i=(e,t,n,s)=>{r(e,{fromUnit:t,onFailure:s,onSuccess:{bigint:n},precision:0,toUnit:"B"})},l=e=>(0,s._d)(e,{toUnit:"ibyte"})},52675:function(e,t,n){n.d(t,{_:function(){return o},dg:function(){return a},qY:function(){return d},Gn:function(){return p},LT:function(){return U},BD:function(){return f},X7:function(){return S},HJ:function(){return l},SQ:function(){return u}});var s=n(85893),r=n(38189),i=n(59278),l=e=>{let{value:t}=e;return!!t&&String(t).length>0},o=function(e,t){let{isRequired:n,onFinishBatch:i,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:i,tests:[{test:l},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a((0,s.jsxs)(s.Fragment,{children:[e," should be a valid IPv4 address."]}),...n)},test:e=>{let{value:t}=e;return r.tf.test(t)}}]}},a=function(e,t){let{isRequired:n,onFinishBatch:i,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:i,tests:[{test:l},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a((0,s.jsxs)(s.Fragment,{children:[e," must be one or more valid IPv4 addresses separated by comma(s); without trailing comma."]}),...n)},test:e=>{let{value:t}=e;return r.ah.test(t)}}]}},u=e=>{let{max:t,min:n,value:s}=e;return!!s&&s>=n&&s<=t},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parseInt";return"number"==typeof e?e:Number[t](String(e))},d=function(e,t){let{isRequired:n,onFinishBatch:r,...i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,d=[];return l?d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];l((0,s.jsxs)(s.Fragment,{children:[e," must be a valid integer."]}),...n)},test:e=>{let{value:t}=e;return Number.isSafeInteger(c(t))}}):o&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o((0,s.jsxs)(s.Fragment,{children:[e," must be a valid floating-point number."]}),...n)},test:e=>{let{value:t}=e;return Number.isFinite(c(t,"parseFloat"))}}),a&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let{displayMax:i,displayMin:l}=n[0];a((0,s.jsxs)(s.Fragment,{children:[e," is expected to be between ",l," and ",i,"."]}),...n)},test:u}),{defaults:{...i,onSuccess:t},isRequired:n,onFinishBatch:r,tests:d}},p=function(e,t){let{isRequired:n,onFinishBatch:o,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;return{defaults:{...a,onSuccess:t},isRequired:n,onFinishBatch:o,tests:[{test:l},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];u((0,s.jsxs)(s.Fragment,{children:[e," cannot contain single-quote (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:"'"}),"), double-quote (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:'"'}),"), slash (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:"/"}),"), backslash (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:"\\"}),"), angle brackets (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:"<>"}),"), curly brackets (",(0,s.jsx)(i.Q0,{inheritColour:!0,text:"{}"}),")."]}),...n)},test:e=>{let{value:t}=e;return r.OU.test(t)}}]}};let x=()=>({}),h=e=>{let{onFailure:t,onSuccess:n}=e;return{cbFailure:t,cbSuccess:n}},m=e=>{let{isIgnoreOnCallbacks:t,onFinishBatch:n}=e;return t?{setTestCallbacks:x}:{cbFinishBatch:n,setTestCallbacks:h}},g=(e,t)=>null!=e?e:t,v=(e,t)=>e||t;var f=function(){let{excludeTestIds:e=[],excludeTestIdsRe:t,inputs:n={},isContinueOnFailure:s,isIgnoreOnCallbacks:r,isTestAll:i=0===Object.keys(n).length,tests:l={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[...e],a={},u=!0;return i&&Object.keys(l).forEach(e=>{a[e]={}}),a={...a,...n},t&&Object.keys(a).forEach(e=>{t.test(e)&&o.push(e)}),o.forEach(e=>{delete a[e]}),Object.keys(a).every(e=>{let{defaults:{compare:t=[],displayMax:n,displayMin:i,getCompare:o,getValue:c,isIgnoreOnCallbacks:d=r,max:p=0,min:x=0,onSuccess:h,value:f=null}={},isRequired:U=!1,onFinishBatch:S,optionalTests:j,tests:b}=l[e],{getCompare:I=o,getValue:y=c,isIgnoreOnCallbacks:D=d,max:P=p,min:Z=x,compare:C=g(null==I?void 0:I.call(null),t),value:M=g(null==y?void 0:y.call(null),f),displayMax:G=v(n,String(P)),displayMin:k=v(i,String(Z))}=a[e],{cbFinishBatch:A,setTestCallbacks:B}=m({isIgnoreOnCallbacks:D,onFinishBatch:S});if(!M&&!U)return null==A||A.call(null,!0,e),!0;let F=e=>{let{onFailure:t,onSuccess:n=h,test:s}=e,r={},i=s({append:r,compare:C,max:P,min:Z,value:M}),{cbFailure:l,cbSuccess:o}=B({onFailure:t,onSuccess:n});return i?null==o||o.call(null,{append:r}):(u=i,null==l||l.call(null,{append:r,compare:C,displayMax:G,displayMin:k,max:P,min:Z,value:M})),i};null==j||j.forEach(F);let z=b.every(F);return null==A||A.call(null,z,e),z||s}),u},U=function(e){let{excludeTestIds:t=[],...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let{excludeTestIds:s=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f({tests:e,excludeTestIds:[...t,...s],...n,...r})}},S=e=>{let{max:t,min:n}=e;return t>=n}}}]);