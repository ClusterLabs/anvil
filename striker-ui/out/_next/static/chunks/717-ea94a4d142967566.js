"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[717],{45486:function(e,n,t){var r=t(85893),i=t(89262),o=t(20869),l=t(10736),c=t(67294),s=t(77831);let a="Checkbox",d={invert:"".concat(a,"-invert"),thinPadding:"".concat(a,"-thin-padding")},h=(0,i.ZP)(o.Z)({color:s.s7,["&.".concat(l.Z.checked)]:{color:s.s7},["&.".concat(d.invert)]:{color:s.E5,["&.".concat(l.Z.checked)]:{color:s.E5}},["&.".concat(d.thinPadding)]:{padding:".2em"}});n.Z=e=>{let{className:n,invert:t,thinPadding:i,...o}=e,l=(0,c.useMemo)(()=>{let e=[];return n&&e.push(n),t&&e.push(d.invert),i&&e.push(d.thinPadding),e.join(" ")},[n,t,i]);return(0,r.jsx)(h,{className:l,...o})}},29535:function(e,n,t){var r=t(89262),i=t(59505),o=t(77831);let l=(0,r.ZP)(i.Z)({backgroundColor:o.d});n.Z=l},74717:function(e,n,t){t.d(n,{Z:function(){return eh}});var r=t(85893),i=t(19338),o=t(89262),l=t(32653),c=t(14440),s=t(34815),a=t(80594),d=t(67294),h=t(77831),u=t(55278),m=t(26076),x=t(8489),p=t(37969),g=t(54965),j=t(49520);let Z=[{text:"Anvil",image:"/pngs/anvil_icon_on.png",uri:"/manage-element"},{text:"Files",image:"/pngs/files_on.png",uri:"/file-manager"},{text:"Configure",image:"/pngs/configure_icon_on.png",uri:"/config"},{text:"Mail",image:"/pngs/email_on.png",uri:"/mail-config"},{text:"Help",image:"/pngs/help_icon_on.png",uri:"https://alteeve.com/w/Support"}],f={width:"40em",height:"40em"};var v=t(98484),w=t(29535),P=t(56903),b=t(97607),k=t(59278),A=t(6946);let C="AnvilDrawer",I={actionIcon:"".concat(C,"-actionIcon"),list:"".concat(C,"-list")},M=(0,o.ZP)(x.ZP)(()=>({["& .".concat(I.list)]:{width:"200px"},["& .".concat(I.actionIcon)]:{fontSize:"2.3em",color:h.of}}));var y=e=>{let{open:n,setOpen:t}=e,{getSessionUser:i}=(0,A.Z)(),o=i();return(0,r.jsx)(M,{BackdropProps:{invisible:!0},anchor:"left",open:n,onClose:()=>t(!n),children:(0,r.jsx)("div",{role:"presentation",children:(0,r.jsxs)(p.Z,{className:I.list,children:[(0,r.jsx)(g.ZP,{children:(0,r.jsx)(k.Ac,{children:o?(0,r.jsxs)(r.Fragment,{children:["Welcome, ",o.name]}):"Unregistered"})}),(0,r.jsx)(w.Z,{}),(0,r.jsx)(j.Z,{component:"a",href:"/index.html",children:(0,r.jsxs)(P.Z,{fullWidth:!0,row:!0,spacing:"2em",children:[(0,r.jsx)(u.Z,{className:I.actionIcon}),(0,r.jsx)(k.Ac,{children:"Dashboard"})]})}),Z.map(e=>(0,r.jsx)(j.Z,{component:"a",href:e.uri,children:(0,r.jsxs)(P.Z,{fullWidth:!0,row:!0,spacing:"2em",children:[(0,r.jsx)("img",{alt:e.text,src:e.image,...f}),(0,r.jsx)(k.Ac,{children:e.text})]})},"anvil-drawer-".concat(e.image))),(0,r.jsx)(j.Z,{onClick:()=>{v.Z.put("/auth/logout").then(()=>{window.location.replace("/login")}).catch(e=>{(0,b.Z)(e)})},children:(0,r.jsxs)(P.Z,{fullWidth:!0,row:!0,spacing:"2em",children:[(0,r.jsx)(m.Z,{className:I.actionIcon}),(0,r.jsx)(k.Ac,{children:"Logout"})]})})]})})})};let S="1.7em",E={iconProps:{},indicatorProps:{},indicatorTextProps:{},initialIndicatorValue:!1},W={small:"24%",medium:"50%"},B={small:".1rem",medium:"0rem"},N=(0,d.forwardRef)((e,n)=>{let{icon:t,iconProps:{sx:i,...o}=E.iconProps,indicatorProps:{sx:l,...s}=E.indicatorProps,indicatorTextProps:{sx:a,...u}=E.indicatorTextProps,initialIndicatorValue:m=E.initialIndicatorValue,sx:x}=e,[p,g]=(0,d.useState)(m),j=(0,d.useCallback)((e,n,t)=>(0,r.jsx)(P.Z,{row:!0,...s,sx:{backgroundColor:h.Ej,borderColor:h.E5,borderRadius:"50%",borderStyle:"solid",borderWidth:".1em",bottom:t,boxSizing:"content-box",height:0,justifyContent:"center",paddingBottom:n,position:"absolute",right:t,width:n,...l},children:e}),[l,s]),Z=(0,d.useCallback)(e=>(0,r.jsx)(k.Ac,{...u,sx:{fontWeight:"500",paddingTop:"100%",...a},children:Number(e)>9?"".concat(9,"+"):e}),[a,u]),f=(0,d.useMemo)(()=>{let e;if(p){let n;let t=W.small,r=B.small;Number.isFinite(p)&&(n=Z(p),t=W.medium,r=B.medium),e=j(n,t,r)}return e},[j,Z,p]);return(0,d.useImperativeHandle)(n,()=>({indicate:e=>g(e)}),[g]),(0,r.jsxs)(c.Z,{sx:{height:S,width:S,position:"relative",...x},children:[(0,d.createElement)(t,{...o,sx:{height:"100%",width:"100%",...i}}),f]})});N.defaultProps=E,N.displayName="IconWithIndicator";var O=t(65086),_=t(92230),F=t(34003),z=t(49360),R=t(63885),L=t(99514),H=t(38189),T=t(40743),D=t(65895),J=t(99576),K=t(95277),G=t(23930),U=t(48430),V=t(64503),Q=t(53541),X=t(41021);let Y=e=>{let n=new Date(1e3*e),t=n.getMonth()+1,r=n.getDate(),i=n.getHours(),o=n.getMinutes(),l=n.getSeconds();return"".concat((0,K.Z)(t),"-").concat((0,K.Z)(r),", ").concat((0,K.Z)(i),":").concat((0,K.Z)(o),":").concat((0,K.Z)(l))};var $=e=>{let{refreshInterval:n=1e4,uuid:t}=e,i=(0,z.Z)(),o=(0,R.Z)(i.breakpoints.up("sm")),[l,c]=(0,d.useState)({children:"Job ".concat(t," details unavailable"),type:"warning"}),{data:s,isLoading:a}=(0,U.Z)("".concat(_.Z,"/job/").concat(t),{onError:e=>{c({children:"Failed to get job ".concat(t," details. Error: ").concat(e),type:"error"})},refreshInterval:n}),h=(0,X.zO)(),u=(0,d.useMemo)(()=>s&&Object.entries(s.data).map(e=>{let[n,t]=e,i=H.JW.test(t.name)&&t.value.length>0?(0,r.jsx)(k.PJ,{children:t.value}):t.value;return(0,r.jsxs)(k.KI,{monospaced:!0,noWrap:!0,textOverflow:"initial",children:[t.name,"=",i]},"data-".concat(n))}),[s]),m=(0,d.useMemo)(()=>{if(!s)return;let e=Object.values(s.status).reduce((e,n)=>"".concat(e).concat(n.value,"\n\n"),"").trimEnd();return(0,r.jsx)(V.Z,{children:e})},[s]),x=(0,d.useMemo)(()=>s&&Y(s.started),[s]),p=(0,d.useMemo)(()=>s&&Y(s.modified),[s]),g=(0,d.useMemo)(()=>s&&(0,X.F6)(h-s.started),[s,h]),j=(0,d.useMemo)(()=>s&&(0,X.F6)(h-s.modified),[s,h]),Z=s?(0,r.jsx)(F.VZ,{children:(0,r.jsxs)(L.ZP,{columns:1,container:!0,rowGap:".6em",children:[(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsx)(k.Ac,{children:s.title})}),(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsx)(T.ko,{progressPercentage:s.progress})}),(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsx)(k.Ac,{children:s.description})}),(0,r.jsxs)(L.ZP,{columns:2,container:!0,item:!0,children:[(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.Ac,{children:"Host"})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.KI,{monospaced:!0,noWrap:!0,textAlign:"end",children:o?s.host.name:s.host.shortName})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.Ac,{children:"PID"})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.KI,{monospaced:!0,noWrap:!0,textAlign:"end",children:s.pid})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.Ac,{children:"Started"})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsxs)(k.Ac,{noWrap:!0,textAlign:"end",children:["~",g," ago",o&&" (".concat(x,")")]})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsx)(k.Ac,{children:"Last updated"})}),(0,r.jsx)(L.ZP,{item:!0,xs:1,children:(0,r.jsxs)(k.Ac,{noWrap:!0,textAlign:"end",children:["~",j," ago",o&&" (".concat(p,")")]})})]}),(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsx)(G.TZ,{header:(0,r.jsxs)(P.Z,{fullWidth:!0,growFirst:!0,row:!0,children:[(0,r.jsx)(k.Ac,{children:"Command"}),(0,r.jsx)(D.Z,{iconProps:{fontSize:"small"},mapPreset:"copy",onClick:()=>navigator.clipboard.writeText(s.command),size:"small"})]}),panelProps:{mb:0,mt:0},children:(0,r.jsx)(P.Z,{overflow:"scroll",paddingBottom:".8em",children:(0,r.jsx)(k.KI,{monospaced:!0,noWrap:!0,textOverflow:"initial",width:"max-content",children:s.command})})})}),(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsx)(G.TZ,{header:(0,r.jsxs)(P.Z,{fullWidth:!0,growFirst:!0,row:!0,children:[(0,r.jsx)(k.Ac,{children:"Data"}),(0,r.jsx)(D.Z,{iconProps:{fontSize:"small"},mapPreset:"copy",onClick:()=>{let e=Object.values(s.data).reduce((e,n)=>{let{name:t,value:r}=n;return"".concat(e).concat(t,"=").concat(r,"\n")},"");navigator.clipboard.writeText(e)},size:"small"})]}),panelProps:{mb:0,mt:0},children:(0,r.jsx)(P.Z,{overflow:"scroll",paddingBottom:".8em",spacing:".2em",sx:{"& > *":{width:"max-content"}},children:u})})}),(0,r.jsx)(L.ZP,{item:!0,width:"100%",children:(0,r.jsxs)(G.Lg,{mb:0,mt:0,children:[(0,r.jsx)(G.CH,{children:(0,r.jsx)(k.Ac,{children:"Status"})}),(0,r.jsx)(G.bc,{children:m})]})})]})}):(0,r.jsx)(J.Z,{...l});return a?(0,r.jsx)(Q.Z,{}):Z},q=t(83916),ee=t(34934);let en="PieProgress",et={complete:"".concat(en,"-complete"),inProgress:"".concat(en,"-in-progress")},er=(0,o.ZP)(ee.Z)({["&.".concat(et.complete)]:{color:h.Ej},["&.".concat(et.inProgress)]:{color:h.Wd}});var ei=e=>{let{value:n,...t}=e,i=(0,d.useMemo)(()=>n&&100===n?et.complete:et.inProgress,[n]);return(0,r.jsx)(er,{classes:{root:i},size:"1.6em",thickness:22,value:n,variant:"determinate",...t})};let eo="20em",el={getJobUrl:()=>"".concat(_.Z,"/job"),onFetchSuccessAppend:void 0,openInitially:!1,refreshInterval:1e4},ec=(0,d.forwardRef)((e,n)=>{let{getJobUrl:t=el.getJobUrl,onFetchSuccessAppend:i,openInitially:o=el.openInitially,refreshInterval:l=el.refreshInterval}=e,c=(0,d.useRef)(null),[s,a]=(0,d.useState)(),[h,u]=(0,d.useState)(o),[m,x]=(0,d.useState)(),p=(0,d.useMemo)(()=>(0,X.zO)(),[]),g=(0,X.zO)(),{data:j}=(0,U.Z)(t(p),{onError:()=>{},onSuccess:e=>{null==i||i.call(null,e)},refreshInterval:l});(0,d.useImperativeHandle)(n,()=>({setAnchor:e=>x(e),setOpen:e=>u(e)}),[]);let Z=(0,d.useMemo)(()=>(0,r.jsx)(P.Z,{children:(0,r.jsx)(q.Z,{allowItemButton:!0,listEmpty:"No running or recently completed jobs.",listItems:j,listProps:{sx:{maxHeight:eo,width:eo}},onItemClick:e=>{var n;let{uuid:t}=e;a(t),null===(n=c.current)||void 0===n||n.setOpen(!0)},renderListItem:(e,n)=>{let t;let{host:i,name:o,progress:l,started:c,title:s}=n,{shortName:a}=i;if(c){let{unit:e,value:n}=(0,X._J)(g-c);t="Started ~".concat(n).concat(e," ago on ").concat(a,".")}else t="Queued on ".concat(a);return(0,r.jsxs)(P.Z,{fullWidth:!0,spacing:".2em",children:[(0,r.jsxs)(P.Z,{row:!0,spacing:".5em",children:[(0,r.jsx)(ei,{sx:{flexShrink:0},value:l}),(0,r.jsx)(k.Ac,{sx:{overflowX:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s||o})]}),(0,r.jsx)(k.Ac,{children:t})]})},scroll:!0})}),[j,g]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(O.Z,{anchorEl:m,onClose:()=>{u(!1),x(void 0)},open:h,variant:"menu",children:Z}),(0,r.jsx)(F.Js,{header:"",ref:c,showClose:!0,wide:!0,children:s&&(0,r.jsx)($,{uuid:s})})]})});ec.defaultProps=el,ec.displayName="JobSummary";let es="Header",ea={input:"".concat(es,"-input"),barElement:"".concat(es,"-barElement"),iconBox:"".concat(es,"-iconBox"),searchBar:"".concat(es,"-searchBar"),icons:"".concat(es,"-icons")},ed=(0,o.ZP)(l.Z)(e=>{let{theme:n}=e;return{paddingTop:n.spacing(.5),paddingBottom:n.spacing(.5),paddingLeft:n.spacing(3),paddingRight:n.spacing(3),borderBottom:"solid 1px",borderBottomColor:h.hM,position:"static",["& .".concat(ea.input)]:{height:"2.8em",width:"30vw",backgroundColor:n.palette.secondary.main,borderRadius:h.n_},["& .".concat(ea.barElement)]:{padding:0},["& .".concat(ea.iconBox)]:{[n.breakpoints.down("sm")]:{display:"none"}},["& .".concat(ea.searchBar)]:{[n.breakpoints.down("sm")]:{flexGrow:1,paddingLeft:"15vw"}},["& .".concat(ea.icons)]:{paddingLeft:".1em",paddingRight:".1em"}}});var eh=()=>{let e=(0,d.useRef)({}),n=(0,d.useRef)({}),[t,o]=(0,d.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ed,{children:(0,r.jsxs)(c.Z,{display:"flex",justifyContent:"space-between",flexDirection:"row",children:[(0,r.jsx)(P.Z,{row:!0,children:(0,r.jsx)(s.Z,{onClick:()=>o(!t),children:(0,r.jsx)("img",{alt:"",src:"/pngs/logo.png",width:"160",height:"40"})})}),(0,r.jsx)(P.Z,{className:ea.iconBox,row:!0,spacing:0,children:(0,r.jsx)(c.Z,{children:(0,r.jsx)(a.Z,{onClick:e=>{var t,r;let{currentTarget:i}=e;null===(t=n.current.setAnchor)||void 0===t||t.call(null,i),null===(r=n.current.setOpen)||void 0===r||r.call(null,!0)},sx:{color:h.of,padding:"0 .1rem"},children:(0,r.jsx)(N,{icon:i.Z,ref:e})})})})]})}),(0,r.jsx)(y,{open:t,setOpen:o}),(0,r.jsx)(ec,{onFetchSuccessAppend:n=>{var t;null===(t=e.current.indicate)||void 0===t||t.call(null,Object.keys(n).length>0)},ref:n})]})}},83916:function(e,n,t){var r=t(85893),i=t(67294),o=t(31530),l=t(14905),c=t(31621),s=t(85725),a=t(14440),d=t(6621),h=t(54965),u=t(49520),m=t(37969),x=t(77831),p=t(45486),g=t(29535),j=t(56903),Z=t(65895),f=t(53541),v=t(59278);let w=(0,i.forwardRef)(e=>{let{allowCheckAll:n=!1,allowEdit:t=!1,allowItemButton:w=!1,disableDelete:P=!1,edit:b=!1,flexBoxProps:k,getListCheckboxProps:A,getListItemCheckboxProps:C,header:I,headerSpacing:M=".3em",insertHeader:y=!0,listEmpty:S,listItemIconMinWidth:E="56px",listItemKeyPrefix:W="list",listItemProps:{sx:B,...N}={},listItems:O,listProps:{sx:_,...F}={},loading:z,onAdd:R,onDelete:L,onEdit:H,onAllCheckboxChange:T,onItemCheckboxChange:D,onItemClick:J,renderListItem:K=e=>(0,r.jsx)(v.Ac,{children:e}),renderListItemCheckboxState:G,scroll:U=!1,allowAddItem:V=t,allowCheckItem:Q=t,allowDelete:X=t,allowEditItem:Y=t}=e,$=(0,i.useMemo)(()=>"calc(".concat(E," - ").concat(M,")"),[M,E]),q=(0,i.useMemo)(()=>V?(0,r.jsx)(Z.Z,{onClick:R,size:"small",children:(0,r.jsx)(o.Z,{})}):void 0,[V,R]),ee=(0,i.useMemo)(()=>b&&X?(0,r.jsx)(Z.Z,{disabled:P,onClick:L,size:"small",sx:{backgroundColor:x.hM,color:x.s7,"&:hover":{backgroundColor:"".concat(x.hM,"F0")}},children:(0,r.jsx)(l.Z,{})}):void 0,[P,X,b,L]),en=(0,i.useMemo)(()=>{if(Y)return(0,r.jsx)(Z.Z,{onClick:H,size:"small",children:b?(0,r.jsx)(c.Z,{sx:{color:x.Ej}}):(0,r.jsx)(s.Z,{})})},[Y,b,H]),et=(0,i.useMemo)(()=>{let e;return b&&Q&&(e=n?(0,r.jsx)(a.Z,{sx:{minWidth:$},children:(0,r.jsx)(p.Z,{edge:"start",onChange:T,...null==A?void 0:A.call(null)})}):(0,r.jsx)(g.Z,{sx:{minWidth:$}})),e},[$,A,n,Q,b,T]),er=(0,i.useMemo)(()=>{let e=typeof I;return y&&I?(0,r.jsxs)(j.Z,{row:!0,spacing:M,sx:{height:"2.4em"},children:[et,["boolean","string"].includes(e)?(0,r.jsxs)(r.Fragment,{children:["string"===e&&(0,r.jsx)(v.Ac,{children:I}),(0,r.jsx)(g.Z,{sx:{flexGrow:1}})]}):I,ee,en,q]}):I},[q,et,ee,en,I,M,y]),ei=(0,i.useMemo)(()=>"string"==typeof S?(0,r.jsx)(v.Ac,{align:"center",children:S}):S,[S]),eo=(0,i.useCallback)((e,n,t)=>b&&Q?(0,r.jsx)(d.Z,{sx:{minWidth:E},children:(0,r.jsx)(p.Z,{checked:n,edge:"start",onChange:function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];return null==D?void 0:D.call(null,e,...t)},...t})}):void 0,[Q,b,E,D]),el=(0,i.useMemo)(()=>{if(z)return(0,r.jsx)(f.Z,{});if(!O)return ei;let e=Object.entries(O);return e.length<=0?ei:e.map(e=>{let[n,t]=e,o=K(n,t);return(0,i.createElement)(h.ZP,{...N,key:"".concat(W,"-").concat(n),sx:{paddingLeft:0,paddingRight:0,...B},children:[eo(n,null==G?void 0:G.call(null,n,t),null==C?void 0:C.call(null,n,t)),w?(0,r.jsx)(u.Z,{onClick:function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];null==J||J.call(null,t,n,...r)},sx:{borderRadius:x.n_},children:o}):o]})})},[C,w,ei,eo,W,B,O,z,J,K,G,N]),ec=(0,i.useMemo)(()=>U?{maxHeight:"100%",overflowY:"scroll"}:void 0,[U]);return(0,r.jsxs)(j.Z,{spacing:0,...k,children:[er,(0,r.jsx)(m.Z,{...F,sx:{paddingBottom:0,paddingTop:0,...ec,..._},children:el})]})});w.displayName="List",n.Z=w},48430:function(e,n,t){var r=t(8100),i=t(54120);n.Z=function(e){let{refreshInterval:n=5e3,onSuccess:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:o,error:l}=(0,r.ZP)(e,i.Z,{refreshInterval:n,onSuccess:t});return{data:o,isLoading:!l&&!o,error:l}}},41021:function(e,n,t){t.d(n,{F6:function(){return l},Z$:function(){return i},_J:function(){return o},zO:function(){return r}});let r=e=>{let n=Date.now();return e||(n=Math.floor(n/1e3)),n},i=function(e,n){let{ms:t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r(t)-e<=n},o=e=>{var n;let t=e,[r,i,o]=[...[60,60].reduce((e,n)=>{let r=t%n;return e.push(r),t=(t-r)/n,e},[]),t],l=null!==(n=[{unit:"h",value:o},{unit:"m",value:i}].find(e=>{let{value:n}=e;return n}))&&void 0!==n?n:{unit:"s",value:r};return{h:o,m:i,s:r,...l}},l=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let{value:r,unit:i}=o(...n);return"".concat(r).concat(i)}}}]);