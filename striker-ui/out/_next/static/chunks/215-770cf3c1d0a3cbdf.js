"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[215],{48801:function(e,t,n){var l=n(85893),r=n(21640),s=n(93454),i=n(77527),o=n(4989),a=n(1142),u=n(58219),c=n(35562),d=n(90642),p=n(96245),h=n(82492),x=n.n(h),m=n(67294),g=n(39971),v=n(17512),f=n(23852);let b=e=>(0,l.jsx)(r.Z,{in:!0,children:(0,l.jsx)(s.Z,{...e})}),U=(0,i.ZP)("ul")({padding:0}),j=o.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:n,getGroupLabel:r,label:s,ListboxProps:i,messageBoxProps:o,renderGroup:h,renderInput:S,sx:Z,...I}=e,y=(0,m.useMemo)(()=>x()({paper:{sx:{backgroundColor:g.s7,["& .".concat(a.Z.groupLabel)]:{backgroundColor:g.s7}}}},t),[t]),D=(0,m.useMemo)(()=>x()({sx:{["& .".concat(a.Z.option)]:{'&[aria-selected="true"]':{backgroundColor:g.lD,["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}},["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}}}},i),[i]),P=(0,m.useMemo)(()=>h||r&&(e=>(0,l.jsxs)("li",{children:[(0,l.jsx)(j,{component:"div",className:a.Z.groupLabel,children:r(e.group)}),(0,l.jsx)(U,{className:a.Z.groupUl,children:e.children})]},e.key)),[r,h]),C=(0,m.useMemo)(()=>null!=S?S:e=>{let{fullWidth:t,InputProps:r,InputLabelProps:i,inputProps:o}=e,a={formControlProps:{fullWidth:t,ref:r.ref},inputLabelProps:i,inputProps:{className:r.className,endAdornment:r.endAdornment,inputProps:o,startAdornment:r.startAdornment},label:s};return null==n||n.call(null,a,e),(0,l.jsx)(f.Z,{...a})},[n,s,S]),k=(0,m.useMemo)(()=>x()({["& .".concat(u.Z.root," .").concat(a.Z.endAdornment)]:{right:"7px",["& .".concat(c.Z.root)]:{color:g.s7}}},Z),[Z]);return(0,l.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,l.jsx)(p.Z,{autoHighlight:!0,autoSelect:!0,PaperComponent:b,...I,ListboxProps:D,renderGroup:P,renderInput:C,slotProps:y,sx:k}),(0,l.jsx)(v.Z,{...o})]})}},47177:function(e,t,n){var l=n(85893),r=n(90642),s=n(67294),i=n(45036),o=n(5387),a=n(71487),u=n(57882);let c=(0,s.forwardRef)((e,t)=>{let{actionCancelText:n="Cancel",actionProceedText:c,children:d,closeOnProceed:p=!1,contentContainerProps:h,dialogProps:x,disableProceed:m,loading:g,loadingAction:v=!1,onActionAppend:f,onCancelAppend:b,onProceedAppend:U,openInitially:j,preActionArea:S,proceedButtonProps:Z,proceedColour:I="blue",scrollContent:y=!1,scrollBoxProps:D,showActionArea:P=!0,showCancel:C,showClose:k,titleText:M,wide:A,content:G=d}=e,F=(0,s.useRef)(null),w=(0,s.useMemo)(()=>(0,a.Z)(G,u.Ac),[G]),B=(0,s.useMemo)(()=>(0,s.createElement)(y?i.VZ:r.Z,D,w),[w,D,y]),z=(0,s.useMemo)(()=>P&&(0,l.jsx)(i.ux,{cancelProps:{children:n,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==b||b.call(null,...t)}},closeOnProceed:p,loading:v,proceedProps:{background:I,children:c,disabled:m,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==U||U.call(null,...t)},...Z},showCancel:C}),[n,c,p,m,v,f,b,U,Z,I,P,C]);return(0,s.useImperativeHandle)(t,()=>({setOpen:e=>{var t;return null===(t=F.current)||void 0===t?void 0:t.setOpen(e)}}),[]),(0,l.jsx)(i.Js,{dialogProps:x,header:M,loading:g,openInitially:j,ref:F,showClose:k,wide:A,children:(0,l.jsxs)(o.Z,{...h,children:[B,S,z]})})});c.displayName="ConfirmDialog",t.Z=c},9968:function(e,t,n){var l=n(85893),r=n(77527),s=n(90642),i=n(39971);let o="Decorator",a={ok:"".concat(o,"-ok"),warning:"".concat(o,"-warning"),error:"".concat(o,"-error"),off:"".concat(o,"-off")},u=(0,r.ZP)(s.Z)({borderRadius:i.n_,height:"100%",width:"1.4em",["&.".concat(a.ok)]:{backgroundColor:i.Ej},["&.".concat(a.warning)]:{backgroundColor:i.Wd},["&.".concat(a.error)]:{backgroundColor:i.hM},["&.".concat(a.off)]:{backgroundColor:i.s7}});t.Z=e=>{let{colour:t,...n}=e;return(0,l.jsx)(u,{...n,className:a[t]})}},37600:function(e,t,n){var l=n(85893),r=n(77527),s=n(33466),i=n(37906),o=n(67294),a=n(39971),u=n(18766);let c=(0,r.ZP)(s.Z)({["& .".concat(i.Z.paper)]:{backgroundColor:a.s7}});t.Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{children:s,getItemDisabled:i,items:a={},muiMenuProps:d,onItemClick:p,open:h,renderItem:x}=r,m=(0,o.useMemo)(()=>Object.entries(a),[a]),g=(0,o.useMemo)(()=>m.map(e=>{let[t,n]=e;return(0,l.jsx)(u.Z,{disabled:null==i?void 0:i.call(null,t,n),onClick:function(){for(var e=arguments.length,l=Array(e),r=0;r<e;r++)l[r]=arguments[r];return null==p?void 0:p.call(null,t,n,...l)},children:null==x?void 0:x.call(null,t,n)},t)}),[i,p,m,x]);return(0,l.jsx)(c,{open:h,...d,children:s||g})}},18766:function(e,t,n){var l=n(77527),r=n(87920),s=n(63907),i=n(39971);let o=(0,l.ZP)(r.Z)({backgroundColor:i.s7,paddingRight:"3em",["&.".concat(s.Z.selected)]:{backgroundColor:i.lD,fontWeight:400,["&.".concat(s.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}},["&.".concat(s.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}});t.Z=o},52257:function(e,t,n){var l=n(85893),r=n(90642),s=n(13435),i=n(58219),o=n(39971),a=n(17512),u=n(23852),c=n(37628);let d=e=>{let{id:t,label:n,inputWithLabelProps:d,messageBoxProps:p,onChange:h,selectItems:x,selectWithLabelProps:m,value:g}=e;return(0,l.jsxs)(r.Z,{children:[(0,l.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row","& > :first-child":{flexGrow:1},"& > :not(:last-child)":{marginRight:".5em"},["&:hover\n          .".concat(s.Z.root,"\n          .").concat(i.Z.root,"\n          .").concat(i.Z.notchedOutline)]:{borderColor:o.s7}},children:[(0,l.jsx)(u.Z,{id:t,label:n,onChange:h,value:g,...d}),(0,l.jsx)(c.Z,{formControlProps:{fullWidth:!1,sx:{minWidth:"min-content"}},id:"".concat(t,"-nested-select"),selectItems:x,...m})]}),(0,l.jsx)(a.Z,{...p})]})};d.defaultProps={inputWithLabelProps:void 0,messageBoxProps:void 0,selectWithLabelProps:void 0},t.Z=d},64860:function(e,t,n){let l,r;var s=n(85893),i=n(67294),o=n(90642),a=n(8506),u=n(32187),c=n(25934),d=n(4615),p=n(66389),h=n(48801),x=n(46194),m=n(5387),g=n(46283),v=n(11100),f=n(45328),b=n(29873),U=n(23852),j=n(52257),S=n(65375),Z=n(37628),I=n(90209),y=n(18573),D=n(72414),P=n(57882),C=n(40657),k=n(5499);let M=BigInt(0),A=BigInt(65536),G=BigInt(104857600),F=(e,t)=>{let{onButtonClick:n}=t;return(0,s.jsx)(x.Z,{disabled:void 0===n,onClick:n,sx:{minWidth:"unset",whiteSpace:"nowrap"},children:"Max: ".concat(e)})},w=function(){let{endAdornment:e,mainLabel:t,subLabel:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.jsxs)(o.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"row",width:"100%","& > :first-child":{flexGrow:1}},children:[(0,s.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:[t&&(0,s.jsx)(P.Ac,{inverted:!0,text:t}),n&&(0,s.jsx)(P.Ac,{inverted:!0,text:n})]}),e]})},B=e=>{let t={},n=e.reduce((e,n)=>{let{anvilUUID:l,anvilName:r,anvilTotalMemory:i,anvilTotalAllocatedMemory:a,anvilTotalAvailableMemory:u,hosts:c,servers:d,storageGroups:p,files:h}=n,{anvilStorageGroups:x,anvilStorageGroupUUIDs:m}=p.reduce((t,n)=>{let i={...n,anvilUUID:l,anvilName:r,storageGroupSize:BigInt(n.storageGroupSize),storageGroupFree:BigInt(n.storageGroupFree),humanizedStorageGroupFree:""};return(0,g.Bh)(n.storageGroupFree,{fromUnit:"B",onSuccess:{string:(e,t)=>{i.humanizedStorageGroupFree="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),t.anvilStorageGroupUUIDs.push(n.storageGroupUUID),t.anvilStorageGroups.push(i),e.storageGroups.push(i),e.storageGroupSelectItems.push({displayValue:w({endAdornment:(0,s.jsx)(P.Ac,{inverted:!0,text:"~".concat(i.humanizedStorageGroupFree," free")}),mainLabel:n.storageGroupName,subLabel:r}),value:n.storageGroupUUID}),e.storageGroupUUIDMapToData[n.storageGroupUUID]=i,t},{anvilStorageGroups:[],anvilStorageGroupUUIDs:[]}),v=[];h.forEach(e=>{let{fileUUID:n}=e;v.push(n),t[n]=e});let f={...n,anvilTotalMemory:BigInt(i),anvilTotalAllocatedMemory:BigInt(a),anvilTotalAvailableMemory:BigInt(u),humanizedAnvilTotalAvailableMemory:"",hosts:c.map(e=>({...e,hostMemory:BigInt(e.hostMemory)})),servers:d.map(t=>{let{serverMemory:n,serverName:l,...r}=t,s={...r,serverMemory:BigInt(n),serverName:l};return e.serverNameMapToData[l]=s,s}),storageGroupUUIDs:m,storageGroups:x,fileUUIDs:v};return(0,g.Bh)(u,{fromUnit:"B",onSuccess:{string:(e,t)=>{f.humanizedAnvilTotalAvailableMemory="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),e.anvils.push(f),e.anvilSelectItems.push({displayValue:w({endAdornment:(0,s.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",width:"8rem"},children:[(0,s.jsx)(P.Ac,{inverted:!0,text:"CPU: ".concat(f.anvilTotalCPUCores," cores")}),(0,s.jsx)(P.Ac,{inverted:!0,text:"Memory: ~".concat(f.humanizedAnvilTotalAvailableMemory)})]}),mainLabel:f.anvilName,subLabel:f.anvilDescription}),value:l}),e.anvilUUIDMapToData[l]=f,e},{anvils:[],anvilSelectItems:[],anvilUUIDMapToData:{},files:[],fileSelectItems:[],fileUUIDMapToData:{},serverNameMapToData:{},storageGroups:[],storageGroupSelectItems:[],storageGroupUUIDMapToData:{}});return Object.values(t).forEach(e=>{n.files.push(e),n.fileSelectItems.push({displayValue:e.fileName,value:e.fileUUID}),n.fileUUIDMapToData[e.fileUUID]=e}),n},z=function(e,t,n,l,r,s,i){let{includeAnvilUUIDs:o=[],includeFileUUIDs:a=[],includeStorageGroupUUIDs:u=[]}=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=()=>!0,d=()=>!0,p=()=>!0;o.length>0&&(c=e=>o.includes(e)),a.length>0&&(d=e=>a.includes(e)),u.length>0&&(p=e=>u.includes(e));let h={},x=s.reduce((e,t,n)=>{var l;let s=null!==(l=r[n])&&void 0!==l?l:M;return e.all+=s,""===t||(void 0===e[t]&&(e[t]=M),e[t]+=s),e},{all:M}),m=e.reduce((e,o)=>{let{anvilUUID:a}=o;if(c(a)){let{anvilTotalCPUCores:u,anvilTotalAvailableMemory:c,files:m,fileUUIDs:g,storageGroups:v}=o,f=[],b=M,U=M;v.forEach(e=>{let{storageGroupUUID:t,storageGroupFree:n}=e;p(t)&&(f.push(t),U+=n,n>b&&(b=n))}),[()=>v.length>0,()=>n<=u,()=>l<=c,()=>s.every((e,n)=>{var l;let s=null!==(l=r[n])&&void 0!==l?l:M,i=!0,o=s<=b;return""!==e&&(i=f.includes(e),o=s<=t[e].storageGroupFree),i&&o}),()=>Object.entries(x).every(e=>{let[n,l]=e;return"all"===n?l<=U:l<=t[n].storageGroupFree}),()=>i.every(e=>""===e||g.includes(e))].every(e=>e())&&(e.anvils.push(o),e.anvilUUIDs.push(a),e.maxCPUCores=Math.max(u,e.maxCPUCores),c>e.maxMemory&&(e.maxMemory=c),m.forEach(e=>{let{fileUUID:t}=e;d(t)&&(h[t]=!0)}),e.storageGroupUUIDs.push(...f),e.maxVirtualDiskSizes.fill(b))}return e},{anvils:[],anvilUUIDs:[],fileUUIDs:[],maxCPUCores:0,maxMemory:M,maxVirtualDiskSizes:s.map(()=>M),storageGroupUUIDs:[]});return m.fileUUIDs=Object.keys(h),s.forEach((e,n)=>{""!==e&&(m.maxVirtualDiskSizes[n]=t[e].storageGroupFree)}),m},O=(e,t,n,l,r,i,a,u)=>{let c=function(n){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return e[n][l]},p=function(l,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e[l][s]=r,n({...e})},h=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;p("sizes",n);let{formattedMaxVDSizes:l,maxVirtualDiskSizes:r}=i({virtualDisks:e});u({inputs:{["vd".concat(t,"Size")]:{displayMax:"".concat(l[t]),max:r[t],value:n}}})},x=e=>{let{value:t=c("inputSizes"),unit:n=c("inputUnits")}=e;t!==c("inputSizes")&&p("inputSizes",t),n!==c("inputUnits")&&p("inputUnits",n),(0,g.KY)(t,n,e=>h(e),()=>h())},m=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c("inputStorageGroupUUIDs");t!==c("inputStorageGroupUUIDs")&&p("inputStorageGroupUUIDs",t),i({virtualDisks:e})};return(0,s.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,s.jsx)(j.Z,{id:"ps-virtual-disk-size-".concat(t),label:"Disk size",messageBoxProps:c("inputSizeMessages"),inputWithLabelProps:{inputProps:{endAdornment:F("".concat(c("inputMaxes")," ").concat(c("inputUnits")),{onButtonClick:()=>{p("inputSizes",c("inputMaxes")),h(c("maxes"))}}),onChange:e=>{let{target:{value:t}}=e;x({value:t})},type:"number",value:c("inputSizes")},inputLabelProps:{isNotifyRequired:c("sizes")===M}},selectItems:d.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;x({unit:t})},value:c("inputUnits")}}}),(0,s.jsx)(Z.Z,{id:"ps-storage-group-".concat(t),label:"Storage group",disableItem:e=>!(r.includes(e)&&c("sizes")<=a[e].storageGroupFree),inputLabelProps:{isNotifyRequired:0===c("inputStorageGroupUUIDs").length},messageBoxProps:c("inputStorageGroupUUIDMessages"),selectItems:l,selectProps:{onChange:e=>{let{target:{value:t}}=e;m(t)},onClearIndicatorClick:()=>m(""),renderValue:e=>{var t;let{anvilName:n="?",storageGroupName:l="Unknown (".concat(e,")")}=null!==(t=a[e])&&void 0!==t?t:{};return"".concat(l," (").concat(n,")")},value:c("inputStorageGroupUUIDs")}})]},"ps-virtual-disk-".concat(c("stateIds")))},N=function(){let{existingVirtualDisks:e={stateIds:[],inputMaxes:[],inputSizeMessages:[],inputSizes:[],inputStorageGroupUUIDMessages:[],inputStorageGroupUUIDs:[],inputUnits:[],maxes:[],sizes:[]},stateId:t=(0,c.Z)(),inputMax:n="0",inputSize:l="",inputSizeMessage:r,inputStorageGroupUUID:s="",inputStorageGroupUUIDMessage:i,inputUnit:o="GiB",max:a=M,setVirtualDisks:u,size:d=M}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stateIds:p,inputMaxes:h,inputSizeMessages:x,inputSizes:m,inputStorageGroupUUIDMessages:g,inputStorageGroupUUIDs:v,inputUnits:f,maxes:b,sizes:U}=e;return p.push(t),h.push(n),x.push(r),m.push(l),g.push(i),v.push(s),f.push(o),b.push(a),U.push(d),null==u||u.call(null,{...e}),e},T=e=>e.filter(e=>""!==e),R=e=>({fromUnit:"B",onSuccess:{string:e},precision:0,toUnit:"ibyte"});(0,g.Bh)(A,R((e,t)=>{l="".concat(e," ").concat(t)})),(0,g.Bh)(G,R((e,t)=>{r="".concat(e," ").concat(t)}));let Q=e=>{let{dialogProps:{open:t},onClose:n}=e,[c,w]=(0,i.useState)([]),[R,Q]=(0,i.useState)({}),[q,L]=(0,i.useState)({}),[E,V]=(0,i.useState)({}),[W,_]=(0,i.useState)({}),[H,J]=(0,i.useState)([]),[Y,K]=(0,i.useState)([]),[X,$]=(0,i.useState)([]),[ee,et]=(0,i.useState)([]),[en,el]=(0,i.useState)(""),[er,es]=(0,i.useState)(),[ei,eo]=(0,i.useState)(2),[ea,eu]=(0,i.useState)(0),[ec,ed]=(0,i.useState)(),[ep,eh]=(0,i.useState)(M),[ex,em]=(0,i.useState)(M),[eg,ev]=(0,i.useState)(),[ef,eb]=(0,i.useState)("0"),[eU,ej]=(0,i.useState)(""),[eS,eZ]=(0,i.useState)("GiB"),[eI,ey]=(0,i.useState)(N()),[eD,eP]=(0,i.useState)(""),[eC,ek]=(0,i.useState)(),[eM,eA]=(0,i.useState)(""),[eG]=(0,i.useState)(),[eF,ew]=(0,i.useState)(""),[eB,ez]=(0,i.useState)(),[eO,eN]=(0,i.useState)(null),[eT,eR]=(0,i.useState)(),[eQ,eq]=(0,i.useState)([]),[eL,eE]=(0,i.useState)([]),[eV,eW]=(0,i.useState)([]),[e_,eH]=(0,i.useState)(!1),{confirmDialog:eJ,finishConfirm:eY,setConfirmDialogLoading:eK,setConfirmDialogOpen:eX,setConfirmDialogProps:e$}=(0,C.Z)({initial:{wide:!0}}),e0=(0,i.useMemo)(()=>{let e=[];for(let t=1;t<=ea;t+=1)e.push(t);return e},[ea]),e1={serverName:{defaults:{onSuccess:()=>{es(void 0)},value:en},isRequired:!0,tests:[{onFailure:()=>{es({text:"The server name length must be 1 to 16 characters.",type:"warning"})},test:e=>{let{value:t}=e,{length:n}=t;return n>=1&&n<=16}},{onFailure:()=>{es({text:"The server name is expected to only contain alphanumeric, hyphen, or underscore characters.",type:"warning"})},test:e=>{let{value:t}=e;return/^[a-zA-Z0-9_-]+$/.test(t)}},{onFailure:()=>{es({text:"This server name already exists, please choose another name.",type:"warning"})},test:e=>{let{value:t}=e;return void 0===E[t]}}]},cpuCores:{defaults:{max:ea,min:1,onSuccess:()=>{ed(void 0)},value:ei},isRequired:!0,tests:[{onFailure:()=>{ed({text:"Non available.",type:"warning"})},test:D.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ed({text:"The number of CPU cores is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:D.SQ}]},memory:{defaults:{displayMax:"".concat(ef," ").concat(eS),displayMin:l,max:ex,min:A,onSuccess:()=>{ev(void 0)},value:ep},isRequired:!0,tests:[{onFailure:()=>{ev({text:"Non available.",type:"warning"})},test:D.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ev({text:"Memory is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:D.SQ}]},installISO:{defaults:{onSuccess:()=>{ek(void 0)},value:eD},isRequired:!0,tests:[{test:D.HJ}]},anvil:{defaults:{onSuccess:()=>{ez(void 0)},value:eF},isRequired:!0,tests:[{test:D.HJ}]},optimizeForOS:{defaults:{onSuccess:()=>{eR(void 0)},value:null==eO?void 0:eO.key},isRequired:!0,tests:[{test:D.HJ}]}};eI.inputSizeMessages.forEach((e,t)=>{e1["vd".concat(t,"Size")]={defaults:{displayMax:"".concat(eI.inputMaxes[t]," ").concat(eI.inputUnits[t]),displayMin:r,max:eI.maxes[t],min:G,onSuccess:()=>{eI.inputSizeMessages[t]=void 0},value:eI.sizes[t]},isRequired:!0,onFinishBatch:()=>{ey({...eI})},tests:[{onFailure:()=>{eI.inputSizeMessages[t]={text:"Non available.",type:"warning"}},test:D.X7},{onFailure:e=>{let{displayMax:n,displayMin:l}=e;eI.inputSizeMessages[t]={text:"Virtual disk ".concat(t," size is expected to be between ").concat(l," and ").concat(n,"."),type:"warning"}},test:D.SQ}]},e1["vd".concat(t,"StorageGroup")]={defaults:{onSuccess:()=>{eI.inputStorageGroupUUIDMessages[t]=void 0},value:eI.inputStorageGroupUUIDs[t]},isRequired:!0,onFinishBatch:()=>{ey({...eI})},tests:[{test:D.HJ}]}});let e7=function(){let{allAnvils:e=c,cpuCores:t=ei,fileUUIDs:n=[eD,eM],includeAnvilUUIDs:l=T([eF]),includeFileUUIDs:r,includeStorageGroupUUIDs:s,inputMemoryUnit:i=eS,memory:o=ep,storageGroupUUIDMapToData:a=W,virtualDisks:u=eI}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{anvilUUIDs:d,fileUUIDs:p,maxCPUCores:h,maxMemory:x,maxVirtualDiskSizes:m,storageGroupUUIDs:v}=z(e,a,t,o,u.sizes,u.inputStorageGroupUUIDs,n,{includeAnvilUUIDs:l,includeFileUUIDs:r,includeStorageGroupUUIDs:s});eu(h),em(x);let f=[];u.maxes=m,u.maxes.forEach((e,t)=>{(0,g.Bh)(e,{fromUnit:"B",onSuccess:{string:(e,n)=>{u.inputMaxes[t]=e,f[t]="".concat(e," ").concat(n)}},toUnit:u.inputUnits[t]})}),ey({...u}),eq(d),eE(p),eW(v);let b="";return(0,g.Bh)(x,{fromUnit:"B",onSuccess:{string:(e,t)=>{eb(e),b="".concat(e," ").concat(t)}},toUnit:i}),{formattedMaxMemory:b,formattedMaxVDSizes:f,maxCPUCores:h,maxMemory:x,maxVirtualDiskSizes:m}},e2=(0,i.useCallback)(e7,[]),e3=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[l,...r]=t;return(0,D.BD)({tests:e1,...l},...r)},e8=function(){let{cmValue:e=M,cmUnit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eh(e);let{formattedMaxMemory:n,maxMemory:l}=e7({inputMemoryUnit:t,memory:e});e3({inputs:{memory:{displayMax:n,max:l,value:e}}})},e9=function(){let{value:e=eU,unit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==eU&&ej(e),t!==eS&&eZ(t),(0,g.KY)(e,t,e=>e8({cmValue:e,cmUnit:t}),()=>e8({cmUnit:t}))},e5=e=>{eP(e),e7({fileUUIDs:[e,eM]})},e4=e=>{eA(e),e7({fileUUIDs:[eD,e]})},e6=e=>{let t=T([e]);ew(e),e7({includeAnvilUUIDs:t})},te=()=>(0,s.jsxs)(a.ZP,{container:!0,columns:10,direction:"column",children:[(0,s.jsx)(a.ZP,{item:!0,xs:10,children:(0,s.jsxs)(P.Ac,{children:["Server ",(0,s.jsx)(P.Q0,{text:en})," will be created on anvil node"," ",(0,s.jsx)(P.Q0,{text:R[eF].anvilName})," ","with the following properties:"]})}),(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsx)(P.Ac,{text:"CPU"})}),(0,s.jsx)(a.ZP,{item:!0,xs:5,children:(0,s.jsxs)(P.Ac,{children:[(0,s.jsx)(P.Q0,{edge:"start",children:ei})," ","core(s)"]})}),(0,s.jsx)(a.ZP,{item:!0,xs:3,children:(0,s.jsxs)(P.Ac,{children:[(0,s.jsx)(P.Q0,{edge:"start",children:ea})," ","core(s) available"]})})]}),(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsx)(P.Ac,{text:"Memory"})}),(0,s.jsx)(a.ZP,{item:!0,xs:5,children:(0,s.jsx)(P.Ac,{children:(0,s.jsxs)(P.Q0,{edge:"start",children:[eU," ",eS]})})}),(0,s.jsx)(a.ZP,{item:!0,xs:3,children:(0,s.jsxs)(P.Ac,{children:[(0,s.jsxs)(P.Q0,{edge:"start",children:[ef," ",eS]})," ","available"]})})]}),eI.stateIds.map((e,t)=>{let n=eI.inputMaxes[t],l=eI.inputSizes[t],r=eI.inputUnits[t],i=W[eI.inputStorageGroupUUIDs[t]].storageGroupName;return(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsxs)(P.Ac,{children:["Disk ",(0,s.jsx)(P.Q0,{text:t})]})}),(0,s.jsx)(a.ZP,{item:!0,xs:5,children:(0,s.jsxs)(P.Ac,{children:[(0,s.jsxs)(P.Q0,{edge:"start",children:[l," ",r]})," ","on ",(0,s.jsx)(P.Q0,{children:i})]})}),(0,s.jsx)(a.ZP,{item:!0,xs:3,children:(0,s.jsxs)(P.Ac,{children:[(0,s.jsxs)(P.Q0,{edge:"start",children:[n," ",r]})," ","available"]})})]},"ps-virtual-disk-".concat(e,"-summary"))}),(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsx)(P.Ac,{text:"Install ISO"})}),(0,s.jsx)(a.ZP,{item:!0,xs:8,children:(0,s.jsx)(P.Ac,{children:(0,s.jsx)(P.Q0,{edge:"start",children:q[eD].fileName})})})]}),(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsx)(P.Ac,{text:"Driver ISO"})}),(0,s.jsx)(a.ZP,{item:!0,xs:8,children:(0,s.jsx)(P.Ac,{children:q[eM]?(0,s.jsx)(P.Q0,{edge:"start",children:q[eM].fileName}):"none"})})]}),(0,s.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,s.jsx)(a.ZP,{item:!0,xs:2,children:(0,s.jsx)(P.Ac,{text:"Optimize for OS"})}),(0,s.jsx)(a.ZP,{item:!0,xs:8,children:(0,s.jsx)(P.Ac,{children:(0,s.jsx)(P.Q0,{edge:"start",children:"".concat(null==eO?void 0:eO.label)})})})]})]}),tt=(0,i.useMemo)(()=>({"anvil node":!!Object.keys(R).length,file:!!Object.keys(q).length,"storage group":!!Object.keys(W).length}),[R,q,W]),{validating:tn}=(0,k.Z)("/anvil?anvilUUIDs=all&isForProvisionServer=1",{onSuccess:e=>{let{anvils:t,anvilSelectItems:n,anvilUUIDMapToData:l,fileSelectItems:r,fileUUIDMapToData:s,serverNameMapToData:i,storageGroupSelectItems:o,storageGroupUUIDMapToData:a}=B(e.anvils);w(t),Q(l),L(s),V(i),_(a),J(n),K(r),et(o);let u={allAnvils:t,storageGroupUUIDMapToData:a};if(1===n.length){let{0:{value:e}}=n;ew(e),u.includeAnvilUUIDs=[e]}if(1===r.length){let{0:{value:e}}=r;eP(e),u.fileUUIDs=[e,""]}if(1===o.length){let{0:{value:e}}=o;ey(t=>{let n={...t};return n.inputStorageGroupUUIDs[0]=e,u.virtualDisks=n,n})}e2(u),$(Object.entries(e.oses).map(e=>{let[t,n]=e;return{key:t,label:n}})),eH(!0)},refreshInterval:5e3});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u.Z,{fullWidth:!0,maxWidth:"sm",open:t,PaperComponent:S.s_,PaperProps:{sx:{overflow:"visible"}},children:[(0,s.jsxs)(S.V9,{children:[(0,s.jsx)(P.z,{children:"Provision a server"}),(0,s.jsx)(y.Z,{syncing:tn}),(0,s.jsx)(f.Z,{mapPreset:"close",onClick:n,size:"small"})]}),(0,s.jsx)(m.Z,{spacing:".6em",children:Object.entries(tt).map(e=>{let[t,n]=e;return!n&&(0,s.jsxs)(b.Z,{type:"warning",children:["No ",t," available yet. It will appear shortly after creation."]})})}),e_?(0,s.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",maxHeight:"50vh",overflowY:"scroll",paddingTop:".6em","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,s.jsx)(U.Z,{id:"ps-server-name",label:"Server name",inputProps:{onChange:e=>{let{target:{value:t}}=e;el(t),e3({inputs:{serverName:{value:t}}})},value:en},inputLabelProps:{isNotifyRequired:0===en.length},messageBoxProps:er}),(0,s.jsx)(h.Z,{id:"ps-cpu-cores",disableClearable:!0,extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=ei<=0},getOptionLabel:e=>String(e),label:"CPU cores",messageBoxProps:ec,noOptionsText:"No available number of cores.",onChange:(e,t)=>{if(!t||t===ei)return;eo(t);let{maxCPUCores:n}=e7({cpuCores:t});e3({inputs:{cpuCores:{max:n,value:t}}})},openOnFocus:!0,options:e0,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-cpu-cores-".concat(t)},t),value:ei}),(0,s.jsx)(j.Z,{id:"ps-memory",label:"Memory",messageBoxProps:eg,inputWithLabelProps:{inputProps:{endAdornment:F("".concat(ef," ").concat(eS),{onButtonClick:()=>{ej(ef),e8({cmValue:ex})}}),onChange:e=>{let{target:{value:t}}=e;e9({value:t})},type:"number",value:eU},inputLabelProps:{isNotifyRequired:ep===M}},selectItems:d.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;e9({unit:t})},value:eS}}}),eI.stateIds.map((e,t)=>O(eI,t,ey,ee,eV,e7,W,e3)),(0,s.jsx)(Z.Z,{disableItem:e=>e===eM,hideItem:e=>!eL.includes(e),id:"ps-install-image",inputLabelProps:{isNotifyRequired:0===eD.length},label:"Install ISO",messageBoxProps:eC,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e5(t)},onClearIndicatorClick:()=>e5(""),value:eD}}),(0,s.jsx)(Z.Z,{disableItem:e=>e===eD,hideItem:e=>!eL.includes(e),id:"ps-driver-image",label:"Driver ISO",messageBoxProps:eG,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e4(t)},onClearIndicatorClick:()=>e4(""),value:eM}}),(0,s.jsx)(Z.Z,{disableItem:e=>!eQ.includes(e),id:"ps-anvil",inputLabelProps:{isNotifyRequired:0===eF.length},label:"Anvil node",messageBoxProps:eB,selectItems:H,selectProps:{onChange:e=>{let{target:{value:t}}=e;e6(t)},onClearIndicatorClick:()=>e6(""),renderValue:e=>{var t;let{anvilName:n="Unknown ".concat(e)}=null!==(t=R[e])&&void 0!==t?t:{};return n},value:eF}}),(0,s.jsx)(h.Z,{id:"ps-optimize-for-os",extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=null===eO},isOptionEqualToValue:(e,t)=>e.key===t.key,label:"Optimize for OS",messageBoxProps:eT,noOptionsText:"No matching OS",onChange:(e,t)=>{eN(t)},openOnFocus:!0,options:X,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-optimize-for-os-".concat(t.key),children:[t.label," (",t.key,")"]}),value:eO})]}):(0,s.jsx)(I.Z,{}),(0,s.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column",marginTop:"1em","& > :not(:first-child)":{marginTop:"1em"}},children:(0,s.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"},children:(0,s.jsx)(x.Z,{background:"blue",disabled:!e3({isIgnoreOnCallbacks:!0}),onClick:()=>{e$({actionProceedText:"Provision",content:te(),onProceedAppend:()=>{eK(!0);let e={serverName:en,cpuCores:ei,memory:ep.toString(),virtualDisks:eI.stateIds.map((e,t)=>({storageSize:eI.sizes[t].toString(),storageGroupUUID:eI.inputStorageGroupUUIDs[t]})),installISOFileUUID:eD,driverISOFileUUID:eM,anvilUUID:eF,optimizeForOS:null==eO?void 0:eO.key};p.Z.post("/server",e).then(()=>{null==n||n.call(null),el(""),eY("Success",{children:(0,s.jsx)(s.Fragment,{children:"Provision server job registered."})})}).catch(e=>{let t=(0,v.Z)(e);t.children=(0,s.jsxs)(s.Fragment,{children:["Failed to start provision server job."," ",t.children]}),eY("Error",t)})},titleText:"Provision ".concat(en,"?")}),eX(!0)},children:"Provision"})})})]}),eJ]})};Q.defaultProps={onClose:void 0},t.Z=Q},37628:function(e,t,n){n.d(t,{Z:function(){return I}});var l=n(85893),r=n(50764),s=n(73939),i=n(37906),o=n(89621),a=n(82492),u=n.n(a),c=n(67294),d=n(39971),p=n(17512),h=n(18766),x=n(43463),m=n(93890),g=n(38444),v=n(45293),f=n(55730),b=n(8499),U=n(61292),j=n(7727),S=n(36300),Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s]=t,{onClearIndicatorClick:i,...o}=s,{sx:a,value:u,...p}=o,h=(0,c.useMemo)(()=>({["& .".concat(r.Z.icon)]:{color:d.s7},["& .".concat(v.Z.root)]:{marginRight:".8em"},["& .".concat(f.Z.root)]:{color:d.s7,visibility:"hidden"},["&:hover .".concat(v.Z.root," .").concat(f.Z.root,",\n      &.").concat(b.Z.focused," .").concat(v.Z.root," .").concat(f.Z.root)]:{visibility:"visible"},...a}),[a]),x=(0,c.useMemo)(()=>{if(u&&i)return(0,l.jsx)(U.Z,{position:"end",children:(0,l.jsx)(j.Z,{onClick:i,tabIndex:-1,children:(0,l.jsx)(g.Z,{fontSize:"small"})})})},[i,u]);return(0,l.jsx)(S.Z,{endAdornment:x,value:u,...p,sx:h})},I=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[a]=t,{id:g,label:v,selectItems:f,checkItem:b,disableItem:U,formControlProps:j,hideItem:S,inputLabelProps:I={},isReadOnly:y=!1,messageBoxProps:D={},name:P,noOptionsText:C="No options",onBlur:k,onChange:M,onFocus:A,required:G,selectProps:{MenuProps:F,multiple:w,sx:B,...z}={},value:O,isCheckableItems:N=w}=a,T=(0,c.useMemo)(()=>y?u()({["& .".concat(r.Z.icon)]:{visibility:"hidden"}},B):B,[y,B]),R=(0,c.useCallback)(e=>N&&(0,l.jsx)(s.Z,{checked:null==b?void 0:b.call(null,e)}),[b,N]),Q=(0,c.useCallback)((e,t)=>(0,l.jsxs)(h.Z,{disabled:null==U?void 0:U.call(null,e),sx:{display:(null==S?void 0:S.call(null,e))?"none":void 0},value:e,children:[R(e),t]},"".concat(g,"-").concat(e)),[R,U,S,g]),q=(0,c.useMemo)(()=>"".concat(g,"-select-element"),[g]),L=(0,c.useMemo)(()=>(0,l.jsx)(x.Z,{id:g,label:v}),[g,v]),E=(0,c.useMemo)(()=>v&&(0,l.jsx)(m.Z,{htmlFor:q,isNotifyRequired:G,...I,children:v}),[I,G,v,q]),V=(0,c.useMemo)(()=>f.length?f.map(e=>{if("string"==typeof e)return Q(e,e);let{value:t,displayValue:n=String(t)}=e;return Q(t,n)}):(0,l.jsx)(h.Z,{disabled:!0,children:C}),[Q,C,f]),W=(0,c.useMemo)(()=>u()({sx:{["& .".concat(i.Z.paper)]:{backgroundColor:d.s7}}},F),[F]);return(0,l.jsxs)(o.Z,{fullWidth:!0,...j,children:[E,(0,l.jsx)(Z,{id:q,input:L,MenuProps:W,multiple:w,name:P,onBlur:k,onChange:M,onFocus:A,readOnly:y,value:O,...z,sx:T,children:V}),(0,l.jsx)(p.Z,{...D})]})}},18573:function(e,t,n){var l=n(85893),r=n(62549),s=n(77527),i=n(39971);let o=(0,s.ZP)(e=>{let{syncing:t,...n}=e;return(0,l.jsx)(r.Z,{...n})})(e=>{let{syncing:t}=e,n=i.UZ;return t&&(n=i.Ej),{color:n}});t.Z=o},40657:function(e,t,n){var l=n(85893),r=n(67294),s=n(47177),i=n(29873);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:t="",content:n="",titleText:o="",...a}={}}=e,u=(0,r.useRef)(null),[c,d]=(0,r.useState)({actionProceedText:t,content:n,titleText:o}),p=(0,r.useCallback)(e=>d(t=>{let{loading:n,...l}=t;return{...l,loading:e}}),[]),h=(0,r.useCallback)(e=>{var t,n;return null==u?void 0:null===(n=u.current)||void 0===n?void 0:null===(t=n.setOpen)||void 0===t?void 0:t.call(null,e)},[]),x=(0,r.useCallback)((e,t)=>d({actionProceedText:"",content:(0,l.jsx)(i.Z,{...t}),showActionArea:!1,showClose:!0,titleText:e}),[]);return{confirmDialog:(0,r.useMemo)(()=>(0,l.jsx)(s.Z,{...a,...c,ref:u}),[c,a]),confirmDialogRef:u,setConfirmDialogLoading:p,setConfirmDialogOpen:h,setConfirmDialogProps:d,finishConfirm:x}}},4615:function(e,t,n){n.d(t,{k:function(){return l}});let l=["B","KiB","MiB","GiB","TiB"].map(e=>({value:e}))},46283:function(e,t,n){n.d(t,{Bh:function(){return r},KY:function(){return s},MU:function(){return i}});var l=n(54490),r=function(e){let{fromUnit:t,onFailure:n,onSuccess:r,precision:s,toUnit:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,l.gO)(e,{fromUnit:t,precision:s,toUnit:i});if(o){let{value:e,unit:t}=o;try{var a,u,c;null==r||null===(a=r.bigint)||void 0===a||a.call(null,BigInt(e),t),null==r||null===(u=r.number)||void 0===u||u.call(null,parseFloat(e),t),null==r||null===(c=r.string)||void 0===c||c.call(null,e,t)}catch(l){null==n||n.call(null,l,e,t)}}else null==n||n.call(null)},s=(e,t,n,l)=>{r(e,{fromUnit:t,onFailure:l,onSuccess:{bigint:n},precision:0,toUnit:"B"})},i=e=>(0,l._d)(e,{toUnit:"ibyte"})},72414:function(e,t,n){n.d(t,{_:function(){return o},dg:function(){return a},qY:function(){return d},Gn:function(){return p},LT:function(){return b},BD:function(){return f},X7:function(){return U},HJ:function(){return i},SQ:function(){return u}});var l=n(85893),r=n(35338),s=n(57882),i=e=>{let{value:t}=e;return!!t&&String(t).length>0},o=function(e,t){let{isRequired:n,onFinishBatch:s,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:s,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a((0,l.jsxs)(l.Fragment,{children:[e," should be a valid IPv4 address."]}),...n)},test:e=>{let{value:t}=e;return r.tf.test(t)}}]}},a=function(e,t){let{isRequired:n,onFinishBatch:s,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:s,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];a((0,l.jsxs)(l.Fragment,{children:[e," must be one or more valid IPv4 addresses separated by comma(s); without trailing comma."]}),...n)},test:e=>{let{value:t}=e;return r.ah.test(t)}}]}},u=e=>{let{max:t,min:n,value:l}=e;return!!l&&l>=n&&l<=t},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parseInt";return"number"==typeof e?e:Number[t](String(e))},d=function(e,t){let{isRequired:n,onFinishBatch:r,...s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,d=[];return i?d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];i((0,l.jsxs)(l.Fragment,{children:[e," must be a valid integer."]}),...n)},test:e=>{let{value:t}=e;return Number.isSafeInteger(c(t))}}):o&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];o((0,l.jsxs)(l.Fragment,{children:[e," must be a valid floating-point number."]}),...n)},test:e=>{let{value:t}=e;return Number.isFinite(c(t,"parseFloat"))}}),a&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];let{displayMax:s,displayMin:i}=n[0];a((0,l.jsxs)(l.Fragment,{children:[e," is expected to be between ",i," and ",s,"."]}),...n)},test:u}),{defaults:{...s,onSuccess:t},isRequired:n,onFinishBatch:r,tests:d}},p=function(e,t){let{isRequired:n,onFinishBatch:o,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;return{defaults:{...a,onSuccess:t},isRequired:n,onFinishBatch:o,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];u((0,l.jsxs)(l.Fragment,{children:[e," cannot contain single-quote (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:"'"}),"), double-quote (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:'"'}),"), slash (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:"/"}),"), backslash (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:"\\"}),"), angle brackets (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:"<>"}),"), curly brackets (",(0,l.jsx)(s.Q0,{inheritColour:!0,text:"{}"}),")."]}),...n)},test:e=>{let{value:t}=e;return r.OU.test(t)}}]}};let h=()=>({}),x=e=>{let{onFailure:t,onSuccess:n}=e;return{cbFailure:t,cbSuccess:n}},m=e=>{let{isIgnoreOnCallbacks:t,onFinishBatch:n}=e;return t?{setTestCallbacks:h}:{cbFinishBatch:n,setTestCallbacks:x}},g=(e,t)=>null!=e?e:t,v=(e,t)=>e||t;var f=function(){let{excludeTestIds:e=[],excludeTestIdsRe:t,inputs:n={},isContinueOnFailure:l,isIgnoreOnCallbacks:r,isTestAll:s=0===Object.keys(n).length,tests:i={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[...e],a={},u=!0;return s&&Object.keys(i).forEach(e=>{a[e]={}}),a={...a,...n},t&&Object.keys(a).forEach(e=>{t.test(e)&&o.push(e)}),o.forEach(e=>{delete a[e]}),Object.keys(a).every(e=>{let{defaults:{compare:t=[],displayMax:n,displayMin:s,getCompare:o,getValue:c,isIgnoreOnCallbacks:d=r,max:p=0,min:h=0,onSuccess:x,value:f=null}={},isRequired:b=!1,onFinishBatch:U,optionalTests:j,tests:S}=i[e],{getCompare:Z=o,getValue:I=c,isIgnoreOnCallbacks:y=d,max:D=p,min:P=h,compare:C=g(null==Z?void 0:Z.call(null),t),value:k=g(null==I?void 0:I.call(null),f),displayMax:M=v(n,String(D)),displayMin:A=v(s,String(P))}=a[e],{cbFinishBatch:G,setTestCallbacks:F}=m({isIgnoreOnCallbacks:y,onFinishBatch:U});if(!k&&!b)return null==G||G.call(null,!0,e),!0;let w=e=>{let{onFailure:t,onSuccess:n=x,test:l}=e,r={},s=l({append:r,compare:C,max:D,min:P,value:k}),{cbFailure:i,cbSuccess:o}=F({onFailure:t,onSuccess:n});return s?null==o||o.call(null,{append:r}):(u=s,null==i||i.call(null,{append:r,compare:C,displayMax:M,displayMin:A,max:D,min:P,value:k})),s};null==j||j.forEach(w);let B=S.every(w);return null==G||G.call(null,B,e),B||l}),u},b=function(e){let{excludeTestIds:t=[],...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let{excludeTestIds:l=[],...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f({tests:e,excludeTestIds:[...t,...l],...n,...r})}},U=e=>{let{max:t,min:n}=e;return t>=n}}}]);