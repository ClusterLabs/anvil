(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{54490:function(e,t,n){"use strict";n.d(t,{_d:function(){return p},gO:function(){return m}});var r={"b-B":8n,"b-kB":8000n,"b-MB":8000000n,"b-GB":8000000000n,"b-TB":8000000000000n,"b-PB":8000000000000000n,"b-EB":0x6f05b59d3b200000n,"b-ZB":0x1b1ae4d6e2ef5000000n,"b-YB":0x69e10de76676d08000000n,"b-KiB":8192n,"b-MiB":8388608n,"b-GiB":8589934592n,"b-TiB":8796093022208n,"b-PiB":9007199254740992n,"b-EiB":0x8000000000000000n,"b-ZiB":0x2000000000000000000n,"b-YiB":0x800000000000000000000n,"b-b":1n,"b-kbit":1000n,"b-Mbit":1000000n,"b-Gbit":1000000000n,"b-Tbit":1000000000000n,"b-Pbit":1000000000000000n,"b-Ebit":0xde0b6b3a7640000n,"b-Zbit":0x3635c9adc5dea00000n,"b-Ybit":0xd3c21bcecceda1000000n,"b-Kibit":1024n,"b-Mibit":1048576n,"b-Gibit":1073741824n,"b-Tibit":1099511627776n,"b-Pibit":1125899906842624n,"b-Eibit":0x1000000000000000n,"b-Zibit":0x400000000000000000n,"b-Yibit":0x100000000000000000000n},l=["byte","ibyte","bit","ibit"],i=["B","kB","MB","GB","TB","PB","EB","ZB","YB","B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB","b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit","b","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],o=function(e){return BigInt(Math.pow(10,e))},s=function(e,t){var n=e.precision,l=e.value,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.isReverse;if("b"===t)return{precision:n,value:l};var a=r["b-".concat(t)];if(s)return{precision:n,value:l*a};var u=String(a).length,c=l*o(u)/a;return{precision:n+u,value:c}},a=function(e,t){var n="i"===e[1],r=/B$/.test(e),l="".concat(n?"i":"").concat(r?"byte":"bit"),i=t.findIndex(function(e){return e===l});return{section:l,index:i}},u=function(e,t,n,r,l,i,o){var s=i.indexOf(n),u=t;s<0&&(s=a(t,i).index);for(var c=s*o,d=c+o;c<d;c+=1){var h=l[c];e>=r["b-".concat(h)]?u=h:c=d}return u};function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var i=[],o=!0,s=!1;try{for(l=l.call(e);!(o=(n=l.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.precision,n=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=r.bigintFormatOptions,i=r.numberFormatOptions,s=r.locale,a=o(t),u=n/a,c=n%a,v=h("0.",2),f=v[0],m=v[1],p=u.toString(),b=c.toString();if(s){var g="string"==typeof s?s:void 0,x=h(.1.toLocaleString(g,i),2);f=x[0],m=x[1],p=u.toLocaleString(g,l),b=c.toLocaleString(g,d(d({},l),{},{useGrouping:!1}))}var y=p;return t>0&&(y+="".concat(m).concat(b.padStart(t,f))),y},m=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.fromUnit,l=n.locale,i=n.precision,o=n.toUnit;try{t=x(e)}catch(e){return}var a=y(i),u=a.max,c=a.min,d=g(void 0===r?"B":r,"B").unit,h=j(t=s(t,d,{isReverse:!0}),d,{toUnit:o});return{value:f(t=Z(t=b(t=s(t,h),{toPrecision:Math.max(c,Math.min(t.precision,u))}),c),{locale:l}),unit:h}},p=function(){var e=m.apply(void 0,arguments);return e?"".concat(e.value," ").concat(e.unit):e},b=function(e){var t=e.precision,n=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=r.toPrecision,i=void 0===l?0:l,s={precision:i,value:n};if(i>t)s.value*=o(i-t);else if(i<t){var a=t-i,u=o(a),c=s.value%u/o(a-1);s.value/=u,c>4&&(s.value+=1n)}return s},g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,r=n.indexOf(e);return r<0?{unit:t,unitIndex:0}:{unit:n[r],unitIndex:r}},x=function(e){var t,n,r=String(e).split(/\D/,2),l=null!==(t=null===(n=r[1])||void 0===n?void 0:n.length)&&void 0!==t?t:0,i=r.join("");if(0===i.length)throw Error("Value is blank.");return{value:BigInt(i),precision:l}},y=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof n?{max:n,min:n}:{max:null!==(e=n.max)&&void 0!==e?e:2,min:null!==(t=n.min)&&void 0!==t?t:0}},j=function(e,t){var n=e.precision,s=e.value,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.conversionTable,d=a.toUnit,h=a.units,v=void 0===h?i:h,f=a.unitSections,m=a.unitSectionLength,p=v.indexOf(d);return p>=0?v[p]:u(s/o(n),t,d,void 0===c?r:c,v,void 0===f?l:f,void 0===m?9:m)},Z=function(e,t){for(var n=e.precision,r={precision:n,value:e.value},l=n-t,i=!0,o=1;i&&o<=l;o+=1)0n===r.value%10n?(r.value/=10n,r.precision-=1):i=!1;return r}},91953:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/file-manager",function(){return n(6033)}])},44089:function(e,t,n){"use strict";var r=n(85893),l=n(14440),i=n(54965),o=n(37969),s=n(38189),a=n(66173),u=n(56903),c=n(59278);let d=e=>{let{entry:t}=e;return(0,r.jsx)(c.$_,{whiteSpace:"nowrap",children:String(t)})},h=e=>{let{entry:t,key:n}=e;return s.JW.test(n)?(0,r.jsx)(c.PJ,{wrapper:"mono",children:String(t)}):d(e)},v=e=>{let{entry:t,hasPassword:n}=e;return["",null,void 0].some(e=>t===e)||Number.isNaN(t)?(0,r.jsx)(c.Ac,{children:"none"}):n?h(e):d(e)},f=e=>{let{depth:t,entry:n,getLabel:i,hasPassword:o,key:s,nest:d,renderValue:h}=e;return(0,r.jsxs)(u.Z,{fullWidth:!0,growFirst:!0,row:!0,maxWidth:"100%",children:[(0,r.jsx)(c.Ac,{children:i({cap:a.Z,depth:t,entry:n,hasPassword:o,key:s})}),(0,r.jsx)(l.Z,{sx:{maxWidth:"100%",overflowX:"scroll"},children:!d&&h(v,{depth:t,entry:n,hasPassword:o,key:s})})]})},m=e=>{let{key:t}=e;return/confirm|uuid/i.test(t)},p=e=>{let{depth:t=0,entries:n,getEntryLabel:l,getListProps:s,getListItemProps:a,hasPassword:u,listKey:c,maxDepth:d,renderEntry:h,renderEntryValue:v,skip:f}=e,b=[];Object.entries(n).forEach(e=>{let[n,o]=e,s=null!==o&&"object"==typeof o,c=s?null:o,g={depth:t,entry:c,hasPassword:u,key:n};f(m,g)||b.push((0,r.jsx)(i.ZP,{sx:{paddingLeft:"".concat(t,"em")},...null==a?void 0:a.call(null,g),children:h({depth:t,entry:c,getLabel:l,hasPassword:u,key:n,nest:s,renderValue:v})},"form-summary-entry-".concat(n))),s&&t<d&&b.push(p({depth:t+1,entries:o,getEntryLabel:l,hasPassword:u,listKey:n,maxDepth:d,renderEntry:h,renderEntryValue:v,skip:f}))});let g="form-summary-list-".concat(null!=c?c:"root");return(0,r.jsx)(o.Z,{dense:!0,disablePadding:!0,...null==s?void 0:s.call(null,{depth:t,entries:n,key:c}),children:b},g)};t.Z=e=>{let{entries:t,getEntryLabel:n=e=>{let{cap:t,key:n}=e;return t(n)},getListProps:r,getListItemProps:l,hasPassword:i=!1,maxDepth:o=3,renderEntry:s=f,renderEntryValue:a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)},skip:u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)}}=e;return p({entries:t,getEntryLabel:n,getListProps:r,getListItemProps:l,hasPassword:i,maxDepth:o,renderEntry:s,renderEntryValue:a,skip:u})}},81208:function(e,t,n){"use strict";var r=n(85893),l=n(67294),i=n(99576);let o={count:0,defaultMessageType:"info",messages:void 0,onSet:void 0,usePlaceholder:!0},s=(0,l.forwardRef)((e,t)=>{let{count:n=o.count,defaultMessageType:s=o.defaultMessageType,messages:a,onSet:u,usePlaceholder:c=o.usePlaceholder}=e,[d,h]=(0,l.useState)({}),v=(0,l.useMemo)(()=>({...a,...d}),[a,d]),f=(0,l.useCallback)(e=>void 0!==v[e],[v]),m=(0,l.useCallback)((e,t)=>{let n=0;h(r=>{let{[e]:l,...i}=r;return t&&(i[e]=t),n=Object.keys(i).length,i}),null==u||u.call(null,n)},[u]),p=(0,l.useCallback)((e,t)=>{let n=0,r=t?(e,r)=>{e[r]=t,n+=1}:void 0;h(t=>{let l={};return Object.keys(t).forEach(i=>{e.test(i)?null==r||r.call(null,l,i):(l[i]=t[i],n+=1)}),l}),null==u||u.call(null,n)},[u]),b=(0,l.useMemo)(()=>{let e=Object.entries(v),t=n>0,l=t?n:e.length,o=[];if(e.every(e=>{let[t,n]=e,{children:a,type:u=s}=n;return o.push((0,r.jsx)(i.Z,{type:u,children:a},"message-".concat(t))),o.length<l}),c&&t&&0===o.length){let e=n-o.length;for(let t=0;t<e;t+=1)o.push((0,r.jsx)(i.Z,{sx:{visibility:"hidden"},text:"Placeholder"},"message-placeholder-".concat(t)))}return o},[n,s,c,v]);return(0,l.useImperativeHandle)(t,()=>({exists:f,setMessage:m,setMessageRe:p}),[f,m,p]),(0,r.jsx)(r.Fragment,{children:b})});s.defaultProps=o,s.displayName="MessageGroup",t.Z=s},12387:function(e,t,n){"use strict";var r=n(67294),l=n(37842),i=n(14879);let o=(0,r.forwardRef)((e,t)=>{let{input:n,onChange:o=function(e){let{handlers:{base:t,origin:n}}=e;for(var r=arguments.length,l=Array(r>1?r-1:0),i=1;i<r;i++)l[i-1]=arguments[i];null==t||t.call(null,...l),null==n||n.call(null,...l)},onMount:s,onUnmount:a}=e,{props:u}=n,{valueKey:c,valueType:d}=(0,r.useMemo)(()=>{let{type:e}=u,t="value",n="string";return e===l.Z.checkbox&&(t="checked",n="boolean"),{valueKey:t,valueType:n}},[u]),{onChange:h,[c]:v,...f}=u,[m,p]=(0,r.useState)(v),b=(0,r.useCallback)(e=>{let{target:{[c]:t}}=e;p(i.Z[d](t))},[c,d]),g=(0,r.useCallback)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==o?void 0:o.call(null,{handlers:{base:b,origin:h}},...t)},[b,h,o]);return(0,r.useEffect)(()=>(null==s||s.call(null),a),[]),(0,r.useEffect)(()=>{p(v)},[v]),(0,r.useImperativeHandle)(t,()=>({get:()=>m,set:p}),[m]),(0,r.cloneElement)(n,{...f,onChange:g,[c]:m})});o.displayName="UncontrolledInput",t.Z=o},68805:function(e,t,n){"use strict";var r=n(67294),l=n(98484),i=n(97607);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{config:t,onError:n,onData:o,url:s=""}=e,[a,u]=(0,r.useState)(!1);return{fetch:(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,a="".concat(s).concat(e);a&&(u(!0),l.Z.get(a,{...t,...r}).then(e=>{let{data:t}=e;null==o||o.call(null,t)}).catch(e=>{let t=(0,i.Z)(e);null==n||n.call(null,t)}).finally(()=>{u(!1)}))},[s,t,o,n]),loading:a}}},85291:function(e,t,n){"use strict";var r=n(85893),l=n(67294),i=n(8534),o=n(44089);t.Z=e=>{let{list:t={}}=e,[n,s]=(0,l.useState)({}),a=(0,l.useMemo)(()=>Object.keys(t),[t]),u=(0,l.useMemo)(()=>Object.keys(n),[n]),c=(0,l.useMemo)(()=>u.length===a.length,[u.length,a.length]),d=(0,l.useMemo)(()=>u.length>0,[u.length]),h=(0,l.useMemo)(()=>a.length>1,[a.length]),v=(0,l.useCallback)(e=>{let{confirmDialogProps:t={},formSummaryProps:l={},getConfirmDialogTitle:i,onProceedAppend:s,renderEntry:a}=e;return{actionProceedText:"Delete",content:(0,r.jsx)(o.Z,{entries:n,maxDepth:0,renderEntry:a,...l}),onProceedAppend:s,proceedColour:"red",titleText:i(u.length),...t}},[n,u.length]),f=(0,l.useCallback)(e=>!!n[e],[n]);return{buildDeleteDialogProps:v,checklist:n,checks:u,getCheck:f,hasAllChecks:c,hasChecks:d,multipleItems:h,resetChecks:(0,l.useCallback)(()=>s({}),[]),setAllChecks:(0,l.useCallback)(e=>s(a.reduce((t,n)=>(e&&(t[n]=e),t),{})),[a]),setCheck:(0,l.useCallback)((e,t)=>s((0,i.ZP)(e,t||void 0)),[])}}},62848:function(e,t,n){"use strict";var r=n(67294);t.Z=function(){let{actionProceedText:e="",content:t="",titleText:n="",...l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.useState)({actionProceedText:e,content:t,titleText:n,...l})}},77510:function(e,t,n){"use strict";var r=n(67294),l=n(8100),i=n(92230),o=n(54120);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{baseUrl:n=i.Z,fetcher:s=o.Z,mod:a,...u}=t,{data:c,error:d,mutate:h}=(0,l.ZP)("".concat(n).concat(e),s,u),v=(0,r.useMemo)(()=>a&&c&&a(c),[c,a]),f=!d&&!c;return{altData:v,data:c,error:d,mutate:h,loading:f}}},59752:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=e=>e.reduce((e,t)=>{let{hostName:n,hostType:r,hostUUID:l}=t;return e[l]={name:n,type:r,uuid:l},e},{}),l=e=>e.reduce((e,t)=>{let{anvilDescription:n,anvilName:l,anvilUUID:i,hosts:o}=t;return e[i]={description:n,hosts:r(o),name:l,uuid:i},e},{})},8534:function(e,t,n){"use strict";n.d(t,{Um:function(){return l}});let r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[,r,l,i]=t;void 0!==i&&(r[l]=i)},l=function(e,t){let{set:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let l={};return Object.keys(r).forEach(i=>{e.test(i)?n(r,l,i,t):l[i]=r[i]}),l}};t.ZP=function(e,t){let{guard:n=()=>!0,set:l=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{[e]:i,...o}=r,s={...o};return n(r,e,t)&&l(r,s,e,t),s}}},36026:function(e,t){"use strict";t.Z=(e,t)=>e&&Object.keys(e).reduce((e,n)=>({...e,[n]:t}),{})},14879:function(e,t){"use strict";t.Z={boolean:e=>!!e,number:e=>parseInt(String(e),10)||0,string:e=>String(e)}},66173:function(e,t,n){"use strict";var r=n(48403),l=n.n(r);t.Z=e=>{let t=e.replace(/([a-z\d])([A-Z])/g,"$1 $2");return l()(t)}},87196:function(e,t,n){"use strict";var r=n(66173);let l=function(e){let{build:t=(e,t)=>{let n=t;if("string"==typeof n){let[e,...t]=n.split(/\s+/);n=[(0,r.Z)(e.replace(/^[^\s]+\.([^.]+)/,"$1")),...t].join(" ")}return{children:n,type:"warning"}},chain:n="",skip:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(e).reduce((e,r)=>{let[o,s]=r,a=[n,o].filter(e=>!!e).join(".");return null!==s&&"object"==typeof s?{...e,...l(s,{build:t,chain:a,skip:i})}:((null==i?void 0:i.call(null,a))||(e[a]=t(a,s)),e)},{})};t.Z=l},74077:function(e,t,n){"use strict";n.d(t,{T:function(){return o},u:function(){return i}});var r=n(16310),l=n(38189);let i=()=>r.Z_().matches(l.Qt,{message:"${path} must be a valid UUID"}),o=()=>r.Z_().matches(l.tf,{message:"${path} must be a valid IPv4 address"})},28054:function(e,t,n){"use strict";n.d(t,{Z:function(){return x}});var r=n(63366),l=n(87462),i=n(67294),o=n(92827),s=n(94780),a=n(89262),u=n(59145),c=n(1588),d=n(34867);function h(e){return(0,d.Z)("MuiFormGroup",e)}(0,c.Z)("MuiFormGroup",["root","row","error"]);var v=n(12794),f=n(35029),m=n(85893);let p=["className","row"],b=e=>{let{classes:t,row:n,error:r}=e;return(0,s.Z)({root:["root",n&&"row",r&&"error"]},h,t)},g=(0,a.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.row&&t.row]}})(e=>{let{ownerState:t}=e;return(0,l.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})});var x=i.forwardRef(function(e,t){let n=(0,u.Z)({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=n,a=(0,r.Z)(n,p),c=(0,v.Z)(),d=(0,f.Z)({props:n,muiFormControl:c,states:["error"]}),h=(0,l.Z)({},n,{row:s,error:d.error}),x=b(h);return(0,m.jsx)(g,(0,l.Z)({className:(0,o.Z)(x.root,i),ownerState:h,ref:t},a))})},6033:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return es}});var r=n(85893),l=n(9008),i=n.n(l),o=n(74717),s=n(54490),a=n(67294),u=n(92230);let c=[["iso",["application/x-cd-image","ISO (optical disc)"]],["other",["text/plain","Other file type"]],["script",["text/plain","Script (program)"]]],d=new Map(c);var h=n(55066),v=n(25934),f=n(4845),m=n(98484),p=n(99429),b=n(28054),g=n(50361),x=n.n(g),y=n(23279),j=n.n(y),Z=n(56903),w=n(83916),k=n(91029),C=n(23930),M=n(6189),O=n(59278),S=n(12387),P=e=>{let{anvils:t,drHosts:n,fileUuid:l,formik:i,showSyncInputGroup:o,showTypeInput:s}=e,{handleBlur:u,handleChange:d}=i,h=(0,a.useMemo)(()=>j()(d,500),[d]),{nameChain:v,locationsChain:f,typeChain:m}=(0,a.useMemo)(()=>({nameChain:"".concat(l,".name"),locationsChain:"".concat(l,".locations"),typeChain:"".concat(l,".type")}),[l]),p=(0,a.useCallback)((e,t)=>{i.setValues(n=>{var r;let i=x()(n),o=null===(r=i[l].locations)||void 0===r?void 0:r[e];return o?(Object.keys(o).forEach(e=>{o[e].active=t}),i):n})},[i,l]),g=(0,a.useCallback)(e=>{var t;let n=null===(t=i.values[l].locations)||void 0===t?void 0:t[e];return n?{checked:Object.values(n).every(e=>{let{active:t}=e;return t}),onChange:(t,n)=>{p(e,n)}}:{}},[i.values,l,p]),y=(0,a.useCallback)((e,t)=>{var n,r,o;let s="".concat(f,".").concat(e,".").concat(t),a="".concat(s,".active");return{id:a,name:a,checked:null===(o=i.values[l].locations)||void 0===o?void 0:null===(r=o[e])||void 0===r?void 0:null===(n=r[t])||void 0===n?void 0:n.active,onBlur:u,onChange:d}},[i.values,l,u,d,f]),P=(0,a.useCallback)(e=>{var t;let n=null===(t=i.values[l].locations)||void 0===t?void 0:t[e];return n&&Object.keys(n).length>1},[i.values,l]),B=(0,a.useMemo)(()=>(0,r.jsx)(S.Z,{input:(0,r.jsx)(k.Z,{id:v,label:"File name",name:v,onBlur:u,onChange:h,value:i.values[l].name})}),[h,i.values,l,u,v]),I=(0,a.useMemo)(()=>o&&(0,r.jsx)(C.TZ,{header:"Sync with node(s)",panelProps:{mb:0,mt:0,width:"100%"},children:(0,r.jsx)(w.Z,{allowCheckAll:P("anvils"),allowCheckItem:!0,edit:!0,header:!0,listItems:t,getListCheckboxProps:()=>g("anvils"),getListItemCheckboxProps:e=>y("anvils",e),renderListItem:(e,t)=>{let{description:n,name:l}=t;return(0,r.jsxs)(O.Ac,{children:[l,": ",n]})}})}),[t,P,g,y,o]),E=(0,a.useMemo)(()=>o&&(0,r.jsx)(C.TZ,{header:"Sync with DR host(s)",panelProps:{mb:0,mt:0,width:"100%"},children:(0,r.jsx)(w.Z,{allowCheckAll:P("drHosts"),allowCheckItem:!0,edit:!0,header:!0,listItems:n,getListCheckboxProps:()=>g("drHosts"),getListItemCheckboxProps:e=>y("drHosts",e),renderListItem:(e,t)=>{let{hostName:n}=t;return(0,r.jsx)(O.Ac,{children:n})}})}),[n,P,g,y,o]),A=(0,a.useMemo)(()=>s&&(0,r.jsx)(M.Z,{id:m,label:"File type",name:m,onBlur:u,onChange:d,selectItems:c.map(e=>{let[t,[,n]]=e;return{displayValue:n,value:t}}),value:i.values[l].type}),[i.values,l,u,d,s,m]);return(0,r.jsxs)(b.Z,{sx:{"& > :not(:first-child)":{marginTop:"1em"}},children:[(0,r.jsxs)(Z.Z,{sm:"row",xs:"column",children:[B,A]}),I,E]})},B=n(87196),I=n(97607),E=n(81208),A=n(16310),F=n(36026),T=n(74077);let D=A.Ry({active:A.O7().required()}),U=A.Vo(e=>A.Ry((0,F.Z)(e,D))),R=A.Vo(e=>A.Ry((0,F.Z)(e,D))),_=A.Ry({locations:A.Ry({anvils:U,drHosts:R}),name:A.Z_().required(),type:A.Z_().oneOf(["iso","other","script"]),uuid:(0,T.u)().required()}),V=A.Vo(e=>A.Ry((0,F.Z)(e,_)));var G=n(14440),L=n(40743),N=e=>{let{uploads:t}=e;return(0,r.jsx)(Z.Z,{columnSpacing:".2em",children:Object.values(t).map(e=>{let{name:t,progress:n,uuid:l}=e;return(0,r.jsxs)(G.Z,{sx:{alignItems:{md:"center"},display:"flex",flexDirection:{xs:"column",md:"row"},"& > :first-child":{minWidth:100,overflow:"hidden",overflowWrap:"normal",textOverflow:"ellipsis",whiteSpace:"nowrap",width:{xs:"100%",md:200},wordBreak:"keep-all"},"& > :last-child":{flexGrow:1}},children:[(0,r.jsx)(O.Ac,{children:t}),(0,r.jsx)(L.ko,{progressPercentage:n})]},"upload-".concat(l))})})};let H=(e,t,n)=>e?(e[t].progress=n,{...e}):e;var $=e=>{let{anvils:t,drHosts:n}=e,l=(0,a.useRef)(null),i=(0,a.useRef)(null),[o,s]=(0,a.useState)(),u=(0,a.useCallback)(e=>{var t,n;return null==l?void 0:null===(n=l.current)||void 0===n?void 0:null===(t=n.setMessage)||void 0===t?void 0:t.call(null,"api",e)},[]),c=(0,h.TA)({initialValues:{},onSubmit:e=>{let t=Object.values(e);s(t.reduce((e,t)=>{let{file:n,name:r,uuid:l}=t;return n&&(e[l]={name:r,progress:0,uuid:l}),e},{})),u({children:(0,r.jsx)(r.Fragment,{children:"Closing this dialog before the upload(s) complete will cancel the upload(s)."})}),Promise.all(t.reduce((e,t)=>{let{file:n,name:r,uuid:l}=t;if(!n)return e;let i=new FormData;i.append("file",new File([n],r,{...n}));let o=m.Z.post("/file",i,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{let{loaded:t,total:n=t}=e;s(e=>H(e,l,Math.round(t/n*99)))}}).then(()=>{s(e=>H(e,l,100))});return e.push(o),e},[])).then(()=>{u({children:(0,r.jsxs)(Z.Z,{spacing:0,children:[(0,r.jsx)("span",{children:"Upload(s) completed; file(s) will be listed after the job(s) to sync them to other host(s) finish."}),(0,r.jsx)("span",{children:"You can close this dialog."})]})})}).catch(e=>{let t=(0,I.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:["Failed to add file. ",t.children]}),u(t)})},validationSchema:V}),d=(0,a.useMemo)(()=>(0,B.Z)(c.errors),[c.errors]),b=(0,a.useMemo)(()=>!c.dirty||!c.isValid||c.isValidating||c.isSubmitting,[c.dirty,c.isSubmitting,c.isValid,c.isValidating]),g=(0,a.useCallback)(e=>{let{target:{files:t}}=e;if(!t)return;let n=Array.from(t).reduce((e,t)=>{let n=(0,v.Z)();return e[n]={file:t,name:t.name,uuid:n},e},{});c.setValues(n)},[c]),x=(0,a.useMemo)(()=>c.values&&Object.values(c.values).map(e=>{let{uuid:l}=e;return(0,r.jsx)(P,{anvils:t,drHosts:n,fileUuid:l,formik:c},l)}),[t,n,c]);return(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(E.Z,{ref:l}),o?(0,r.jsx)(N,{uploads:o}):(0,r.jsxs)(Z.Z,{component:"form",onSubmit:e=>{e.preventDefault(),c.submitForm()},children:[(0,r.jsx)("input",{id:"files",multiple:!0,name:"files",onChange:g,ref:i,style:{display:"none"},type:"file"}),(0,r.jsx)(p.Z,{onClick:()=>{var e;null===(e=i.current)||void 0===e||e.click()},children:"Browse"}),x,(0,r.jsx)(E.Z,{count:1,messages:d}),(0,r.jsx)(f.Z,{actions:[{background:"blue",children:"Add",disabled:b,type:"submit"}]})]})]})},Y=n(59752),W=n(77583),K=n(34003),J=n(29535);let q=(e,t)=>{let{locations:n,name:r,type:l,uuid:i}=e;if(!n||!l)return;let o=[];return Object.entries(n.anvils).reduce((e,n)=>{let[r,{active:l}]=n,{anvils:{[r]:{locationUuids:i}}}=t,o=i.map(e=>({fileLocationUUID:e,isFileLocationActive:l}));return e.push(...o),e},o),Object.entries(n.drHosts).reduce((e,n)=>{let[r,{active:l}]=n,{hosts:{[r]:{locationUuids:i}}}=t,o=i.map(e=>({fileLocationUUID:e,isFileLocationActive:l}));return e.push(...o),e},o),{fileLocations:o,fileName:r,fileType:l,fileUUID:i}};var X=e=>{let{anvils:t,drHosts:n,onSuccess:l,previous:i}=e,o=(0,a.useRef)({}),s=(0,a.useCallback)(e=>{var t;return null===(t=o.current.setMessage)||void 0===t?void 0:t.call(null,"api",e)},[]),u=(0,a.useMemo)(()=>{let{locations:e,name:t,type:r,uuid:l}=i;return{[l]:{locations:Object.values(e).reduce((e,t)=>{let{active:r,anvilUuid:l,hostUuid:i}=t,o="anvils",s=l;return i in n&&(o="drHosts",s=i),e[o][s]={active:r},e},{anvils:{},drHosts:{}}),name:t,type:r,uuid:l}}},[n,i]),c=(0,h.TA)({initialValues:u,onSubmit:(e,t)=>{let{setSubmitting:n}=t,o=q(e[i.uuid],i);m.Z.put("/file/".concat(i.uuid),o).then(()=>{s({children:(0,r.jsx)(r.Fragment,{children:"File updated."})}),null==l||l.call(null)}).catch(e=>{let t=(0,I.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:["Failed to modify file. ",t.children]}),s(t)}).finally(()=>{n(!1)})},validationSchema:V}),d=(0,a.useMemo)(()=>(0,B.Z)(c.errors),[c.errors]),v=(0,a.useMemo)(()=>!c.dirty||!c.isValid||c.isValidating||c.isSubmitting,[c.dirty,c.isSubmitting,c.isValid,c.isValidating]);return(0,r.jsxs)(Z.Z,{component:"form",onSubmit:e=>{e.preventDefault(),c.submitForm()},children:[(0,r.jsx)(P,{anvils:t,drHosts:n,fileUuid:i.uuid,formik:c,showSyncInputGroup:!0,showTypeInput:!0}),(0,r.jsx)(E.Z,{count:1,messages:d,ref:o}),(0,r.jsx)(f.Z,{loading:c.isSubmitting,actions:[{background:"blue",children:"Edit",disabled:v,type:"submit"}]})]})},z=n(48430),Q=n(53541),ee=n(68805),et=n(85291),en=n(62848),er=n(77510);let el=e=>e.reduce((e,t)=>{let[n,r,l,i,o]=t;return e[n]={checksum:o,name:r,size:l,type:i,uuid:n},e},{}),ei=e=>{let{0:t}=e;if(!t)return;let[n,r,l,i,o]=t;return e.reduce((e,t)=>{let{5:n,6:r,7:l,8:i,9:o,10:s,11:a,12:u}=t;e.anvils[l]||(e.anvils[l]={description:o,locationUuids:[],name:i,uuid:l}),e.hosts[s]||(e.hosts[s]={locationUuids:[],name:a,type:u,uuid:s}),"dr"===u?e.hosts[s].locationUuids.push(n):e.anvils[l].locationUuids.push(n);let c=1===Number(r);return e.locations[n]={anvilUuid:l,active:c,hostUuid:s,uuid:n},e},{anvils:{},checksum:o,hosts:{},locations:{},name:r,size:l,type:i,uuid:n})};var eo=()=>{let e=(0,a.useRef)(null),t=(0,a.useRef)({}),n=(0,a.useRef)(null),l=(0,a.useRef)({}),[i,o]=(0,en.Z)(),[c,h]=(0,a.useState)(!1),[v,f]=(0,a.useState)(),[p,b]=(0,a.useState)(),{isLoading:g}=(0,z.Z)("".concat(u.Z,"/file"),{onSuccess:e=>{b(el(e))}}),{fetch:x,loading:y}=(0,ee.Z)({onData:e=>b(el(e)),url:"/file"}),j=(0,a.useMemo)(()=>g||y,[y,g]),{buildDeleteDialogProps:k,checks:M,getCheck:S,hasAllChecks:P,hasChecks:B,multipleItems:I,resetChecks:A,setAllChecks:F,setCheck:T}=(0,et.Z)({list:p}),D=(0,a.useCallback)(e=>{var t;return null===(t=l.current.setMessage)||void 0===t?void 0:t.call(null,"api",e)},[]),{fetch:U,loading:R}=(0,ee.Z)({onData:e=>f(ei(e)),onError:e=>{let{children:t,...n}=e;D({children:(0,r.jsxs)(r.Fragment,{children:["Failed to get file detail. ",t]}),...n})},url:"/file/"}),{data:_,loading:V}=(0,er.Z)("/anvil",{onError:e=>{D({children:(0,r.jsxs)(r.Fragment,{children:["Failed to get node list. ",e]}),type:"warning"})}}),G=(0,a.useMemo)(()=>_&&(0,Y.Z)(_),[_]),{data:L,loading:N}=(0,er.Z)("/host?types=dr",{onError:e=>{D({children:(0,r.jsxs)(r.Fragment,{children:["Failed to get DR host list. ",e]}),type:"warning"})}}),H=(0,a.useMemo)(()=>(0,r.jsx)(w.Z,{allowCheckAll:I,allowEdit:!0,allowItemButton:c,disableDelete:!B,edit:c,getListCheckboxProps:()=>({checked:P,onChange:(e,t)=>{F(t)}}),getListItemCheckboxProps:e=>({checked:S(e),onChange:(t,n)=>{T(e,n)}}),header:!0,listEmpty:"No file(s) found.",listItems:p,onAdd:()=>{var t;null===(t=e.current)||void 0===t||t.setOpen(!0)},onDelete:()=>{var e;o(k({onProceedAppend:()=>{Promise.all(M.map(e=>m.Z.delete("/file/".concat(e)))).then(()=>x()),A()},getConfirmDialogTitle:e=>"Delete the following ".concat(e," file(s)?"),renderEntry:e=>{let{key:t}=e;return(0,r.jsx)(O.Ac,{children:null==p?void 0:p[t].name})}})),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},onEdit:()=>{h(e=>!e)},onItemClick:(e,t)=>{var r;null===(r=n.current)||void 0===r||r.setOpen(!0),U(t)},renderListItem:(e,t)=>{var n;let{checksum:l,name:i,size:o,type:a}=t;return(0,r.jsxs)(Z.Z,{columnSpacing:0,fullWidth:!0,md:"row",xs:"column",children:[(0,r.jsxs)(Z.Z,{spacing:0,flexGrow:1,children:[(0,r.jsxs)(Z.Z,{row:!0,spacing:".5em",children:[(0,r.jsx)(O.$_,{children:i}),(0,r.jsx)(J.Z,{flexItem:!0,orientation:"vertical"}),(0,r.jsx)(O.Ac,{children:null===(n=d.get(a))||void 0===n?void 0:n[1]})]}),(0,r.jsx)(O.Ac,{children:(0,s._d)(o,{toUnit:"ibyte"})})]}),(0,r.jsx)(O.$_,{children:l})]})}}),[k,M,c,p,S,U,x,P,B,I,A,F,T,o]),q=(0,a.useMemo)(()=>j?(0,r.jsx)(Q.Z,{}):H,[j,H]),eo=(0,a.useMemo)(()=>(0,r.jsx)(E.Z,{count:1,ref:l,usePlaceholder:!1}),[]),es=(0,a.useMemo)(()=>g||V||N,[V,N,g]),ea=(0,a.useMemo)(()=>g||V||N||R,[V,N,R,g]),eu=(0,a.useMemo)(()=>G&&L&&(0,r.jsx)($,{anvils:G,drHosts:L}),[G,L]),ec=(0,a.useMemo)(()=>G&&L&&v&&(0,r.jsx)(X,{anvils:G,drHosts:L,onSuccess:()=>{x()},previous:v}),[G,L,v,x]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(C.s_,{children:[(0,r.jsx)(C.V9,{children:(0,r.jsx)(O.z,{children:"Files"})}),eo,q]}),(0,r.jsx)(K.Js,{header:"Add file(s)",loading:es,ref:e,showClose:!0,wide:!0,children:eu}),(0,r.jsx)(K.Js,{header:"Update file ".concat(null==v?void 0:v.name),loading:ea,ref:n,showClose:!0,wide:!0,children:ec}),(0,r.jsx)(W.Z,{closeOnProceed:!0,wide:!0,...i,ref:t})]})},es=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{children:(0,r.jsx)("title",{children:"File Manager"})}),(0,r.jsx)(o.Z,{}),(0,r.jsx)(eo,{})]})}},function(e){e.O(0,[491,442,433,206,461,602,361,173,717,967,888,774,179],function(){return e(e.s=91953)}),_N_E=e.O()}]);