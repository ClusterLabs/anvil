(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[753],{41171:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/server",function(){return l(68317)}])},48801:function(e,t,l){"use strict";var r=l(85893),n=l(21640),i=l(93454),s=l(77527),a=l(4989),o=l(1142),d=l(58219),c=l(35562),u=l(90642),h=l(96245),m=l(82492),v=l.n(m),x=l(67294),j=l(39971),f=l(17512),p=l(23852);let g=e=>(0,r.jsx)(n.Z,{in:!0,children:(0,r.jsx)(i.Z,{...e})}),b=(0,s.ZP)("ul")({padding:0}),Z=a.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:l,getGroupLabel:n,label:i,ListboxProps:s,messageBoxProps:a,renderGroup:m,renderInput:y,sx:P,...w}=e,k=(0,x.useMemo)(()=>v()({paper:{sx:{backgroundColor:j.s7,["& .".concat(o.Z.groupLabel)]:{backgroundColor:j.s7}}}},t),[t]),_=(0,x.useMemo)(()=>v()({sx:{["& .".concat(o.Z.option)]:{'&[aria-selected="true"]':{backgroundColor:j.lD,["&.".concat(o.Z.focused)]:{backgroundColor:j.lD}},["&.".concat(o.Z.focused)]:{backgroundColor:j.lD}}}},s),[s]),C=(0,x.useMemo)(()=>m||n&&(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)(Z,{component:"div",className:o.Z.groupLabel,children:n(e.group)}),(0,r.jsx)(b,{className:o.Z.groupUl,children:e.children})]},e.key)),[n,m]),S=(0,x.useMemo)(()=>null!=y?y:e=>{let{fullWidth:t,InputProps:n,InputLabelProps:s,inputProps:a}=e,o={formControlProps:{fullWidth:t,ref:n.ref},inputLabelProps:s,inputProps:{className:n.className,endAdornment:n.endAdornment,inputProps:a,startAdornment:n.startAdornment},label:i};return null==l||l.call(null,o,e),(0,r.jsx)(p.Z,{...o})},[l,i,y]),M=(0,x.useMemo)(()=>v()({["& .".concat(d.Z.root," .").concat(o.Z.endAdornment)]:{right:"7px",["& .".concat(c.Z.root)]:{color:j.s7}}},P),[P]);return(0,r.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{autoHighlight:!0,autoSelect:!0,PaperComponent:g,...w,ListboxProps:_,renderGroup:C,renderInput:S,slotProps:k,sx:M}),(0,r.jsx)(f.Z,{...a})]})}},76740:function(e,t,l){"use strict";var r=l(85893),n=l(90642),i=l(19304),s=l(47407),a=l(35338),o=l(44400),d=l(5387),c=l(57882);let u=e=>{let{entry:t}=e;return(0,r.jsx)(c.$_,{whiteSpace:"nowrap",children:String(t)})},h=e=>{let{entry:t,key:l}=e;return a.JW.test(l)?(0,r.jsx)(c.PJ,{wrapper:"mono",children:String(t)}):u(e)},m=e=>{let{entry:t,hasPassword:l}=e;return["",null,void 0].some(e=>t===e)||Number.isNaN(t)?(0,r.jsx)(c.Ac,{children:"none"}):l?h(e):u(e)},v=e=>{let{depth:t,entry:l,getLabel:i,hasPassword:s,key:a,nest:u,renderValue:h}=e;return(0,r.jsxs)(d.Z,{fullWidth:!0,growFirst:!0,row:!0,maxWidth:"100%",children:[(0,r.jsx)(c.Ac,{children:i({cap:o.Z,depth:t,entry:l,hasPassword:s,key:a})}),(0,r.jsx)(n.Z,{sx:{maxWidth:"100%",overflowX:"scroll"},children:!u&&h(m,{depth:t,entry:l,hasPassword:s,key:a})})]})},x=e=>{let{key:t}=e;return/confirm|uuid/i.test(t)},j=e=>{let{depth:t=0,entries:l,getEntryLabel:n,getListProps:a,getListItemProps:o,hasPassword:d,listKey:c,maxDepth:u,renderEntry:h,renderEntryValue:m,skip:v}=e,f=[];Object.entries(l).forEach(e=>{let[l,s]=e,a=null!==s&&"object"==typeof s,c=a?null:s,p={depth:t,entry:c,hasPassword:d,key:l};v(x,p)||f.push((0,r.jsx)(i.ZP,{sx:{paddingLeft:"".concat(t,"em")},...null==o?void 0:o.call(null,p),children:h({depth:t,entry:c,getLabel:n,hasPassword:d,key:l,nest:a,renderValue:m})},"form-summary-entry-".concat(l))),a&&t<u&&f.push(j({depth:t+1,entries:s,getEntryLabel:n,hasPassword:d,listKey:l,maxDepth:u,renderEntry:h,renderEntryValue:m,skip:v}))});let p="form-summary-list-".concat(null!=c?c:"root");return(0,r.jsx)(s.Z,{dense:!0,disablePadding:!0,...null==a?void 0:a.call(null,{depth:t,entries:l,key:c}),children:f},p)};t.Z=e=>{let{entries:t,getEntryLabel:l=e=>{let{cap:t,key:l}=e;return t(l)},getListProps:r,getListItemProps:n,hasPassword:i=!1,maxDepth:s=3,renderEntry:a=v,renderEntryValue:o=function(e){for(var t=arguments.length,l=Array(t>1?t-1:0),r=1;r<t;r++)l[r-1]=arguments[r];return e(...l)},skip:d=function(e){for(var t=arguments.length,l=Array(t>1?t-1:0),r=1;r<t;r++)l[r-1]=arguments[r];return e(...l)}}=e;return j({entries:t,getEntryLabel:l,getListProps:r,getListItemProps:n,hasPassword:i,maxDepth:s,renderEntry:a,renderEntryValue:o,skip:d})}},61347:function(e,t,l){"use strict";l.d(t,{w:function(){return o}});var r=l(77527),n=l(55730),i=l(42048),s=l(73490),a=l(39971);let o={draggable:"".concat("DragDataGrid","-draggable")},d=(0,r.ZP)(i._)({color:a.s7,["& .".concat(n.Z.root)]:{color:"inherit"},["& .".concat(s._.cell)]:{"&:focus":{outline:"none"},"&:focus-within":{outline:"none"}},["& .".concat(s._.row)]:{["&.".concat(o.draggable,":hover")]:{cursor:"grab",["& .".concat(s._.cell," p")]:{cursor:"auto"}}}});t.Z=d},37600:function(e,t,l){"use strict";var r=l(85893),n=l(77527),i=l(33466),s=l(37906),a=l(67294),o=l(39971),d=l(18766);let c=(0,n.ZP)(i.Z)({["& .".concat(s.Z.paper)]:{backgroundColor:o.s7}});t.Z=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];let[n]=t,{children:i,getItemDisabled:s,items:o={},muiMenuProps:u,onItemClick:h,open:m,renderItem:v}=n,x=(0,a.useMemo)(()=>Object.entries(o),[o]),j=(0,a.useMemo)(()=>x.map(e=>{let[t,l]=e;return(0,r.jsx)(d.Z,{disabled:null==s?void 0:s.call(null,t,l),onClick:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==h?void 0:h.call(null,t,l,...r)},children:null==v?void 0:v.call(null,t,l)},t)}),[s,h,x,v]);return(0,r.jsx)(c,{open:m,...u,children:i||j})}},52257:function(e,t,l){"use strict";var r=l(85893),n=l(90642),i=l(13435),s=l(58219),a=l(39971),o=l(17512),d=l(23852),c=l(37628);let u=e=>{let{id:t,label:l,inputWithLabelProps:u,messageBoxProps:h,onChange:m,selectItems:v,selectWithLabelProps:x,value:j}=e;return(0,r.jsxs)(n.Z,{children:[(0,r.jsxs)(n.Z,{sx:{display:"flex",flexDirection:"row","& > :first-child":{flexGrow:1},"& > :not(:last-child)":{marginRight:".5em"},["&:hover\n          .".concat(i.Z.root,"\n          .").concat(s.Z.root,"\n          .").concat(s.Z.notchedOutline)]:{borderColor:a.s7}},children:[(0,r.jsx)(d.Z,{id:t,label:l,onChange:m,value:j,...u}),(0,r.jsx)(c.Z,{formControlProps:{fullWidth:!1,sx:{minWidth:"min-content"}},id:"".concat(t,"-nested-select"),selectItems:v,...x})]}),(0,r.jsx)(o.Z,{...h})]})};u.defaultProps={inputWithLabelProps:void 0,messageBoxProps:void 0,selectWithLabelProps:void 0},t.Z=u},92214:function(e,t,l){"use strict";var r=l(85893),n=l(8506);t.Z=e=>{let{children:t}=e;return(0,r.jsxs)(n.ZP,{columns:{lg:8,xs:1},container:!0,children:[(0,r.jsx)(n.ZP,{item:!0,xs:1}),(0,r.jsx)(n.ZP,{item:!0,lg:6,xs:1,children:t}),(0,r.jsx)(n.ZP,{item:!0,xs:1})]})}},16562:function(e,t,l){"use strict";var r=l(85893),n=l(77527),i=l(50385),s=l(13539),a=l(67294),o=l(39971),d=l(57882);let c=(0,n.ZP)(i.Z)({height:"3.5em",marginLeft:0,width:"100%"});t.Z=e=>{let{baseInputProps:t,checked:l,formControlLabelProps:n,id:i,label:u,name:h,onChange:m,switchProps:v}=e,x=(0,a.useMemo)(()=>"string"==typeof u?(0,r.jsx)(d.Ac,{inheritColour:!0,color:"".concat(o.s7,"AF"),children:u}):(0,r.jsx)(r.Fragment,{children:u}),[u]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c,{componentsProps:{typography:{flexGrow:1}},control:(0,r.jsx)(s.Z,{checked:l,edge:"end",name:h,onChange:m,...v}),label:x,labelPlacement:"start",...n}),(0,r.jsx)("input",{checked:l,hidden:!0,id:i,readOnly:!0,...t})]})}},19166:function(e,t,l){"use strict";var r=l(85893),n=l(77527),i=l(58918),s=l(80483),a=l(67294),o=l(39971),d=l(57882);let c=(0,n.ZP)(i.Z)({borderRadius:o.n_,color:o.s7,padding:".4em .8em",textTransform:"none",["&.".concat(s.Z.selected)]:{color:o.Ej}});t.Z=e=>{let{label:t,...l}=e,n=(0,a.useMemo)(()=>"string"==typeof t?(0,r.jsx)(d.Ac,{inheritColour:!0,children:t}):t,[t]);return(0,r.jsx)(c,{label:n,...l})}},17428:function(e,t,l){"use strict";var r=l(85893),n=l(90642),i=l(67294);t.Z=e=>{let{changingTabId:t,children:l,retain:s=!1,tabId:a}=e,o=(0,i.useMemo)(()=>t===a,[t,a]),d=(0,i.useMemo)(()=>s?(0,r.jsx)(n.Z,{sx:{display:o?"initial":"none"},children:l}):o&&l,[l,o,s]);return(0,r.jsx)(r.Fragment,{children:d})}},22143:function(e,t,l){"use strict";var r=l(85893),n=l(77527),i=l(14221),s=l(93465),a=l(80483),o=l(18745),d=l(89540),c=l(67294),u=l(39971);let h="1.8em",m=(0,n.ZP)(i.Z)({minHeight:"1em",["&.".concat(s.Z.vertical)]:{minHeight:h,["& .".concat(a.Z.root)]:{alignItems:"flex-start",minHeight:h,paddingLeft:"2em"},["& .".concat(s.Z.indicator)]:{right:"initial"}},["& .".concat(a.Z.root)]:{minHeight:"1em"},["& .".concat(s.Z.indicator)]:{backgroundColor:u.Ej,borderRadius:u.n_}});t.Z=e=>{let{orientation:t,variant:l="fullWidth",...n}=e,i=(0,o.Z)(),s=(0,c.useCallback)(e=>i.breakpoints.up(e),[i]),a=(0,d.Z)(s("xs")),u=(0,d.Z)(s("sm")),h=(0,d.Z)(s("md")),v=(0,d.Z)(s("lg")),x=(0,d.Z)(s("xl")),j=(0,c.useMemo)(()=>[["xs",a],["sm",u],["md",h],["lg",v],["xl",x]],[v,h,u,x,a]),f=(0,c.useMemo)(()=>{let e;return"object"==typeof t?j.some(l=>{let[r,n]=l;return n&&t[r]&&(e=t[r]),!n}):e=t,e},[j,t]);return(0,r.jsx)(m,{orientation:f,variant:l,...n})}},40657:function(e,t,l){"use strict";var r=l(85893),n=l(67294),i=l(47177),s=l(29873);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:t="",content:l="",titleText:a="",...o}={}}=e,d=(0,n.useRef)(null),[c,u]=(0,n.useState)({actionProceedText:t,content:l,titleText:a}),h=(0,n.useCallback)(e=>u(t=>{let{loading:l,...r}=t;return{...r,loading:e}}),[]),m=(0,n.useCallback)(e=>{var t,l;return null==d?void 0:null===(l=d.current)||void 0===l?void 0:null===(t=l.setOpen)||void 0===t?void 0:t.call(null,e)},[]),v=(0,n.useCallback)((e,t)=>u({actionProceedText:"",content:(0,r.jsx)(s.Z,{...t}),showActionArea:!1,showClose:!0,titleText:e}),[]);return{confirmDialog:(0,n.useMemo)(()=>(0,r.jsx)(i.Z,{...o,...c,ref:d}),[c,o]),confirmDialogRef:d,setConfirmDialogLoading:h,setConfirmDialogOpen:m,setConfirmDialogProps:u,finishConfirm:v}}},2094:function(e,t,l){"use strict";l.d(t,{Z:function(){return j}});var r=l(20512),n=l(18446),i=l.n(n),s=l(13218),a=l.n(s),o=l(47037),d=l.n(o),c=l(67294),u=l(23279),h=l.n(u),m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{wait:l=500,...r}=t;return h()(e,l,r)},v=l(46671);let x=(e,t,l)=>{let[r,...n]=d()(t)?t.split("."):t;if(!(r in e))return!1;let s=e[r],o=l[r];return a()(s)&&a()(o)&&n.length?x(s,n,o):!i()(s,o)};var j=e=>{let[t,l]=(0,c.useState)({}),[n,i]=(0,c.useState)(!1),s=(0,r.TA)({...e}),a=(0,c.useMemo)(()=>{let e=m(function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];s.handleChange(...t),i(!1)});return function(){for(var t=arguments.length,n=Array(t),s=0;s<t;s++)n[s]=arguments[s];i(!0);let[a]=n;if(!d()(a)){let e=a.target?a.target:a.currentTarget;l(t=>(0,r.tP)(t,e.name,!0))}e(...n)}},[s.handleChange]),o=(0,c.useCallback)(e=>(0,r.u9)(t,e),[t]),u=(0,c.useCallback)(e=>x(s.values,e,s.initialValues),[s.initialValues,s.values]),h=(0,c.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(l=>(0,r.tP)(l,e,t))},[]),j=(0,c.useMemo)(()=>n||!s.dirty||!s.isValid||s.isValidating||s.isSubmitting,[n,s.dirty,s.isSubmitting,s.isValid,s.isValidating]),f=(0,c.useMemo)(()=>(0,v.Z)(s.errors,{skip:e=>!o(e)}),[s.errors,o]);return{disabledSubmit:j,formik:s,formikErrors:f,getFieldChanged:o,getFieldIsDiff:u,handleChange:a,setFieldChanged:h}}},4615:function(e,t,l){"use strict";l.d(t,{k:function(){return r}});let r=["B","KiB","MiB","GiB","TiB"].map(e=>({value:e}))},72094:function(e,t){"use strict";t.Z=(e,t,l)=>{let r;let{query:n}=e;if(void 0===l){let{[t]:e,...l}=n;r=l}else r={...n,[t]:l};return r}},83688:function(e,t,l){"use strict";var r=l(54743),n=l(85893);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"}),"Fullscreen")},55751:function(e,t,l){"use strict";var r=l(54743),n=l(85893);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M20 5H4c-1.1 0-1.99.9-1.99 2L2 17c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-9 3h2v2h-2V8zm0 3h2v2h-2v-2zM8 8h2v2H8V8zm0 3h2v2H8v-2zm-1 2H5v-2h2v2zm0-3H5V8h2v2zm9 7H8v-2h8v2zm0-4h-2v-2h2v2zm0-3h-2V8h2v2zm3 3h-2v-2h2v2zm0-3h-2V8h2v2z"}),"Keyboard")},86142:function(e,t,l){"use strict";var r=l(54743),n=l(85893);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert")},37737:function(e,t,l){"use strict";var r=l(54743),n=l(85893);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M13 3h-2v10h2V3zm4.83 2.17-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNew")},10617:function(e,t,l){"use strict";var r=l(54743),n=l(85893);t.Z=(0,r.Z)((0,n.jsx)("path",{d:"M13 3h-2v10h2V3zm4.83 2.17-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNewOutlined")},32602:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{default:function(){return a},noSSR:function(){return s}});let r=l(38754);l(85893),l(67294);let n=r._(l(35491));function i(e){return{default:(null==e?void 0:e.default)||e}}function s(e,t){return delete t.webpack,delete t.modules,e(t)}function a(e,t){let l=n.default,r={loading:e=>{let{error:t,isLoading:l,pastDelay:r}=e;return null}};e instanceof Promise?r.loader=()=>e:"function"==typeof e?r.loader=e:"object"==typeof e&&(r={...r,...e});let a=(r={...r,...t}).loader;return(r.loadableGenerated&&(r={...r,...r.loadableGenerated},delete r.loadableGenerated),"boolean"!=typeof r.ssr||r.ssr)?l({...r,loader:()=>null!=a?a().then(i):Promise.resolve(i(()=>null))}):(delete r.webpack,delete r.modules,s(l,r))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return r}});let r=l(38754)._(l(67294)).default.createContext(null)},35491:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h}});let r=l(38754)._(l(67294)),n=l(1159),i=[],s=[],a=!1;function o(e){let t=e(),l={loading:!0,loaded:null,error:null};return l.promise=t.then(e=>(l.loading=!1,l.loaded=e,e)).catch(e=>{throw l.loading=!1,l.error=e,e}),l}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function c(e){return function(e,t){let l=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),i=null;function o(){if(!i){let t=new d(e,l);i={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return i.promise()}if(!a){let e=l.webpack?l.webpack():l.modules;e&&s.push(t=>{for(let l of e)if(t.includes(l))return o()})}function c(e,t){!function(){o();let e=r.default.useContext(n.LoadableContext);e&&Array.isArray(l.modules)&&l.modules.forEach(t=>{e(t)})}();let s=r.default.useSyncExternalStore(i.subscribe,i.getCurrentValue,i.getCurrentValue);return r.default.useImperativeHandle(t,()=>({retry:i.retry}),[]),r.default.useMemo(()=>{var t;return s.loading||s.error?r.default.createElement(l.loading,{isLoading:s.loading,pastDelay:s.pastDelay,timedOut:s.timedOut,error:s.error,retry:i.retry}):s.loaded?r.default.createElement((t=s.loaded)&&t.default?t.default:t,e):null},[e,s])}return c.preload=()=>o(),c.displayName="LoadableComponent",r.default.forwardRef(c)}(o,e)}function u(e,t){let l=[];for(;e.length;){let r=e.pop();l.push(r(t))}return Promise.all(l).then(()=>{if(e.length)return u(e,t)})}c.preloadAll=()=>new Promise((e,t)=>{u(i).then(e,t)}),c.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let l=()=>(a=!0,t());u(s,e).then(l,l)})),window.__NEXT_PRELOADREADY=c.preloadReady;let h=c},68317:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return e0}});var r=l(85893),n=l(77527),i=l(90642),s=l(9008),a=l.n(s),o=l(11163),d=l(67294),c=l(45842),u=l(25436),h=l(8506),m=l(82092),v=l(65375),x=l(54743),j=(0,x.Z)((0,r.jsx)("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"}),"ArrowUpward"),f=(0,x.Z)((0,r.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),p=l(48403),g=l.n(p),b=l(5387),Z=l(66389),y=l(76740),P=l(11100),w=function(e,t,l,n,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},{setSubmitting:a}=t,{buildRequestBody:o,buildSummary:d,onSuccess:c}=s,u=null==d?void 0:d.call(null,e);l.confirm.prepare({actionProceedText:"Save",content:(0,r.jsx)(y.Z,{entries:null!=u?u:e}),onCancelAppend:()=>a(!1),onProceedAppend:()=>{var t;l.confirm.loading(!0);let i=null==o?void 0:o.call(null,e,u);Z.Z.put(n(),null!==(t=null!=i?i:u)&&void 0!==t?t:e).then(()=>{l.confirm.finish("Success",{children:(0,r.jsx)(r.Fragment,{children:"Successfully registered server update job"})}),null==c||c.call(null),l.add.open(!1),l.edit.open(!1)}).catch(e=>{let t=(0,P.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:["Failed to register server update job. ",t.children]}),l.confirm.finish("Error",t),a(!1)})},titleText:i()}),l.confirm.open(!0)},k=l(45328),_=l(73490),C=l(39971),S=l(61347);let M=(0,n.ZP)(S.Z)({["& .".concat(_._.row)]:{"&:hover":{cursor:"pointer"},"&.Mui-selected":{[".".concat(_._.cell,":first-child")]:{borderLeft:"thick solid ".concat(C.Ej)}},[".".concat(_._.cell,":first-child")]:{borderLeft:"thick solid ".concat(C.s7)}}});var z=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];let[n]=t,{children:i,formik:s,...a}=n;return(0,r.jsx)(h.ZP,{columns:{xs:1,sm:2,md:3},component:"form",container:!0,onSubmit:e=>{e.preventDefault(),s.handleSubmit(e)},spacing:"1em",...a,children:i})},A=l(42050),V=l(90209),I=l(5499),O=e=>{let{detail:t,formDisabled:l,label:n}=e,{data:i}=(0,I.Z)("/job?name=".concat(t.uuid,"::update"),{refreshInterval:2e3}),s=(0,d.useMemo)(()=>!i||l||Object.keys(i).length>0,[l,i]);return i?(0,r.jsx)(A.Z,{actions:[{background:"blue",children:n,disabled:s,type:"submit"}]}):(0,r.jsx)(V.Z,{mt:0})},D=l(57882),F=l(2094),R=e=>{let{detail:t,tools:l}=e,[n,i]=(0,d.useState)(),s=(0,d.useMemo)(()=>{let[,...e]=t.devices.diskOrderBy.boot;return e},[t.devices.diskOrderBy.boot]),{disabledSubmit:a,formik:o}=(0,F.Z)({initialValues:{order:s},onSubmit:(e,r)=>{w(e,r,l,()=>"/server/".concat(t.uuid,"/set-boot-order"),()=>"Set boot order?",{buildSummary:e=>({order:e.order.map(e=>{let{[e]:{target:{dev:l}}}=t.devices.disks;return l})})})}}),c=(0,d.useMemo)(()=>({order:"order"}),[]),u=(0,d.useMemo)(()=>void 0===n?-1:o.values.order.indexOf(n),[o.values.order,n]),m=(0,d.useMemo)(()=>u<1,[u]),v=(0,d.useMemo)(()=>{let e=o.values.order.length-1;return u<0||u>=e},[o.values.order.length,u]),x=(0,d.useMemo)(()=>o.values.order.map(e=>{let{[e]:{device:l,source:{dev:{path:r=""},file:{path:n=""}},target:{dev:i}}}=t.devices.disks;return{dev:i,index:e,name:l,source:r||n}}),[t.devices.disks,o.values.order]),p=(0,d.useMemo)(()=>[{field:"name",flex:0,headerName:"Name",renderCell:e=>{let{value:t}=e,l=t;return/cdrom/.test(t)&&(l="optical"),l=g()(l)},sortable:!1},{field:"dev",flex:0,headerName:"Device",renderCell:e=>{let{value:t}=e;return(0,r.jsx)(D.$_,{noWrap:!0,children:t})},sortable:!1},{field:"source",flex:1,headerName:"Source",renderCell:e=>{let{value:t}=e;return(0,r.jsx)(D.$_,{noWrap:!0,textOverflow:"ellipsis",children:t})},sortable:!1}],[]);return(0,r.jsxs)(z,{formik:o,children:[(0,r.jsx)(h.ZP,{item:!0,alignSelf:"center",children:(0,r.jsxs)(b.Z,{spacing:".6em",children:[(0,r.jsx)(k.Z,{disabled:m,onClick:()=>{let{order:e}=o.values;if(m)return;let t=u-1,{[t]:l,[u]:r}=e,n=[...e];n.splice(t,2,r,l),o.setFieldValue(c.order,n,!0)},children:(0,r.jsx)(j,{fontSize:"small"})}),(0,r.jsx)(k.Z,{disabled:v,onClick:()=>{let{order:e}=o.values;if(v)return;let t=u+1,{[u]:l,[t]:r}=e,n=[...e];n.splice(u,2,r,l),o.setFieldValue(c.order,n,!0)},children:(0,r.jsx)(f,{fontSize:"small"})})]})}),(0,r.jsx)(h.ZP,{item:!0,flexGrow:1,children:(0,r.jsx)(M,{autoHeight:!0,columns:p,disableColumnMenu:!0,getRowId:e=>e.index,hideFooter:!0,onSelectionModelChange:e=>{let[t]=e;i(Number(t))},rows:x})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:t,formDisabled:a,label:"Save"})})]})},L=l(18050),N=l(23852),T=l(16310),W=l(48313);let E=BigInt(104857600);var B=e=>T.Ry({size:T.nK().when(["storage"],(t,l)=>{let[r]=t,n=null==e?void 0:e.storageGroups[r];return n?(0,W.r)({max:n.free,min:E}):l}),storage:(0,W.uI)()}),G=e=>T.Ry({bridge:T.Z_().required(),mac:(0,W.Cm)().notOneOf([...e.devices.interfaces.map(e=>e.mac.address),...Object.values(e.bridges).map(e=>e.mac)],"${path} already exists"),model:T.Z_().nullable()});let H=BigInt(65536);var q=e=>{let{available:t}=e;return T.Ry({size:(0,W.r)({max:t,min:H})})},U=(e,t)=>T.Ry({name:T.Z_().min(1).max(16).matches(/^[\w-]+$/,{message:"${path} can only contain alphanumeric, hyphen, and underscore characters"}).notOneOf(Object.values(t).filter(t=>e.uuid!==t.uuid).map(e=>e.name),"${path} already exists").required()});let $=T.Ry({file:(0,W.uI)().nullable()}),J=T.Ry({cores:T.Rx().min(1).required(),sockets:T.Rx().min(1).required()}),K=T.Ry({after:T.Z_(),delay:T.Rx().min(0)});var X=l(12823);let Q=e=>{let{cpu:t,detail:l,tools:n}=e,{topology:i}=l.cpu,{disabledSubmit:s,formik:a,formikErrors:o,handleChange:c}=(0,F.Z)({initialValues:{clusters:String(i.clusters),cores:String(i.cores),dies:String(i.dies),sockets:String(i.sockets),threads:String(i.threads)},onSubmit:(e,t)=>{w(e,t,n,()=>"/server/".concat(l.uuid,"/set-cpu"),()=>"Set CPU?",{buildSummary:e=>({cores:Number(e.cores),sockets:Number(e.sockets)})})},validationSchema:J}),u=(0,d.useMemo)(()=>({cores:"cores",sockets:"sockets"}),[]);return(0,r.jsxs)(z,{formik:a,children:[(0,r.jsxs)(h.ZP,{item:!0,width:"100%",children:[(0,r.jsxs)(D.Ac,{children:["Model: ",Object.values(t.hosts)[0].model]}),(0,r.jsxs)(D.Ac,{children:["Available cores: ",t.cores]})]}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(N.Z,{id:u.cores,label:"Cores",name:u.cores,onChange:c,required:!0,value:a.values.cores})})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(N.Z,{id:u.sockets,label:"Sockets",name:u.sockets,onChange:c,required:!0,value:a.values.sockets})})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:o})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:l,formDisabled:s,label:"Save"})})]})};var Y=e=>{let{detail:t}=e,{data:l}=(0,I.Z)("/anvil/".concat(t.anvil.uuid,"/cpu"),{refreshInterval:5e3});return l?(0,r.jsx)(Q,{cpu:l,...e}):(0,r.jsx)(V.Z,{mt:0})},ee=(0,x.Z)((0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"}),"Album"),et=(0,x.Z)((0,r.jsx)("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"}),"Expand"),el=l(45036),er=l(18541),en=l(29873),ei=l(53839),es=l(54490),ea=l(4615),eo=l(60665),ed=l(41373),ec=l(52257),eu=l(37628);let eh=[...ea.k,{displayValue:"%",value:"percent"}];var em=e=>{var t;let{device:l,detail:n,tools:i}=e,s=(0,d.useMemo)(()=>n.devices.disks.find(e=>e.target.dev===l),[n.devices.disks,l]),{altData:a}=(0,I.Z)("/anvil/".concat(n.anvil.uuid,"/store"),{mod:eo.Z,refreshInterval:5e3}),{disabledSubmit:o,formik:c,formikErrors:u,handleChange:m}=(0,F.Z)({initialValues:{size:{unit:"GiB",value:"0"},storage:null!==(t=null==s?void 0:s.source.dev.sg)&&void 0!==t?t:""},onSubmit:(e,t)=>{w(e,t,i,()=>"/server/".concat(n.uuid,"/").concat(l?"grow-disk":"add-disk"),()=>"Add disk on ".concat(null==a?void 0:a.storageGroups[e.storage].name,"?"),{buildSummary:e=>{let{size:t,storage:r}=e,{unit:n,value:i}=t,s=/percent/i.test(n)?"%":n;return l?{device:l,size:"".concat(i).concat(s)}:{size:"".concat(i).concat(s),storage:null==a?void 0:a.storageGroups[r].name}},buildRequestBody:(e,t)=>((null==t?void 0:t.storage)&&(t.storage=e.storage),t)})},validationSchema:B(a)}),v=(0,d.useMemo)(()=>{let e="size";return{size:e,storage:"storage",unit:"".concat(e,".unit"),value:"".concat(e,".value")}},[]),x=(0,d.useMemo)(()=>a&&Object.values(a.storageGroups).map(e=>({displayValue:e.name,value:e.uuid})),[a]),j=(0,d.useMemo)(()=>{if(a)return a.storageGroups[c.values.storage]},[c.values,a]),f=(0,d.useMemo)(()=>{let{unit:e}=c.values.size;return"percent"===e?"GiB":e},[c.values.size]),p=(0,d.useMemo)(()=>{if(!j)return;let e={toUnit:f};return{free:(0,es._d)(j.free,e),size:(0,es._d)(j.size,e),used:(0,es._d)(j.used,e)}},[f,j]),g=(0,d.useMemo)(()=>{if(!s)return;let{name:e="",size:t}=s.source.dev.lv;if(t)return{name:e,size:(0,es._d)(t,{toUnit:f}),zero:/_0$/.test(e)}},[f,s]),b=(0,d.useMemo)(()=>"shut off"!==n.state&&(null==g?void 0:g.zero)||o,[n.state,null==g?void 0:g.zero,o]),Z=(0,d.useMemo)(()=>{if("shut off"!==n.state&&(null==g?void 0:g.zero))return(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(en.Z,{children:"A server must be shut off in order to grow its disk 0."})})},[n.state,null==g?void 0:g.zero]),y=(0,d.useMemo)(()=>p&&a&&(0,r.jsxs)(h.ZP,{item:!0,width:"100%",children:[(0,r.jsxs)(D.Ac,{children:["Storage group: ",(0,r.jsx)(D.Q0,{noWrap:!0,children:null==j?void 0:j.name})]}),(0,r.jsx)(ed.Tj,{storages:a,target:c.values.storage}),(0,r.jsxs)(h.ZP,{container:!0,children:[(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsxs)(D.Ac,{children:["Used: ",p.used]})}),(0,r.jsx)(h.ZP,{item:!0,textAlign:"center",xs:!0,children:(0,r.jsxs)(D.Ac,{fontWeight:400,children:["Free: ",p.free]})}),(0,r.jsx)(h.ZP,{item:!0,textAlign:"right",children:(0,r.jsxs)(D.Ac,{children:["Total: ",p.size]})})]})]}),[p,c.values.storage,null==j?void 0:j.name,a]),P=(0,d.useMemo)(()=>l&&(0,r.jsx)(h.ZP,{item:!0,textAlign:"center",width:{xs:"100%",sm:"fit-content"},children:(0,r.jsx)(ei.Z,{sx:{color:C.s7}})}),[l]);return x?(0,r.jsxs)(z,{alignItems:"center",formik:c,children:[Z,y,(0,r.jsx)(h.ZP,{item:!0,sm:!0,xs:1,children:l?(0,r.jsxs)(h.ZP,{alignItems:"center",container:!0,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:!0,children:[(0,r.jsxs)(D.Ac,{children:["Disk: ",(0,r.jsx)(D.Q0,{noWrap:!0,children:l})]}),(0,r.jsxs)(D.Ac,{children:["(",(0,r.jsxs)(D.Q0,{children:["volume=",null==g?void 0:g.name]}),")"]})]}),(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(D.Ac,{fontWeight:400,noWrap:!0,children:null==g?void 0:g.size})})]}):(0,r.jsx)(eu.Z,{id:v.storage,label:"Storage group",name:v.storage,onChange:c.handleChange,selectItems:x,selectProps:{disabled:!!l},value:c.values.storage})}),P,(0,r.jsx)(h.ZP,{item:!0,sm:!0,xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(ec.Z,{id:"server-disk-input",label:"Disk size",inputWithLabelProps:{id:v.value,inputProps:{disabled:!c.values.storage},name:v.value},onChange:m,selectItems:eh,selectWithLabelProps:{id:v.unit,name:v.unit,onChange:e=>{let t=e.target.value,{unit:l,value:r}=c.values.size;if([t,l].includes("percent")){c.setFieldValue(v.size,{unit:t,value:"0"},!0);return}let n=(0,es.Gh)(r,{fromUnit:l,precision:"B"===t?0:void 0,toUnit:t});if(!n)return;let{value:i}=n;c.setFieldValue(v.size,{unit:t,value:i},!0)},selectProps:{disabled:!c.values.storage},value:c.values.size.unit},value:c.values.size.value})})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:u})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:n,formDisabled:b,label:"Save"})})]}):(0,r.jsx)(V.Z,{mt:0})},ev=(0,x.Z)((0,r.jsx)("path",{d:"M5 17h14v2H5zm7-12L5.33 15h13.34z"}),"Eject"),ex=l(48801);let ej=e=>{let{fileUuid:t}=e,{data:l}=(0,I.Z)("/file/".concat(t));if(!l)return(0,r.jsx)(V.Z,{mt:0});let{checksum:n,path:s,size:a}=l;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(D.$_,{children:s.full}),(0,r.jsx)(D.$_,{children:(0,es._d)(a,{toUnit:"ibyte"})}),(0,r.jsxs)(D.$_,{children:["md5: ",n]})]})};var ef=e=>{var t;let{detail:l,device:n,tools:i}=e,s=(0,d.useMemo)(()=>l.devices.disks.find(e=>e.target.dev===n),[l.devices.disks,n]),{data:a}=(0,I.Z)("/file?name=".concat(l.anvil.name,"&type=iso"),{refreshInterval:5e3}),{disabledSubmit:o,formik:c,formikErrors:u}=(0,F.Z)({initialValues:{file:null!==(t=null==s?void 0:s.source.file.uuid)&&void 0!==t?t:null},onSubmit:(e,t)=>{w(e,t,i,()=>"/server/".concat(l.uuid,"/change-iso"),()=>"".concat(e.file?"Insert":"Eject"," ISO?"),{buildSummary:e=>{var t;let{file:l}=e,r=null==s?void 0:s.target.dev;return l?{device:r,iso:null==a?void 0:null===(t=a[l])||void 0===t?void 0:t.name}:{device:r}},buildRequestBody:(e,t)=>((null==t?void 0:t.iso)&&e.file&&(t.iso=e.file),t)})},validationSchema:$}),m=(0,d.useMemo)(()=>({file:"file"}),[]),v=(0,d.useMemo)(()=>a&&Object.values(a),[a]),x=(0,d.useMemo)(()=>{if(!a)return;let{file:e}=c.values;if(e)return a[e]},[c.values,a]);return v?(0,r.jsxs)(z,{formik:c,children:[(0,r.jsx)(h.ZP,{item:!0,xs:!0,children:(0,r.jsx)(ex.Z,{disableClearable:!0,extendRenderInput:e=>{e.inputLabelProps={...e.inputLabelProps,shrink:!0},e.inputProps={...e.inputProps,notched:!0,placeholder:"Empty slot"}},getOptionLabel:e=>e.name,id:m.file,isOptionEqualToValue:(e,t)=>e.uuid===(null==t?void 0:t.uuid),label:"ISO (optical disk)",noOptionsText:"No matching ISO",onChange:(e,t)=>{c.setFieldValue(m.file,t?t.uuid:null,!0)},openOnFocus:!0,options:v,renderOption:(e,t)=>{let{name:l,uuid:n}=t;return(0,d.createElement)("li",{...e,key:"iso-op-".concat(n)},(0,r.jsx)(D.Ac,{inheritColour:!0,children:l}))},value:x})}),(0,r.jsx)(h.ZP,{item:!0,alignSelf:"center",children:(0,r.jsx)(k.Z,{onClick:()=>{c.setFieldValue(m.file,null,!0)},size:"small",children:(0,r.jsx)(ev,{})})}),c.values.file&&(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(ej,{fileUuid:c.values.file})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:u})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:l,formDisabled:o,label:"Save"})})]}):(0,r.jsx)(V.Z,{mt:0})},ep=e=>{let{detail:t,tools:l}=e,n=(0,d.useRef)(null),i=(0,d.useRef)(null),s=(0,d.useRef)(null),[a,o]=(0,d.useState)(),c=(0,d.useMemo)(()=>t.devices.disks.reduce((e,t)=>(e[t.target.dev]=t,e),{}),[t.devices.disks]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h.ZP,{container:!0,spacing:"1em",children:[(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(en.Z,{children:'Disk operations "shrink" or "delete" must be done through commands to avoid data loss.'})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(er.Z,{allowAddItem:!0,header:!0,listEmpty:"No disk(s) found.",listItems:c,onAdd:()=>{o(void 0),l.add={open:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===(e=n.current)||void 0===e?void 0:e.setOpen(t)}},l.add.open(!0)},renderListItem:(e,t)=>{let{device:n,source:{dev:{path:a=""},file:{path:d=""}},target:{dev:c}}=t,u=n;return/cd/.test(n)&&(u="optical"),(0,r.jsxs)(h.ZP,{alignItems:"center",columnGap:"1em",container:!0,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:!0,children:[(0,r.jsxs)(b.Z,{columnSpacing:0,row:!0,rowSpacing:".5em",children:[(0,r.jsxs)(D.Ac,{noWrap:!0,children:[g()(u),":"]})," ",(0,r.jsx)(D.$_,{noWrap:!0,children:e})]}),(0,r.jsx)(D.$_,{noWrap:!0,children:a||d})]}),"optical"===u&&(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(k.Z,{onClick:()=>{o(c),l.edit={open:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===(e=s.current)||void 0===e?void 0:e.setOpen(t)}},l.edit.open(!0)},size:"small",children:(0,r.jsx)(ee,{})})}),"disk"===u&&(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(k.Z,{onClick:()=>{o(c),l.edit={open:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===(e=i.current)||void 0===e?void 0:e.setOpen(t)}},l.edit.open(!0)},size:"small",children:(0,r.jsx)(et,{sx:{rotate:"90deg"}})})})]})}})})]}),(0,r.jsx)(el.Js,{header:"Add disk",ref:n,showClose:!0,wide:!0,children:(0,r.jsx)(em,{...e})}),(0,r.jsx)(el.Js,{header:"".concat(a,": grow disk"),ref:i,showClose:!0,wide:!0,children:a&&(0,r.jsx)(em,{device:a,...e})}),(0,r.jsx)(el.Js,{header:"".concat(a,": insert or eject ISO"),ref:s,showClose:!0,wide:!0,children:a&&(0,r.jsx)(ef,{device:a,...e})})]})},eg=l(13539),eb=(e,t,l,n)=>{var i,s;let{body:a,messages:o,method:d="put",onFail:c,onSuccess:u,dangerous:h=/delete/i.test(null!==(i=null==o?void 0:o.proceed)&&void 0!==i?i:"")}=n;e.confirm.prepare({actionProceedText:null!==(s=null==o?void 0:o.proceed)&&void 0!==s?s:"Confirm",onProceedAppend:()=>{e.confirm.loading(!0),Z.Z.request({data:a,method:d,url:t}).then(()=>{e.confirm.finish("Success",{children:null==o?void 0:o.success}),null==u||u.call(null)}).catch(t=>{let l=(0,P.Z)(t);l.children=(0,r.jsxs)(r.Fragment,{children:[null==o?void 0:o.fail," ",l.children]}),e.confirm.finish("Error",l),null==c||c.call(null)})},proceedColour:h?"red":void 0,titleText:l}),e.confirm.open(!0)};let eZ={mac:"auto",model:"e1000e"};var ey=e=>{let{detail:t,tools:l}=e,{disabledSubmit:n,formik:i,formikErrors:s,handleChange:a}=(0,F.Z)({initialValues:{bridge:"",mac:"",model:eZ.model},onSubmit:(e,r)=>{w(e,r,l,()=>"/server/".concat(t.uuid,"/add-interface"),()=>"Add interface?",{buildSummary:e=>{let t={...e};return t.mac||(t.mac=eZ.mac),t},buildRequestBody:(e,t)=>{let l={};return(null==t?void 0:t.bridge)&&(l.bridge=t.bridge),(null==t?void 0:t.mac)&&t.mac!==eZ.mac&&(l.mac=t.mac),(null==t?void 0:t.model)&&t.model!==eZ.model&&(l.model=t.model),l}})},validationSchema:G(t)}),o=(0,d.useMemo)(()=>({bridge:"bridge",mac:"mac",model:"model"}),[]),c=(0,d.useMemo)(()=>Object.values(Object.values(t.bridges).reduce((e,t)=>{let{name:l}=t;return l in e||(e[l]={value:l}),e},{})),[t.bridges]);return(0,r.jsxs)(z,{formik:i,children:[(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(eu.Z,{id:o.bridge,label:"Bridge",name:o.bridge,onChange:i.handleChange,required:!0,selectItems:c,value:i.values.bridge})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(N.Z,{id:o.mac,inputLabelProps:{shrink:!0},inputProps:{notched:!0,placeholder:"Auto generated"},label:"Mac address",name:o.mac,onChange:a,value:i.values.mac})})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(ex.Z,{id:o.model,label:"Model",noOptionsText:"No matching model",onChange:(e,t)=>{i.setFieldValue(o.model,t,!0)},openOnFocus:!0,options:t.libvirt.nicModels,value:i.values.model})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:s})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:t,formDisabled:n,label:"Save"})})]})};let eP={down:"plug-in",up:"unplug"},ew={down:"unplugged",up:"plugged-in"};var ek=e=>{let{detail:t,tools:l}=e,n=(0,d.useRef)(null),i=(0,d.useMemo)(()=>t.devices.interfaces.reduce((e,t)=>(e[t.mac.address]=t,e),{}),[t.devices.interfaces]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.ZP,{container:!0,children:(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(er.Z,{allowAddItem:!0,header:!0,listEmpty:"No server network interface(s) found.",listItems:i,onAdd:()=>{l.add={open:function(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===(e=n.current)||void 0===e?void 0:e.setOpen(t)}},l.add.open(!0)},renderListItem:(e,n)=>{let{link:{state:i},model:{type:s},source:{bridge:a},target:{dev:o}}=n,d="up"===i;return(0,r.jsxs)(h.ZP,{alignItems:"center",columnGap:"1em",container:!0,children:[(0,r.jsxs)(h.ZP,{alignItems:"center",display:"flex",flexDirection:"column",item:!0,minWidth:"5em",children:[(0,r.jsx)(D.KI,{noWrap:!0,children:g()(ew[i])}),(0,r.jsx)(eg.Z,{checked:d,onChange:()=>{let{[i]:n}=eP;eb(l,"/server/".concat(t.uuid,"/set-interface-state"),"".concat(g()(n)," ").concat(o," (").concat(e,")?"),{body:{active:!d,mac:e},messages:{proceed:g()(n),fail:(0,r.jsxs)(r.Fragment,{children:["Failed to register ",n," interface job."]}),success:(0,r.jsxs)(r.Fragment,{children:["Successfully registered ",n," interface job"]})}})}})]}),(0,r.jsxs)(h.ZP,{item:!0,xs:!0,children:[(0,r.jsxs)(b.Z,{xs:"column",md:"row",columnSpacing:0,children:[(0,r.jsxs)(D.$_,{noWrap:!0,children:[o," (",s,")"]}),(0,r.jsx)(m.Z,{flexItem:!0,orientation:"vertical"}),(0,r.jsx)(D.$_,{noWrap:!0,children:e})]}),(0,r.jsx)(D.$_,{children:a})]}),(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsx)(k.Z,{mapPreset:"delete",onClick:()=>{eb(l,"/server/".concat(t.uuid,"/delete-interface"),"Delete ".concat(o," (").concat(e,")?"),{body:{mac:e},messages:{proceed:"Delete",fail:(0,r.jsx)(r.Fragment,{children:"Failed to register delete interface job."}),success:(0,r.jsx)(r.Fragment,{children:"Successfully registered delete interface job"})}})},size:"small",variant:"redcontained"})})]})}})})}),(0,r.jsx)(el.Js,{header:"Add interface",ref:n,showClose:!0,wide:!0,children:(0,r.jsx)(ey,{...e})})]})},e_=l(22700);let eC=e=>{var t,l;let{detail:n,memory:i,tools:s}=e,{disabledSubmit:a,formik:o,formikErrors:c,handleChange:u}=(0,F.Z)({initialValues:{size:{unit:"GiB",value:null!==(l=null===(t=(0,es.Gh)(n.memory.size,{toUnit:"GiB"}))||void 0===t?void 0:t.value)&&void 0!==l?l:"0"}},onSubmit:(e,t)=>{w(e,t,s,()=>"/server/".concat(n.uuid,"/set-memory"),()=>"Set memory?",{buildSummary:e=>{let{unit:t,value:l}=e.size;return{size:"".concat(l).concat(t)}}})},validationSchema:q(i)}),m=(0,d.useMemo)(()=>{let e="size";return{size:e,unit:"".concat(e,".unit"),value:"".concat(e,".value")}},[]),v=(0,d.useMemo)(()=>{let e={toUnit:o.values.size.unit},t=(0,es._d)(i.allocated,e);return{allocated:t,available:(0,es._d)(i.available,e),reserved:(0,es._d)(i.reserved,e),total:(0,es._d)(i.total,e)}},[o.values.size.unit,i.allocated,i.available,i.reserved,i.total]);return(0,r.jsxs)(z,{formik:o,children:[(0,r.jsxs)(h.ZP,{item:!0,width:"100%",children:[(0,r.jsx)(ed._1,{memory:i}),(0,r.jsxs)(h.ZP,{container:!0,children:[(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsxs)(D.Ac,{children:["Allocated: ",v.allocated]})}),(0,r.jsx)(h.ZP,{item:!0,textAlign:"center",xs:!0,children:(0,r.jsxs)(D.Ac,{fontWeight:400,children:["Available: ",v.available]})}),(0,r.jsxs)(h.ZP,{item:!0,textAlign:"right",children:[(0,r.jsxs)(D.Ac,{children:["System: ",v.reserved]}),(0,r.jsxs)(D.Ac,{children:["Total: ",v.total]})]})]})]}),(0,r.jsx)(h.ZP,{item:!0,sm:"auto",xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(ec.Z,{id:"server-memory-input",label:"Memory",inputWithLabelProps:{id:m.value,name:m.value},onChange:u,selectItems:ea.k,selectWithLabelProps:{id:m.unit,name:m.unit,onChange:e=>{let t=e.target.value,{value:l,unit:r}=o.values.size,n=(0,es.Gh)(l,{fromUnit:r,precision:"B"===t?0:void 0,toUnit:t});if(!n)return;let{value:i}=n;o.setFieldValue(m.size,{value:i,unit:t},!0)},value:o.values.size.unit},value:o.values.size.value})})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:c})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:n,formDisabled:a,label:"Save"})})]})};var eS=e=>{let{detail:t}=e,{altData:l}=(0,I.Z)("/anvil/".concat(t.anvil.uuid,"/memory"),{mod:e_.Z,refreshInterval:5e3});return l?(0,r.jsx)(eC,{memory:l,...e}):(0,r.jsx)(V.Z,{mt:0})},eM=l(46194),ez=e=>{let{detail:t,tools:l}=e,{altData:n}=(0,I.Z)("/host?types=node",{mod:e=>Object.values(e).find(e=>{var l,r;return(null===(l=e.anvil)||void 0===l?void 0:l.uuid)===t.anvil.uuid&&e.shortHostName!==(null===(r=t.host)||void 0===r?void 0:r.short)})});return n?t.host?(0,r.jsxs)(h.ZP,{container:!0,spacing:"1em",children:[(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsxs)(D.Ac,{children:["Running on: ",t.host.short]})}),(0,r.jsx)(h.ZP,{item:!0,children:(0,r.jsxs)(eM.Z,{onClick:()=>{eb(l,"/server/".concat(t.uuid,"/migrate"),"Migrate ".concat(t.name," to ").concat(n.shortHostName,"?"),{body:{target:n.shortHostName},messages:{fail:(0,r.jsx)(r.Fragment,{children:"Failed to register migration job."}),proceed:"Migrate",success:(0,r.jsx)(r.Fragment,{children:"Successfully register migration job"})}})},children:["Migrate to ",n.shortHostName]})})]}):(0,r.jsx)(en.Z,{children:"Cannot migrate a shut off server."}):(0,r.jsx)(V.Z,{mt:0})},eA=e=>{let{detail:t,servers:l,tools:n}=e,{disabledSubmit:i,formik:s,formikErrors:a,handleChange:o}=(0,F.Z)({initialValues:{name:t.name},onSubmit:(e,l)=>{w(e,l,n,()=>"/server/".concat(t.uuid,"/rename"),()=>"Rename ".concat(t.name,"?"))},validationSchema:U(t,l)}),c=(0,d.useMemo)(()=>({name:"name"}),[]),u=(0,d.useMemo)(()=>"shut off"!==t.state||i,[t.state,i]);return(0,r.jsxs)(z,{formik:s,children:["shut off"!==t.state&&(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(en.Z,{children:"A server can only be renamed when it's shut off."})}),(0,r.jsx)(h.ZP,{item:!0,sm:"auto",xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(N.Z,{id:c.name,label:"Server name",name:c.name,onChange:o,required:!0,value:s.values.name})})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:a})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:t,formDisabled:u,label:"Save"})})]})},eV=l(16562),eI=e=>{let{detail:t,servers:l,tools:n}=e,{disabledSubmit:i,formik:s,formikErrors:a,handleChange:o}=(0,F.Z)({initialValues:{active:t.start.active,after:t.start.after||"",delay:String(t.start.delay)},onSubmit:(e,r)=>{w(e,r,n,()=>"/server/".concat(t.uuid,"/set-start-dependency"),()=>"Set start dependency?",{buildSummary:e=>{var t;let{active:r,after:n,delay:i}=e;return r?{after:null===(t=l[n])||void 0===t?void 0:t.name,delay:"".concat(i," second(s)")}:{"stay-off":"yes"}},buildRequestBody:e=>{let{active:t,after:l,delay:r}=e;return t&&l?{after:l,delay:Number(r)}:{active:t}}})},validationSchema:K}),c=(0,d.useMemo)(()=>({active:"active",after:"after",delay:"delay"}),[]),u=(0,d.useMemo)(()=>Object.values(l).filter(e=>e.anvil.uuid===t.anvil.uuid&&e.uuid!==t.uuid),[t.anvil.uuid,t.uuid,l]),m=(0,d.useMemo)(()=>u.map(e=>{let{name:t,uuid:l}=e;return{displayValue:t,value:l}}),[u]);return(0,r.jsxs)(z,{formik:s,children:[(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(eu.Z,{id:c.after,label:"Start after",name:c.after,onChange:s.handleChange,selectItems:m,selectProps:{disabled:!s.values.active,onClearIndicatorClick:()=>{s.setFieldValue(c.after,"",!0)}},value:s.values.after})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(X.Z,{input:(0,r.jsx)(N.Z,{id:c.delay,inputProps:{disabled:!s.values.active||""===s.values.after},label:"Delay (seconds)",name:c.delay,onChange:o,value:s.values.delay})})}),(0,r.jsx)(h.ZP,{item:!0,xs:1,children:(0,r.jsx)(eV.Z,{checked:!s.values.active,id:c.active,label:"Stay off",name:c.active,onChange:(e,t)=>{s.setFieldValue(c.active,!t,!0)}})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(L.Z,{count:1,messages:a})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(O,{detail:t,formDisabled:i,label:"Save"})})]})},eO=l(19166),eD=l(17428),eF=l(22143),eR=l(40657);let eL={label:"Boot order",value:"boot-order"},eN={label:"CPU",value:"cpu"},eT={label:"Disks",value:"disks"},eW={label:"General",value:"general"},eE={label:"Interfaces",value:"interfaces"},eB={label:"Memory",value:"memory"},eG={label:"Migration",value:"migration"},eH={label:"Name",value:"name"},eq={label:"Start dependency",value:"start-dependency"},eU=(0,n.ZP)(c.$x)(e=>{let{theme:t}=e;return{width:"100%",[t.breakpoints.up("xs")]:{height:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";return"calc(".concat(e," * 0.6)")}("100vw")},[t.breakpoints.up("sm")]:{height:"6em"},[t.breakpoints.up("md")]:{height:"9em"}}});var e$=e=>{let{slotProps:t,serverUuid:l}=e,[n,i]=(0,d.useState)(eW.value),{data:s,mutate:a}=(0,I.Z)("/server"),{data:o}=(0,I.Z)("/server/".concat(l),{refreshInterval:2e3}),{confirmDialog:u,finishConfirm:x,setConfirmDialogLoading:j,setConfirmDialogOpen:f,setConfirmDialogProps:p}=(0,eR.Z)({initial:{scrollContent:!0,wide:!0}}),g=(0,d.useRef)({add:{open:()=>null},confirm:{finish:x,loading:j,open:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return f(e)},prepare:p},edit:{open:()=>null}});return o&&s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.s_,{children:(0,r.jsxs)(h.ZP,{container:!0,spacing:"1em",children:[(0,r.jsx)(h.ZP,{item:!0,width:{xs:"100%",sm:"14em",md:"20em"},children:(0,r.jsxs)(h.ZP,{columns:1,container:!0,spacing:"1em",children:[(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsx)(c.bC,{server:o,children:(0,r.jsx)(c.MB,{server:o,slots:{screenshotBox:(0,r.jsx)(eU,{})},...null==t?void 0:t.preview})})}),(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsxs)(eF.Z,{onChange:(e,t)=>{i(t),[eG.value,eq.value].includes(t)&&a()},orientation:"vertical",value:n,children:[(0,r.jsx)(eO.Z,{label:eW.label,value:eW.value}),(0,r.jsx)(eO.Z,{disabled:!0,icon:(0,r.jsx)(m.Z,{orientation:"horizontal",sx:{width:"100%"}}),label:""}),(0,r.jsx)(eO.Z,{label:eL.label,value:eL.value}),(0,r.jsx)(eO.Z,{label:eN.label,value:eN.value}),(0,r.jsx)(eO.Z,{label:eT.label,value:eT.value}),(0,r.jsx)(eO.Z,{label:eE.label,value:eE.value}),(0,r.jsx)(eO.Z,{label:eB.label,value:eB.value}),(0,r.jsx)(eO.Z,{label:eG.label,value:eG.value}),(0,r.jsx)(eO.Z,{label:eH.label,value:eH.value}),(0,r.jsx)(eO.Z,{label:eq.label,value:eq.value})]})})]})}),(0,r.jsx)(h.ZP,{display:{xs:"none",sm:"initial"},item:!0,children:(0,r.jsx)(m.Z,{orientation:"vertical"})}),(0,r.jsxs)(h.ZP,{item:!0,xs:!0,children:[(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eW.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eW.label})}),(0,r.jsx)(h.ZP,{container:!0,rowSpacing:"0.4em",children:[{header:"UUID",value:o.uuid},{header:"State",value:o.state},{header:"On node",value:"".concat(o.anvil.name,": ").concat(o.anvil.description)},{header:"On host",value:o.host?o.host.short:"None"}].map(e=>{let{header:t,value:l}=e;return(0,r.jsx)(h.ZP,{item:!0,width:"100%",children:(0,r.jsxs)(h.ZP,{columnSpacing:"1em",container:!0,children:[(0,r.jsx)(h.ZP,{item:!0,width:"10em",children:(0,r.jsx)(D.Ac,{children:t})}),(0,r.jsx)(h.ZP,{item:!0,xs:!0,children:(0,r.jsx)(D.$_,{children:l})})]})},"general-".concat(t))})})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eL.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eL.label})}),(0,r.jsx)(R,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eN.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eN.label})}),(0,r.jsx)(Y,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eT.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eT.label})}),(0,r.jsx)(ep,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eE.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eE.label})}),(0,r.jsx)(ek,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eB.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eB.label})}),(0,r.jsx)(eS,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eG.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eG.label})}),(0,r.jsx)(ez,{detail:o,tools:g.current})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eH.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eH.label})}),(0,r.jsx)(eA,{detail:o,tools:g.current,servers:s})]}),(0,r.jsxs)(eD.Z,{changingTabId:n,tabId:eq.value,children:[(0,r.jsx)(v.V9,{children:(0,r.jsx)(D.z,{children:eq.label})}),(0,r.jsx)(eI,{detail:o,servers:s,tools:g.current})]})]})]})}),u]}):(0,r.jsx)(v.s_,{children:(0,r.jsx)(V.Z,{mt:0})})},eJ=l(92214),eK=l(72094);let eX="Server",eQ={preview:"".concat(eX,"-preview"),fullView:"".concat(eX,"-fullView")},eY=(0,n.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(eQ.preview)]:{width:"25%",height:"100%",[t.breakpoints.down("md")]:{width:"100%"}},["& .".concat(eQ.fullView)]:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center"}}});var e0=()=>{var e;let t=(0,o.useRouter)(),{data:l,error:n,loading:s}=(0,I.Z)("/server"),h=(0,d.useMemo)(()=>{let e;if(!l||!t.isReady)return;let{name:r,uuid:n}=t.query;return r?e=Object.values(l).find(e=>e.name===r):n&&(e=l["string"==typeof n?n:n[0]]),e},[t.isReady,t.query,l]),m=(0,d.useMemo)(()=>{if(!t.isReady)return"";let{view:e}=t.query;return e?"string"==typeof e?e:e[0]:""},[t.isReady,t.query]);if(s)return(0,r.jsxs)("div",{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"Loading..."})}),(0,r.jsx)(u.Z,{}),(0,r.jsx)(eJ.Z,{children:(0,r.jsx)(v.s_,{children:(0,r.jsx)(V.Z,{mt:0})})})]});if(!h)return(0,r.jsxs)("div",{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:"Server?"})}),(0,r.jsx)(u.Z,{}),(0,r.jsx)(eJ.Z,{children:(0,r.jsx)(v.s_,{children:(0,r.jsxs)(en.Z,{children:["Couldn't find server ",t.query.name||t.query.uuid,". ",null==n?void 0:n.message]})})})]});let x={vnc:(0,r.jsx)(i.Z,{className:eQ.fullView,children:(0,r.jsx)(c.SJ,{onClickCloseButton:()=>{let e=(0,eK.Z)(t,"view");t.replace({query:e},void 0,{shallow:!0})},serverUuid:h.uuid,serverName:h.name})})};return(0,r.jsxs)(eY,{children:[(0,r.jsx)(a(),{children:(0,r.jsx)("title",{children:h.name})}),(0,r.jsx)(u.Z,{}),null!==(e=x[m])&&void 0!==e?e:(0,r.jsx)(eJ.Z,{children:(0,r.jsx)(e$,{serverUuid:h.uuid,slotProps:{preview:{onClick:()=>{let e=(0,eK.Z)(t,"view","vnc");t.replace({query:e},void 0,{shallow:!0})}}}})})]})}},5152:function(e,t,l){e.exports=l(32602)}},function(e){e.O(0,[447,256,940,245,84,548,763,731,529,436,542,352,888,774,179],function(){return e(e.s=41171)}),_N_E=e.O()}]);