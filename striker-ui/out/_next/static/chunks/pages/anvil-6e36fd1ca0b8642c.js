(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{72315:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/anvil",function(){return n(38312)}])},42458:function(e,t,n){"use strict";var a=n(85893),o=n(89262),s=n(14440),r=n(77831);let c="Decorator",i={ok:"".concat(c,"-ok"),warning:"".concat(c,"-warning"),error:"".concat(c,"-error"),off:"".concat(c,"-off")},l=(0,o.ZP)(s.Z)({borderRadius:r.n_,height:"100%",width:"1.4em",["&.".concat(i.ok)]:{backgroundColor:r.Ej},["&.".concat(i.warning)]:{backgroundColor:r.Wd},["&.".concat(i.error)]:{backgroundColor:r.hM},["&.".concat(i.off)]:{backgroundColor:r.s7}});t.Z=e=>{let{colour:t,...n}=e;return(0,a.jsx)(l,{...n,className:i[t]})}},62848:function(e,t,n){"use strict";var a=n(67294);t.Z=function(){let{actionProceedText:e="",content:t="",titleText:n="",...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.useState)({actionProceedText:e,content:t,titleText:n,...o})}},14789:function(e,t,n){"use strict";var a=n(74762),o=n(85893);t.Z=(0,a.Z)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert")},42796:function(e,t,n){"use strict";var a=n(74762),o=n(85893);t.Z=(0,a.Z)((0,o.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Sync")},11901:function(e,t,n){"use strict";var a=n(63366),o=n(87462),s=n(67294),r=n(92827),c=n(94780),i=n(41796),l=n(75228),d=n(93067),h=n(59145),u=n(89262),x=n(37649),m=n(85893);let p=["className","color","edge","size","sx"],g=e=>{let{classes:t,edge:n,size:a,color:s,checked:r,disabled:i}=e,d={root:["root",n&&"edge".concat((0,l.Z)(n)),"size".concat((0,l.Z)(a))],switchBase:["switchBase","color".concat((0,l.Z)(s)),r&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},h=(0,c.Z)(d,x.H,t);return(0,o.Z)({},t,h)},v=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.edge&&t["edge".concat((0,l.Z)(n.edge))],t["size".concat((0,l.Z)(n.size))]]}})(e=>{let{ownerState:t}=e;return(0,o.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===t.edge&&{marginLeft:-8},"end"===t.edge&&{marginRight:-8},"small"===t.size&&{width:40,height:24,padding:7,["& .".concat(x.Z.thumb)]:{width:16,height:16},["& .".concat(x.Z.switchBase)]:{padding:4,["&.".concat(x.Z.checked)]:{transform:"translateX(16px)"}}})}),j=(0,u.ZP)(d.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.switchBase,{["& .".concat(x.Z.input)]:t.input},"default"!==n.color&&t["color".concat((0,l.Z)(n.color))]]}})(e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(x.Z.checked)]:{transform:"translateX(20px)"},["&.".concat(x.Z.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(x.Z.checked," + .").concat(x.Z.track)]:{opacity:.5},["&.".concat(x.Z.disabled," + .").concat(x.Z.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(x.Z.input)]:{left:"-100%",width:"300%"}}},e=>{let{theme:t,ownerState:n}=e;return(0,o.Z)({"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==n.color&&{["&.".concat(x.Z.checked)]:{color:(t.vars||t).palette[n.color].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,i.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(x.Z.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(n.color,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,i.$n)(t.palette[n.color].main,.62):(0,i._j)(t.palette[n.color].main,.55))}},["&.".concat(x.Z.checked," + .").concat(x.Z.track)]:{backgroundColor:(t.vars||t).palette[n.color].main}})}),f=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}}),Z=(0,u.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}}),w=s.forwardRef(function(e,t){let n=(0,h.Z)({props:e,name:"MuiSwitch"}),{className:s,color:c="primary",edge:i=!1,size:l="medium",sx:d}=n,u=(0,a.Z)(n,p),x=(0,o.Z)({},n,{color:c,edge:i,size:l}),w=g(x),b=(0,m.jsx)(Z,{className:w.thumb,ownerState:x});return(0,m.jsxs)(v,{className:(0,r.Z)(w.root,s),sx:d,ownerState:x,children:[(0,m.jsx)(j,(0,o.Z)({type:"checkbox",icon:b,checkedIcon:b,ref:t,ownerState:x},u,{classes:(0,o.Z)({},w,{root:w.switchBase})})),(0,m.jsx)(f,{className:w.track,ownerState:x})]})});t.Z=w},38312:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ez}});var a=n(85893),o=n(89262),s=n(14440),r=n(9008),c=n.n(r),i=n(11163),l=n(67294),d=n(92230),h=n(77831);let u=(0,l.createContext)({uuid:"",setAnvilUuid:()=>null});var x=e=>{let{children:t}=e,[n,o]=(0,l.useState)("");return(0,a.jsx)(u.Provider,{value:{uuid:n,setAnvilUuid:e=>{o(e)}},children:t})},m=n(23930),p=n(48430),g=n(11901);let v=new Map([["optimal","Optimal"],["not_ready","Not Ready"],["degraded","Degraded"]]);var j=n(42458),f=(e,t)=>fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),Z=n(59278);let w={anvilName:"".concat("SelectedAnvil","-anvilName")},b=(0,o.ZP)(s.Z)(()=>({display:"flex",flexDirection:"row",width:"100%",["& .".concat(w.anvilName)]:{paddingLeft:0}})),_=e=>{switch(e){case"optimal":return"ok";case"not_ready":return"warning";default:return"error"}},k=e=>-1!==e.hosts.findIndex(e=>{let{state:t}=e;return"offline"!==t});var C=e=>{let{list:t}=e,{uuid:n}=(0,l.useContext)(u),o=t.findIndex(e=>e.anvil_uuid===n);return(0,a.jsx)(b,{children:""!==n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{p:1,children:(0,a.jsx)(j.Z,{colour:_(t[o].anvil_state)})}),(0,a.jsxs)(s.Z,{p:1,flexGrow:1,className:w.anvilName,children:[(0,a.jsx)(Z.z,{text:t[o].anvil_name}),(0,a.jsx)(Z.z,{text:v.get(t[o].anvil_state)||"State unavailable"})]}),(0,a.jsx)(s.Z,{p:1,children:(0,a.jsx)(g.Z,{checked:k(t[o]),onChange:()=>{let{[o]:e}=t,{anvil_uuid:n}=e;f("".concat(d.Z,"/command/").concat(k(e)?"stop-an":"start-an","/").concat(n),{})}})})]})})},N=n(37969),y=n(59505),S=n(54965),P=e=>{let{anvil:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.Ac,{text:t.anvil_name}),(0,a.jsx)(Z.Ac,{text:v.get(t.anvil_state)||"State unavailable"})]})},A=e=>{let t=[],n=[],a=[];return e.forEach(e=>{"optimal"===e.anvil_state?t.push(e):"not_ready"===e.anvil_state?n.push(e):a.push(e)}),[...a,...n,...t]};let B="AnvilList",M={root:"".concat(B,"-root"),divider:"".concat(B,"-divider"),button:"".concat(B,"-button"),anvil:"".concat(B,"-anvil")},T=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(M.root)]:{width:"100%",overflow:"auto",height:"30vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(M.divider)]:{backgroundColor:h.d},["& .".concat(M.button)]:{"&:hover":{backgroundColor:h.$T},paddingLeft:0},["& .".concat(M.anvil)]:{paddingLeft:0}}}),R=e=>{switch(e){case"optimal":return"ok";case"not_ready":return"warning";case"degraded":return"error";default:return"off"}};var z=e=>{let{list:t}=e,{uuid:n,setAnvilUuid:o}=(0,l.useContext)(u);return(0,l.useEffect)(()=>{""===n&&o(A(t)[0].anvil_uuid)},[n,t,o]),(0,a.jsx)(T,{children:(0,a.jsx)(N.Z,{component:"nav",className:M.root,"aria-label":"mailbox folders",children:A(t).map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{className:M.divider}),(0,a.jsx)(S.ZP,{button:!0,className:M.button,onClick:()=>o(e.anvil_uuid),children:(0,a.jsxs)(s.Z,{display:"flex",flexDirection:"row",width:"100%",children:[(0,a.jsx)(s.Z,{p:1,children:(0,a.jsx)(j.Z,{colour:R(e.anvil_state)})}),(0,a.jsx)(s.Z,{p:1,flexGrow:1,className:M.anvil,children:(0,a.jsx)(P,{anvil:e})})]})},e.anvil_uuid)]}))})})},L=e=>{let{list:t}=e,n=[];return null==t||t.anvils.forEach(e=>{let{anvil_uuid:t}=e,{data:a}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(t));n.push({...e,...a})}),(0,a.jsxs)(m.s_,{children:[(0,a.jsx)(C,{list:n}),(0,a.jsx)(z,{list:A(n)})]})},D=n(56903),E=n(25137),I=()=>{let{uuid:e}=(0,l.useContext)(u),{data:{allocated:t=0,cores:n=0,threads:o=0}={},isLoading:s}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(e,"/cpu")),r=(0,l.useMemo)(()=>s?(0,a.jsx)(E.Z,{}):(0,a.jsxs)(D.Z,{spacing:0,children:[(0,a.jsx)(Z.Ac,{text:"Total Cores: ".concat(n)}),(0,a.jsx)(Z.Ac,{text:"Total Threads: ".concat(o)}),(0,a.jsx)(Z.Ac,{text:"Allocated Cores: ".concat(t)})]}),[t,n,s,o]);return(0,a.jsxs)(m.s_,{children:[(0,a.jsx)(m.V9,{children:(0,a.jsx)(Z.z,{text:"CPU"})}),r]})},F=n(35497);let U=new Map([["message_0222","The subnode is in an unknown state."],["message_0223","The subnode is a full cluster member."],["message_0224","The subnode is coming online; the cluster resource manager is running (step 2/3)."],["message_0225","The subnode is coming online; the subnode is a consensus cluster member (step 1/3)."],["message_0226","The subnode has booted, but it is not (yet) joining the cluster."]]);var O=n(85358);let G="AnvilHost",V={state:"".concat(G,"-state"),bar:"".concat(G,"-bar"),label:"".concat(G,"-label"),decoratorBox:"".concat(G,"-decoratorBox")},H=(0,o.ZP)(s.Z)(e=>{let{theme:t}=e;return{overflow:"auto",height:"28vh",paddingLeft:".3em",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"},["& .".concat(V.state)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(V.bar)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(V.label)]:{paddingTop:".3em"},["& .".concat(V.decoratorBox)]:{alignSelf:"stretch"}}}),q=(e,t)=>{let n=e.exec(t);return n?U.get(n[0])||"Error code not recognized":"Error code not found"},W=e=>{switch(e){case"online":return"ok";case"offline":return"off";default:return"warning"}};var X=e=>{let{hosts:t}=e,n=/^[a-zA-Z]/,o=/^(message_[0-9]+)/;return(0,a.jsx)(H,{children:t&&t.map(e=>{var t;return e?(0,a.jsxs)(m.Lg,{children:[(0,a.jsxs)(m.CH,{children:[(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(Z.Ac,{text:e.host_name})}),(0,a.jsx)(s.Z,{className:V.decoratorBox,children:(0,a.jsx)(j.Z,{colour:W(e.state)})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(Z.Ac,{text:(null==e?void 0:null===(t=e.state)||void 0===t?void 0:t.replace(n,e=>e.toUpperCase()))||"Not Available"})})]}),(0,a.jsxs)(s.Z,{display:"flex",className:V.state,children:[(0,a.jsx)(s.Z,{className:V.label,children:(0,a.jsx)(Z.Ac,{text:"Power: "})}),(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(g.Z,{checked:"online"===e.state,onChange:()=>f("".concat(d.Z,"/command/").concat("online"===e.state?"stop-subnode":"start-subnode","/").concat(e.host_uuid),{})})}),(0,a.jsx)(s.Z,{className:V.label,children:(0,a.jsx)(Z.Ac,{text:"Member: "})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(g.Z,{checked:"online"===e.state,disabled:"online"!==e.state,onChange:()=>f("".concat(d.Z,"/command/").concat("online"===e.state?"leave-an":"join-an","/").concat(e.host_uuid),{})})})]}),"online"!==e.state&&"offline"!==e.state&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{display:"flex",width:"100%",className:V.state,children:(0,a.jsx)(s.Z,{children:(0,a.jsx)(Z.Ac,{text:q(o,e.state_message)})})}),(0,a.jsx)(s.Z,{display:"flex",width:"100%",className:V.bar,children:(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(O.ko,{progressPercentage:e.state_percent})})})]})]},e.host_uuid):(0,a.jsx)(a.Fragment,{})})})},$=e=>null==e?void 0:e.filter(e=>e.host_uuid),J=e=>{let{anvil:t}=e,{uuid:n}=(0,l.useContext)(u),{data:o,isLoading:s}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(n)),r=t.findIndex(e=>e.anvil_uuid===n);return(0,a.jsxs)(m.s_,{children:[(0,a.jsx)(Z.z,{text:"Subnodes"}),s?(0,a.jsx)(E.Z,{}):(0,a.jsx)(a.Fragment,{children:-1!==r&&o&&(0,a.jsx)(X,{hosts:$(t[r].hosts).reduce((e,t,n)=>{let a=o.hosts[n];return a&&e.push(a),e},[])})})]})},K=n(62800),Q=()=>{let{uuid:e}=(0,l.useContext)(u),{data:{allocated:t="0",reserved:n="0",total:o="0"}={},isLoading:r}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(e,"/memory")),c=(0,l.useMemo)(()=>BigInt(t),[t]),i=(0,l.useMemo)(()=>BigInt(n),[n]),h=(0,l.useMemo)(()=>BigInt(o),[o]);return(0,a.jsxs)(m.s_,{children:[(0,a.jsx)(m.V9,{children:(0,a.jsx)(Z.z,{text:"Memory"})}),r?(0,a.jsx)(E.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{display:"flex",width:"100%",children:[(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(Z.Ac,{text:"Allocated: ".concat((0,K.MU)(c))})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(Z.Ac,{text:"Free: ".concat((0,K.MU)(h-(i+c)))})})]}),(0,a.jsx)(s.Z,{display:"flex",width:"100%",children:(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(O.CD,{allocated:Number((i+c)*BigInt(100)/h)})})}),(0,a.jsx)(s.Z,{display:"flex",justifyContent:"center",width:"100%",children:(0,a.jsx)(Z.Ac,{text:"Total: ".concat((0,K.MU)(h)," | Reserved: ").concat((0,K.MU)(i))})})]})]})},Y=e=>{let t=[],n={bonds:[]};return e.hosts.forEach(e=>{e.bonds.forEach(a=>{let o=t.findIndex(e=>e===a.bond_name);-1===o?(t.push(a.bond_name),n.bonds.push({bond_name:a.bond_name,bond_uuid:a.bond_uuid,bond_speed:0,bond_state:"degraded",hosts:[{host_name:e.host_name,host_uuid:e.host_uuid,link:a.links[0].is_active?a.links[0]:a.links[1]}]})):n.bonds[o].hosts.push({host_name:e.host_name,host_uuid:e.host_uuid,link:a.links[0].is_active?a.links[0]:a.links[1]})})}),n.bonds.forEach(e=>{let t=e.hosts[0].link.link_speed>e.hosts[1].link.link_speed?1:0;e.bond_speed=e.hosts[t].link.link_speed,e.bond_state=e.hosts[t].link.link_state}),n};let ee="Network",et={container:"".concat(ee,"-container"),root:"".concat(ee,"-root"),noPaddingLeft:"".concat(ee,"-noPaddingLeft"),divider:"".concat(ee,"-divider"),verticalDivider:"".concat(ee,"-verticalDivider")},en=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(et.container)]:{width:"100%",overflow:"auto",height:"32vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(et.root)]:{paddingTop:".7em",paddingBottom:".7em"},["& .".concat(et.noPaddingLeft)]:{paddingLeft:0},["& .".concat(et.divider)]:{backgroundColor:h.d},["& .".concat(et.verticalDivider)]:{height:"3.5em"}}}),ea=e=>{switch(e){case"optimal":return"ok";case"degraded":default:return"warning";case"down":return"error"}};var eo=()=>{let{uuid:e}=(0,l.useContext)(u),[t,n]=(0,l.useState)(),{isLoading:o}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(e,"/network"),{onSuccess:e=>{n(Y(e))}});return(0,a.jsx)(m.s_,{children:(0,a.jsxs)(en,{children:[(0,a.jsx)(Z.z,{text:"Network"}),o?(0,a.jsx)(E.Z,{}):(0,a.jsx)(s.Z,{className:et.container,children:t&&t.bonds.map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.Z,{className:et.root,display:"flex",flexDirection:"row",width:"100%",children:[(0,a.jsx)(s.Z,{p:1,className:et.noPaddingLeft,children:(0,a.jsx)(j.Z,{colour:ea(e.bond_state)})}),(0,a.jsxs)(s.Z,{p:1,flexGrow:1,className:et.noPaddingLeft,children:[(0,a.jsx)(Z.Ac,{text:e.bond_name}),(0,a.jsx)(Z.Ac,{text:"".concat(e.bond_speed,"Mbps")})]}),(0,a.jsx)(s.Z,{display:"flex",style:{paddingTop:".5em"},children:e.hosts.map((t,n)=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{p:1,style:{paddingTop:0,paddingBottom:0},children:(0,a.jsxs)(s.Z,{children:[(0,a.jsx)(Z.Ac,{text:t.host_name,selected:!1}),(0,a.jsx)(Z.Ac,{text:t.link.link_name})]})},t.host_name),n!==e.hosts.length-1&&(0,a.jsx)(y.Z,{className:"".concat(et.divider," ").concat(et.verticalDivider),orientation:"vertical",flexItem:!0})]}))})]}),(0,a.jsx)(y.Z,{className:et.divider})]}))})]})})},es=n(14789),er=n(94246),ec=n(20869);let ei=new Map([["running","Running"],["idle","Idle"],["paused","Paused"],["in shutdown","Shutting Down"],["shut off","Off"],["crashed","Crashed"],["pmsuspended","PM Suspended"],["migrating","Migrating"]]);var el=n(98484),ed=n(77583),eh=n(99429),eu=n(97607),ex=n(65895),em=n(67732),ep=n(23833),eg=n(98337),ev=n(62848);let ej="Servers",ef={root:"".concat(ej,"-root"),divider:"".concat(ej,"-divider"),verticalDivider:"".concat(ej,"-verticalDivider"),button:"".concat(ej,"-button"),headerPadding:"".concat(ej,"-headerPadding"),hostsBox:"".concat(ej,"-hostsBox"),hostBox:"".concat(ej,"-hostBox"),checkbox:"".concat(ej,"-checkbox"),editButtonBox:"".concat(ej,"-editButtonBox"),dropdown:"".concat(ej,"-dropdown"),on:"".concat(ej,"-on"),off:"".concat(ej,"-off"),all:"".concat(ej,"-all")},eZ=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(ef.root)]:{width:"100%",overflow:"auto",height:"78vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(ef.divider)]:{backgroundColor:h.d},["& .".concat(ef.verticalDivider)]:{height:"75%",paddingTop:"1em"},["& .".concat(ef.button)]:{"&:hover":{backgroundColor:h.$T},paddingLeft:0},["& .".concat(ef.headerPadding)]:{paddingLeft:".3em"},["& .".concat(ef.hostsBox)]:{padding:"1em",paddingRight:0},["& .".concat(ef.hostBox)]:{paddingTop:0},["& .".concat(ef.checkbox)]:{paddingTop:".8em"},["& .".concat(ef.editButtonBox)]:{paddingTop:".3em"},["& .".concat(ef.dropdown)]:{paddingTop:".8em",paddingBottom:".8em"},["& .".concat(ef.all)]:{paddingTop:".5em",paddingLeft:".3em"}}}),ew=e=>{switch(e){case"running":return"ok";case"shut off":return"off";case"crashed":return"error";default:return"warning"}},eb=(0,o.ZP)(er.Z)({["&.".concat(ef.on)]:{color:h.Ej},["&.".concat(ef.off)]:{color:h.hM}});var e_=e=>{var t;let{anvil:n}=e,[o,r]=(0,l.useState)(null),[c,i]=(0,l.useState)(!1),[x,g]=(0,l.useState)(!1),[v,w]=(0,l.useState)([]),[b,_]=(0,l.useState)(!1),k=(0,l.useRef)({}),[C,P]=(0,ev.Z)(),{uuid:A}=(0,l.useContext)(u),B=(0,l.useRef)([]),{data:M}=(0,p.Z)("".concat(d.Z,"/server?anvilUUIDs=").concat(A)),T=(0,l.useMemo)(()=>M&&Object.values(M),[M]),R=e=>{B.current=[],e.filter(e=>"running"===e.state).length&&B.current.push("off"),e.filter(e=>"shut off"===e.state).length&&B.current.push("on")},z=e=>{r(null),v.length&&v.forEach(t=>{f("".concat(d.Z,"/command/").concat("on"===e?"start-server":"stop-server","/").concat(t),{})})},L=e=>{if(!T)return;let t=v.indexOf(e);-1===t?v.push(e):v.splice(t,1),R(T.filter(e=>-1!==v.indexOf(e.uuid))),w([...v])},D=n.findIndex(e=>e.anvil_uuid===A),I=$(null===(t=n[D])||void 0===t?void 0:t.hosts),F=(0,l.useMemo)(()=>!v.length,[v.length]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.s_,{children:(0,a.jsxs)(eZ,{children:[(0,a.jsxs)(m.V9,{className:ef.headerPadding,sx:{marginBottom:0},children:[(0,a.jsx)(Z.z,{text:"Servers"}),c&&(0,a.jsx)(ex.Z,{disabled:F,mapPreset:"delete",onClick:()=>{var e;P({actionProceedText:"Delete",content:"Are you sure you want to delete the selected server(s)? This action is not revertable.",onProceedAppend:()=>{el.Z.request({data:{serverUuids:v},method:"delete",url:"/server"}).catch(e=>{(0,eu.Z)(e)})},proceedColour:"red",titleText:"Delete ".concat(v.length," server(s)?")}),null===(e=k.current.setOpen)||void 0===e||e.call(null,!0)},variant:"redcontained"}),(0,a.jsx)(ex.Z,{mapPreset:"edit",onClick:()=>i(!c),state:String(c)}),(0,a.jsx)(ex.Z,{mapPreset:"add",onClick:()=>_(!0)})]}),c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{className:ef.headerPadding,display:"flex",children:(0,a.jsxs)(s.Z,{flexGrow:1,className:ef.dropdown,children:[(0,a.jsx)(eh.Z,{disabled:F,onClick:e=>{r(e.currentTarget)},startIcon:(0,a.jsx)(es.Z,{}),children:"Power"}),(0,a.jsx)(em.Z,{muiMenuProps:{anchorEl:o,keepMounted:!0,onClose:()=>r(null)},open:!!o,children:B.current.map(e=>(0,a.jsx)(ep.Z,{onClick:()=>z(e),children:(0,a.jsx)(eb,{className:ef[e],variant:"subtitle1",children:e.replace(/^[a-z]/,e=>e.toUpperCase())})},e))})]})}),(0,a.jsxs)(s.Z,{display:"flex",children:[(0,a.jsx)(s.Z,{children:(0,a.jsx)(ec.Z,{style:{color:h.lD},color:"secondary",checked:x,onChange:()=>{T&&(x?(R([]),w([])):(R(T),w(T.map(e=>e.uuid))),g(!x))}})}),(0,a.jsx)(s.Z,{className:ef.all,children:(0,a.jsx)(Z.Ac,{text:"All"})})]})]}),T?(0,a.jsx)(s.Z,{className:ef.root,children:(0,a.jsx)(N.Z,{component:"nav",children:T.map(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(S.ZP,{button:!0,className:ef.button,component:c?"div":"a",href:"/server?uuid=".concat(e.uuid,"&server_name=").concat(e.name,"&server_state=").concat(e.state),onClick:()=>L(e.uuid),children:(0,a.jsxs)(s.Z,{display:"flex",flexDirection:"row",width:"100%",children:[c&&(0,a.jsx)(s.Z,{className:ef.checkbox,children:(0,a.jsx)(ec.Z,{style:{color:h.lD},color:"secondary",checked:void 0!==v.find(t=>t===e.uuid)})}),(0,a.jsx)(s.Z,{p:1,children:(0,a.jsx)(j.Z,{colour:ew(e.state)})}),(0,a.jsxs)(s.Z,{p:1,flexGrow:1,children:[(0,a.jsx)(Z.Ac,{text:e.name}),(0,a.jsx)(Z.Ac,{text:ei.get(e.state)||"Not Available"})]}),(0,a.jsx)(s.Z,{display:"flex",className:ef.hostsBox,children:"shut off"!==e.state&&"crashed"!==e.state&&I.map((t,n)=>{var o;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{p:1,className:ef.hostBox,children:(0,a.jsx)(Z.Ac,{text:t.host_name,selected:(null===(o=e.host)||void 0===o?void 0:o.uuid)===t.host_uuid})},t.host_uuid),n!==I.length-1&&(0,a.jsx)(y.Z,{className:"".concat(ef.divider," ").concat(ef.verticalDivider),orientation:"vertical"})]})})})]})},e.uuid),(0,a.jsx)(y.Z,{className:ef.divider})]}))})}):(0,a.jsx)(E.Z,{})]})}),(0,a.jsx)(eg.Z,{dialogProps:{open:b},onClose:()=>{_(!1)}}),(0,a.jsx)(ed.Z,{closeOnProceed:!0,...C,ref:k})]})};let ek="SharedStorageHost",eC={fs:"".concat(ek,"-fs"),bar:"".concat(ek,"-bar"),decoratorBox:"".concat(ek,"-decoratorBox")},eN=(0,o.ZP)("div")(()=>({["& .".concat(eC.fs)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(eC.bar)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(eC.decoratorBox)]:{paddingRight:".3em"}}));var ey=e=>{let{group:t}=e,{storage_group_free:n,storage_group_total:o}=t,r=(0,l.useMemo)(()=>BigInt(n),[n]),c=(0,l.useMemo)(()=>BigInt(o),[o]),i=(0,l.useMemo)(()=>c-r,[r,c]),d=(0,l.useMemo)(()=>Number(i*BigInt(100)/c),[i,c]);return(0,a.jsxs)(eN,{children:[(0,a.jsxs)(s.Z,{display:"flex",width:"100%",className:eC.fs,children:[(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(Z.Ac,{text:"Used: ".concat((0,K.MU)(c-r))})}),(0,a.jsx)(s.Z,{children:(0,a.jsx)(Z.Ac,{text:"Free: ".concat((0,K.MU)(r))})})]}),(0,a.jsx)(s.Z,{display:"flex",width:"100%",className:eC.bar,children:(0,a.jsx)(s.Z,{flexGrow:1,children:(0,a.jsx)(O.CD,{allocated:d})})}),(0,a.jsx)(s.Z,{display:"flex",justifyContent:"center",width:"100%",children:(0,a.jsx)(Z.Ac,{text:"Total Storage: ".concat((0,K.MU)(c))})})]})};let eS={root:"".concat("SharedStorage","-root")},eP=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(eS.root)]:{overflow:"auto",height:"78vh",paddingLeft:".3em",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%"}}}});var eA=()=>{let{uuid:e}=(0,l.useContext)(u),{data:t,isLoading:n}=(0,p.Z)("".concat(d.Z,"/anvil/").concat(e,"/store"));return(0,a.jsx)(m.s_,{children:(0,a.jsxs)(eP,{children:[(0,a.jsx)(Z.z,{text:"Shared Storage"}),n?(0,a.jsx)(E.Z,{}):(0,a.jsx)(s.Z,{className:eS.root,children:(null==t?void 0:t.storage_groups)&&t.storage_groups.map(e=>(0,a.jsxs)(m.Lg,{children:[(0,a.jsx)(m.CH,{children:(0,a.jsx)(Z.Ac,{text:e.storage_group_name})}),(0,a.jsx)(ey,{group:e},e.storage_group_uuid)]},e.storage_group_uuid))})]})})},eB=()=>{let[e,t]=(0,l.useState)(void 0);return(0,l.useEffect)(()=>{let e=()=>{t(window.innerWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e};let eM="Anvil",eT={child:"".concat(eM,"-child"),server:"".concat(eM,"-server"),container:"".concat(eM,"-container")},eR=(0,o.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(eT.child)]:{width:"22%",height:"100%",[t.breakpoints.down(h.li)]:{width:"50%"},[t.breakpoints.down("md")]:{width:"100%"}},["& .".concat(eT.server)]:{width:"35%",height:"100%",[t.breakpoints.down("md")]:{width:"100%"}},["& .".concat(eT.container)]:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",[t.breakpoints.down("md")]:{display:"block"}}}});var ez=()=>{let e=(0,i.useRouter)(),t=eB(),{anvil_uuid:n}=e.query,{uuid:o,setAnvilUuid:r}=(0,l.useContext)(u),{data:g,isLoading:v}=(0,p.Z)("".concat(d.Z,"/anvil/summary")),j=(0,l.useMemo)(()=>{let e;return g&&t&&(e=t>h.li?(0,a.jsxs)(s.Z,{className:eT.container,children:[(0,a.jsxs)(s.Z,{className:eT.child,children:[(0,a.jsx)(L,{list:g}),(0,a.jsx)(J,{anvil:g.anvils})]}),(0,a.jsx)(s.Z,{className:eT.server,children:(0,a.jsx)(e_,{anvil:g.anvils})}),(0,a.jsx)(s.Z,{className:eT.child,children:(0,a.jsx)(eA,{})}),(0,a.jsxs)(s.Z,{className:eT.child,children:[(0,a.jsx)(eo,{}),(0,a.jsx)(I,{}),(0,a.jsx)(Q,{})]})]}):(0,a.jsxs)(s.Z,{className:eT.container,children:[(0,a.jsxs)(s.Z,{className:eT.child,children:[(0,a.jsx)(e_,{anvil:g.anvils}),(0,a.jsx)(L,{list:g}),(0,a.jsx)(J,{anvil:g.anvils})]}),(0,a.jsxs)(s.Z,{className:eT.child,children:[(0,a.jsx)(eo,{}),(0,a.jsx)(eA,{}),(0,a.jsx)(I,{}),(0,a.jsx)(Q,{})]})]})),e},[g,t]),f=(0,l.useMemo)(()=>v?(0,a.jsx)(m.s_,{sx:{marginLeft:{xs:"1em",sm:"auto"},marginRight:{xs:"1em",sm:"auto"},marginTop:"calc(50vh - 10em)",maxWidth:{xs:void 0,sm:"60%",md:"50%",lg:"40%"},minWidth:"fit-content"},children:(0,a.jsx)(E.Z,{sx:{margin:"2em 2.4em"}})}):j,[j,v]);return(0,l.useEffect)(()=>{""===o&&r((null==n?void 0:n.toString())||"")},[o,n,r]),(0,a.jsxs)(eR,{children:[(0,a.jsx)(c(),{children:(0,a.jsx)("title",{children:"Anvil"})}),(0,a.jsxs)(x,{children:[(0,a.jsx)(F.Z,{}),f]})]})}},11163:function(e,t,n){e.exports=n(9090)}},function(e){e.O(0,[340,433,618,74,62,497,93,888,774,179],function(){return e(e.s=72315)}),_N_E=e.O()}]);