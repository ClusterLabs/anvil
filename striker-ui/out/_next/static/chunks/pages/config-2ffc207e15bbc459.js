(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{13920:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var l=n(37876),r=n(7254),s=n(60999),i=n(80963),o=n(40123),a=n.n(o),c=n(65532),d=n(89889),u=n(34318),h=n(20795);let m=e=>{let{entry:t}=e;return(0,l.jsx)(h.NA,{whiteSpace:"nowrap",children:String(t)})},x=e=>{let{entry:t,hasPassword:n}=e;return(e=>null==e||"object"==typeof e&&a()(e)||"number"==typeof e&&!Number.isFinite(e)||"string"==typeof e&&0===e.trim().length)(t)?(0,l.jsx)(h.a3,{children:"none"}):n?(e=>{let{entry:t,key:n}=e;return c.sX.test(n)?(0,l.jsx)(h.EN,{wrapper:"mono",children:String(t)}):m(e)})(e):m(e)},p=e=>{let{depth:t,entry:n,getLabel:s,hasPassword:i,key:o,nest:a,renderValue:c}=e;return(0,l.jsxs)(u.A,{fullWidth:!0,growFirst:!0,row:!0,maxWidth:"100%",children:[(0,l.jsx)(h.a3,{children:s({cap:d.A,depth:t,entry:n,hasPassword:i,key:o})}),(0,l.jsx)(r.A,{sx:{maxWidth:"100%",overflowX:"scroll"},children:!a&&c(x,{depth:t,entry:n,hasPassword:i,key:o})})]})},g=e=>{let{key:t}=e;return/confirm|uuid/i.test(t)},A=e=>{let{depth:t=0,entries:n,getEntryLabel:r,getListProps:o,getListItemProps:c,hasPassword:d,listKey:u,maxDepth:h,renderEntry:m,renderEntryValue:x,skip:p}=e,f=[];Object.entries(n).forEach(e=>{let[n,s]=e,o="form-summary-entry-".concat(n),u=(e=>null!==e&&"object"==typeof e&&!a()(e))(s),j=u?null:s,b={depth:t,entry:j,hasPassword:d,key:n};p(g,b)||f.push((0,l.jsx)(i.Ay,{sx:{paddingLeft:"".concat(t,"em")},...null==c?void 0:c.call(null,b),children:m({depth:t,entry:j,getLabel:r,hasPassword:d,key:n,nest:u,renderValue:x})},o)),u&&t<h&&f.push(A({depth:t+1,entries:s,getEntryLabel:r,hasPassword:d,listKey:n,maxDepth:h,renderEntry:m,renderEntryValue:x,skip:p}))});let j="form-summary-list-".concat(null!=u?u:"root");return(0,l.jsx)(s.A,{dense:!0,disablePadding:!0,...null==o?void 0:o.call(null,{depth:t,entries:n,key:u}),children:f},j)},f=e=>{let{entries:t,getEntryLabel:n=e=>{let{cap:t,key:n}=e;return t(n)},getListProps:l,getListItemProps:r,hasPassword:s=!1,maxDepth:i=3,renderEntry:o=p,renderEntryValue:a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return e(...n)},skip:c=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),l=1;l<t;l++)n[l-1]=arguments[l];return e(...n)}}=e;return A({entries:t,getEntryLabel:n,getListProps:l,getListItemProps:r,hasPassword:s,maxDepth:i,renderEntry:o,renderEntryValue:a,skip:c})}},19161:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ep});var l=n(37876),r=n(41316),s=n(77328),i=n.n(s),o=n(14232),a=n(39294),c=n(88577),d=n(7254),u=n(28850),h=n(34318),m=n(74235),x=n(56014),p=n(45944),g=n(40038),A=n(35755),f=n(20795),j=n(25351),b=n(61931),k=n(30827);let v=e=>{let{mitmExternalHref:t="https://en.wikipedia.org/wiki/Man-in-the-middle_attack",refreshInterval:n=1e4}=e,[r,s]=(0,o.useState)(),{confirmDialog:i,finishConfirm:a,setConfirmDialogLoading:c,setConfirmDialogOpen:v,setConfirmDialogProps:y}=(0,b.A)(),w=(0,o.useMemo)(()=>r&&(0,l.jsx)(g.A,{...r}),[r]),{data:C,loading:S}=(0,k.A)("/ssh-key/conflict",{onError:e=>{let t=(0,m.A)(e);t.children=(0,l.jsxs)(l.Fragment,{children:["Failed to fetch SSH key conflicts. ",t.children]}),s(t)},onSuccess:()=>{s(void 0)},refreshInterval:n}),{checks:P,getCheck:I,hasAllChecks:D,hasChecks:E,setAllChecks:M,setCheck:F}=(0,j.A)({list:C}),U=(0,o.useMemo)(()=>C&&Object.keys(C).length>1,[C]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(A.l8,{header:"Manage changed SSH keys",loading:S,children:[(0,l.jsxs)(h.A,{spacing:".2em",children:[(0,l.jsx)(f.a3,{children:"The identity of the following targets have unexpectedly changed."}),(0,l.jsxs)(g.A,{type:"warning",isAllowClose:!0,children:["If you haven't rebuilt the listed targets, then you could be experiencing a"," ",(0,l.jsx)(x.A,{href:t,sx:{display:"inline-flex"},target:"_blank",children:'"Man In The Middle"'})," ","attack. Please verify the targets have changed for a known reason before proceeding to remove the broken keys."]}),(0,l.jsx)(p.A,{header:!0,allowCheckAll:U,allowCheckItem:!0,allowDelete:!0,allowEdit:!1,disableDelete:!E,edit:!0,getListCheckboxProps:()=>({checked:D}),listEmpty:(0,l.jsx)(f.a3,{align:"center",children:"No conflicting keys found."}),listItems:C,onAllCheckboxChange:(e,t)=>{M(t)},onDelete:()=>{if(!C)return;let e={badKeys:P};y({actionProceedText:"Delete",content:"Resolves ".concat(P.length," SSH key conflicts. Please make sure the identity change(s) are expected to avoid MITM attacks."),onProceedAppend:()=>{c(!0),u.A.delete("/ssh-key/conflict",{data:e}).then(()=>{a("Success",{children:(0,l.jsx)(l.Fragment,{children:"Started job to delete the selected keys."})})}).catch(e=>{let t=(0,m.A)(e);t.children=(0,l.jsxs)(l.Fragment,{children:["Failed to delete the selected keys. ",t.children]}),a("Error",t)})},proceedColour:"red",titleText:"Delete ".concat(P.length," conflicting SSH keys?")}),v(!0)},onItemCheckboxChange:(e,t,n)=>{F(e,n)},renderListItem:(e,t)=>{let{ip:n,name:r,short:s}=t.target;return(0,l.jsxs)(d.A,{width:"calc(100% - 4em)",children:[(0,l.jsx)(f.a3,{noWrap:!0,children:s||r||n}),(0,l.jsx)(f.xF,{monospaced:!0,noWrap:!0,children:e})]})},renderListItemCheckboxState:e=>I(e)})]}),w]}),i]})};var y=n(66998),w=n(87356),C=n(31254),S=n(20863),P=n(36150);let{Form:I,FormContext:D,useFormContext:E}=(0,P.A)();var M=n(11910),F=n(71918),U=n(60189),T=n(64345);let O=e=>{let{checked:t,id:n,label:r,name:s,onChange:i,slotProps:a}=e,c=(0,o.useMemo)(()=>(0,T.A)(r,f.a3),[r]);return(0,l.jsx)(F.A,{...null==a?void 0:a.label,control:(0,l.jsx)(U.A,{checked:t,id:n,name:s,onChange:i,...null==a?void 0:a.checkbox}),label:c})};var N=n(69146),_=n(88259);let R="peer-striker-ip-address-input",q="peer-striker-password-input",L="peer-striker-ping-test-input",z=()=>{let e=E(D);if(!e)return(0,l.jsx)(g.A,{type:"error",children:"Missing form context."});let{formik:t,handleChange:n}=e.formikUtils;return(0,l.jsxs)(y.A,{columns:{xs:1,sm:2},container:!0,spacing:"1em",width:"100%",children:[(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(_.A,{input:(0,l.jsx)(N.A,{disableAutofill:!0,id:R,label:"Target",name:R,onChange:n,required:!0,value:t.values[R]})})}),(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(_.A,{input:(0,l.jsx)(N.A,{disableAutofill:!0,id:q,label:"Password",name:q,onChange:n,type:M.A.password,value:t.values[q]})})}),(0,l.jsx)(y.A,{children:(0,l.jsx)(O,{checked:t.values[L],id:L,label:"Ping",name:L,onChange:t.handleChange})})]})};var W=n(33865),K=n(44725),V=n(10595);let B={small:f.xF,medium:f.a3},H={size:"small",stateMap:new Map([[!1,(0,l.jsx)(K.A,{sx:{color:V.hr}},"state-false")],[!0,(0,l.jsx)(W.A,{sx:{color:V.ft}},"state-true")]])},Y=e=>{let{label:t,size:n=H.size,state:r,stateMap:s=H.stateMap}=e,i=s.get(r);return(0,l.jsxs)(h.A,{row:!0,spacing:".3em",children:[i&&(0,o.cloneElement)(i,{fontSize:n}),(0,o.createElement)(B[n],{},t)]})};Y.defaultProps=H;var X=n(91408),$=n(27743);let G=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return X.Ik({[q]:X.Yj(),[L]:X.zM().default(!0),[R]:((e,t)=>{let n;e&&(n=t=>t.hostUUID!==e);let l=(0,$.fD)(t,e=>e.ipAddress,{filterBy:n});return X.Yj().notOneOf(l,"${path} already connected")})(t,e).required()})},Z=e=>{let{refreshInterval:t=6e4}=e,n=(0,o.useRef)(null),r=(0,b.A)(),[s,i]=(0,o.useState)(),[a,c]=(0,o.useState)(!1),d=(0,o.useMemo)(()=>s&&(0,l.jsx)(y.A,{size:{xs:1,sm:2},children:(0,l.jsx)(g.A,{...s})}),[s]),{data:x,loading:v,mutate:P}=(0,k.A)("/host/connection",{onError:e=>{let t=(0,m.A)(e);t.children=(0,l.jsxs)(l.Fragment,{children:["Failed to get connection data. ",t.children]}),i(t)},onSuccess:()=>{i(void 0)},refreshInterval:t}),D=(0,o.useMemo)(()=>{if(!x)return;let{ipAddress:e,port:t,user:n}=x.local.inbound;return Object.entries(e).reduce((e,l)=>{let[r,{ifaceId:s,networkLinkNumber:i,networkNumber:o,networkType:a}]=l;return e[r]={dbPort:t,dbUser:n,ifaceId:s,ipAddress:r,networkLinkNumber:i,networkNumber:o,networkType:a},e},{})},[x]),E=(0,o.useMemo)(()=>{if(!x)return;let{peer:e}=x.local;return Object.entries(e).reduce((e,t)=>{let[n,{hostUUID:l,isPing:r,port:s,user:i}]=t;return e["".concat(i,"@").concat(n,":").concat(s)]={dbPort:s,dbUser:i,hostUUID:l,ipAddress:n,isPingTest:r},e},{})},[x]),{checks:M,getCheck:F,hasChecks:U,resetChecks:T,setCheck:O}=(0,j.A)({list:E});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.l8,{header:"Configure striker peers",loading:v,children:(0,l.jsxs)(y.A,{columns:{xs:1,sm:2},container:!0,spacing:"1em",width:"100%",children:[(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(p.A,{header:"Inbound connections",listEmpty:(0,l.jsx)(f.a3,{align:"center",children:"No inbound connections found."}),listItemKeyPrefix:"inbound",listItems:D,loading:v,renderListItem:(e,t)=>{let{dbPort:n,dbUser:r,ifaceId:s,networkNumber:i,networkType:o}=t,a=w.A[o]&&i?"".concat(w.A[o]," ").concat(i):"Unknown network; interface: ".concat(s);return(0,l.jsxs)(h.A,{spacing:0,sx:{width:"100%"},children:[(0,l.jsx)(f.NA,{children:"".concat(r,"@").concat(e,":").concat(n)}),(0,l.jsx)(f.xF,{children:a})]})}})}),(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(p.A,{allowEdit:!0,disableDelete:!U,edit:a,header:"Peer connections",listEmpty:(0,l.jsx)(f.a3,{align:"center",children:"No peer connections found."}),listItemKeyPrefix:"peer",listItems:E,loading:v,onAdd:()=>{var e;null==(e=n.current)||e.setOpen(!0)},onDelete:()=>{if(!E)return;let e={local:M.map(e=>{let{[e]:t}=E;return t.hostUUID})},t=e.local.length;t>0&&(r.setConfirmDialogProps({actionProceedText:"Delete",content:"The peer relationship between this striker and the selected ".concat(t," host(s) will terminate. The removed peer(s) can be re-added later."),onProceedAppend:()=>{u.A.delete("/host/connection",{data:e}).then(()=>{T(),P(),r.setConfirmDialogOpen(!1)}).catch(e=>{let t=(0,m.A)(e);r.finishConfirm("Error",{children:"Failed to delete peer connection(s). ".concat(t.children)})})},proceedColour:"red",titleText:"Delete ".concat(t," peer(s) from this striker?")}),r.setConfirmDialogOpen(!0))},onEdit:()=>{c(e=>!e)},onItemCheckboxChange:(e,t,n)=>{O(e,n)},renderListItemCheckboxState:e=>F(e),renderListItem:(e,t)=>{let{isPingTest:n=!1}=t;return(0,l.jsx)(h.A,{row:!0,spacing:0,children:(0,l.jsxs)(h.A,{spacing:0,children:[(0,l.jsx)(f.NA,{children:e}),(0,l.jsx)(Y,{label:"Ping",state:n})]})})}})}),d]})}),(0,l.jsx)(C.K_,{header:"Add a peer striker",loading:v,ref:n,showClose:!0,children:E&&(0,l.jsx)(I,{config:{initialValues:(e=>{var t,n;return{[q]:"",[L]:null==(t=null==e?void 0:e.isPingTest)||t,[R]:null!=(n=null==e?void 0:e.ipAddress)?n:""}})(),onSubmit:(e,t)=>{let{[q]:l,[L]:s,[R]:i}=e;(0,S.A)({confirm:r,getRequestBody:()=>({ipAddress:i,isPing:s,password:l}),getSummary:()=>({target:i,password:l,ping:s}),header:"Add a peer striker with the following?",helpers:t,onError:()=>"Failed to add peer striker.",onSuccess:()=>{var e;return P(),null==(e=n.current)||e.setOpen(!1),"Successfully started peer striker registration."},operation:"add",slotProps:{summary:{hasPassword:!0}},url:"/host/connection",values:e})},validationSchema:G(E)},operation:"add",children:(0,l.jsx)(z,{})})}),r.confirmDialog]})},{Form:Q,FormContext:J,useFormContext:ee}=(0,P.A)(),et="common-user-input-confirm-password",en="common-user-input-name",el="common-user-input-password",er=e=>{let{readonlyName:t,requirePassword:n=!0}=e,r=ee(J);if(!r)return(0,l.jsx)(g.A,{type:"error",children:"Missing form context."});let{formik:s,handleChange:i}=r.formikUtils;return(0,l.jsxs)(y.A,{columns:{xs:1,sm:2,md:3},container:!0,spacing:"1em",width:"100%",children:[(0,l.jsx)(y.A,{size:{xs:1,sm:2,md:1},children:(0,l.jsx)(_.A,{input:(0,l.jsx)(N.A,{disableAutofill:!0,id:en,inputProps:{disabled:t},label:"Username",name:en,onChange:i,required:!0,value:s.values[en]})})}),(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(_.A,{input:(0,l.jsx)(N.A,{disableAutofill:!0,id:el,label:"Password",name:el,onChange:i,required:n,type:M.A.password,value:s.values[el]})})}),(0,l.jsx)(y.A,{size:1,children:(0,l.jsx)(_.A,{input:(0,l.jsx)(N.A,{disableAutofill:!0,id:et,label:"Confirm password",name:et,onChange:i,required:!!s.values[el],type:M.A.password,value:s.values[et]})})})]})},es=e=>{var t;return{[et]:"",[en]:null!=(t=null==e?void 0:e.userName)?t:"",[el]:""}};var ei=n(27532);let eo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=X.Yj();return t||n.required(),X.Ik({[et]:X.Yj().when([el],(e,t)=>{let[n]=e;return n?t.required():t}).oneOf([X.KR(el)]),[en]:((e,t)=>{let n;e&&(n=t=>t.userUUID!==e);let l=(0,$.fD)(t,e=>e.userName,{filterBy:n});return X.Yj().notOneOf(l,"${path} already exists")})(t,e).required(),[el]:n})},ea=()=>{var e;let t=(0,o.useRef)(null),n=(0,o.useRef)(null),r=(0,b.A)(),[s,i]=(0,o.useState)(!1),[a,c]=(0,o.useState)({children:"No users found."}),[d,u]=(0,o.useState)(""),{data:h,loading:x,mutate:v}=(0,k.A)("/user",{onError:e=>{c((0,m.A)(e))}}),y=(null==h||null==(e=h.current)?void 0:e.userName)==="admin",w=(0,o.useMemo)(()=>h&&Object.values(h).reduce((e,t)=>(e[t.userUUID]=t,e),{}),[h]),P=null==w?void 0:w[d],{buildDeleteDialogProps:I,checks:D,getCheck:E,hasChecks:M,resetChecks:F,setCheck:U}=(0,j.A)({list:w}),T=(0,ei.A)([]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(A.l8,{header:"Manage users",loading:x,children:(0,l.jsx)(p.A,{allowAddItem:y,allowDelete:y,allowEdit:!0,allowItemButton:s,disableDelete:!M,edit:s,getListItemCheckboxProps:(e,t)=>{let{userName:n}=t;return{disabled:"admin"===n}},header:!0,listEmpty:(0,l.jsx)(g.A,{...a}),listItems:w,loading:x,onAdd:()=>{var e;null==(e=t.current)||e.setOpen(!0)},onDelete:()=>{r.setConfirmDialogProps(I({getConfirmDialogTitle:e=>"Delete the following ".concat(e," users?"),onProceedAppend:()=>{T.submitForm({body:{uuids:D},getErrorMsg:e=>(r.finishConfirm("Error",{children:"Failed to delete user(s). ".concat(e)}),null),method:"delete",onSuccess:()=>{F(),v(),r.setConfirmDialogOpen(!1)},url:"/user"})},renderEntry:e=>{let{key:t}=e;return(0,l.jsx)(f.a3,{children:null==w?void 0:w[t].userName})}})),r.setConfirmDialogOpen(!0)},onEdit:()=>{i(e=>!e)},onItemCheckboxChange:(e,t,n)=>{U(e,n)},onItemClick:e=>{var t;u(e.userUUID),null==(t=n.current)||t.setOpen(!0)},renderListItemCheckboxState:e=>E(e),renderListItem:(e,t)=>{let{userName:n}=t;return(0,l.jsx)(f.a3,{children:n})}})}),(0,l.jsx)(C.K_,{header:"Add a web interface user",loading:x,ref:t,showClose:!0,wide:!0,children:w&&(0,l.jsx)(Q,{config:{initialValues:es(),onSubmit:(e,n)=>{let{[en]:l,[el]:s=""}=e;(0,S.A)({confirm:r,getRequestBody:()=>({password:s,userName:l}),getSummary:()=>({name:l,password:s}),header:"Add the following new user?",helpers:n,onError:()=>"Add user failed.",onSuccess:()=>{var e;return v(),null==(e=t.current)||e.setOpen(!1),"Created user ".concat(l,".")},operation:"add",slotProps:{summary:{hasPassword:!0}},url:"/user",values:e})},validationSchema:eo(w)},operation:"add",children:(0,l.jsx)(er,{})})}),(0,l.jsx)(C.K_,{header:P&&"Update user ".concat(P.userName),loading:x,ref:n,showClose:!0,wide:!0,children:w&&P&&(0,l.jsx)(Q,{config:{initialValues:es(P),onSubmit:(e,t)=>{let{[en]:l,[el]:s=""}=e;(0,S.A)({confirm:r,getRequestBody:()=>({password:s,userName:l}),getSummary:()=>({name:l,password:s}),header:"Update user ".concat(P.userName," with the following?"),helpers:t,onError:()=>"Update user failed.",onSuccess:()=>{var e;return v(),null==(e=n.current)||e.setOpen(!1),"Updated user ".concat(P.userName)},operation:"edit",slotProps:{summary:{hasPassword:!0}},url:"/user/".concat(P.userUUID),values:e})},validationSchema:eo(w,P.userUUID)},operation:"edit",children:(0,l.jsx)(er,{readonlyName:"admin"===P.userName,requirePassword:!1})})}),r.confirmDialog]})},ec=()=>(0,l.jsxs)(A.Zk,{children:[(0,l.jsx)(Z,{}),(0,l.jsx)(v,{}),(0,l.jsx)(ea,{})]});var ed=n(51553),eu=n(89121),eh=n(11457);let em=e=>(0,l.jsx)(eu.A,{...e,sx:{width:"100%"}}),ex=e=>{let{installTarget:t="disabled",onSubmit:n,title:s}=e,[i,a]=(0,o.useState)(),c=(0,o.useMemo)(()=>s?(0,l.jsx)(f.HM,{sx:{textAlign:"center"},children:s}):(0,l.jsx)(eh.A,{mt:0}),[s]),d=(0,o.useMemo)(()=>i&&(0,l.jsx)(r.Ay,{item:!0,sm:2,xs:1,children:(0,l.jsx)(g.A,{...i,onClose:()=>{a(void 0)}})}),[i,a]);return(0,l.jsxs)(A.Zk,{children:[(0,l.jsx)(A.aO,{children:c}),(0,l.jsxs)(r.Ay,{columns:{xs:1,sm:2},container:!0,spacing:"1em",children:[(0,l.jsx)(r.Ay,{display:"none",item:!0,sm:2,xs:1,children:(0,l.jsxs)(h.A,{row:!0,children:[(0,l.jsx)(f.a3,{sx:{flexGrow:1},children:"Install target"}),(0,l.jsx)(ed.A,{checked:"enabled"===t,edge:"end",onChange:(e,t)=>{let r="disable",i="Disable";t&&(r="enable",i="Enable"),null==n||n.call(null,{actionProceedText:i,content:(0,l.jsxs)(f.a3,{children:["Would you like to ",r,' "Install target" on this striker? It\'ll take a few moments to complete.']}),onProceedAppend:()=>{u.A.put("/host/local",{isEnableInstallTarget:t},{params:{handler:"install-target"}}).catch(e=>{let t=(0,m.A)(e);t.children="Failed to ".concat(r,' "Install target". ').concat(t.children),a(t)})},titleText:"".concat(i,' "Install target" on ').concat(s,"?")})}})]})}),(0,l.jsx)(r.Ay,{item:!0,sm:2,xs:1,children:(0,l.jsx)(em,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Update",content:(0,l.jsx)(f.a3,{children:"Would you like to update the operating system on this striker? It'll be placed into maintenance mode until the update completes."}),onProceedAppend:()=>{u.A.put("/command/update-system").catch(e=>{let t=(0,m.A)(e);t.children="Failed to initiate system update. ".concat(t.children),a(t)})},titleText:"Update operating system on ".concat(s,"?")})},children:"Update system"})}),(0,l.jsx)(r.Ay,{item:!0,sm:2,xs:1,children:(0,l.jsx)(em,{href:"/init?re=1",children:"Reconfigure striker"})}),(0,l.jsx)(r.Ay,{item:!0,xs:1,children:(0,l.jsx)(em,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Reboot",content:(0,l.jsx)(f.a3,{children:"Would you like to reboot this striker?"}),onProceedAppend:()=>{u.A.put("/command/reboot-host").catch(e=>{let t=(0,m.A)(e);t.children="Failed to initiate system reboot. ".concat(t.children),a(t)})},titleText:"Reboot ".concat(s,"?")})},children:"Reboot"})}),(0,l.jsx)(r.Ay,{item:!0,xs:1,children:(0,l.jsx)(em,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Shutdown",content:(0,l.jsx)(f.a3,{children:"Would you like to shutdown this striker?"}),onProceedAppend:()=>{u.A.put("/command/poweroff-host").catch(e=>{let t=(0,m.A)(e);t.children="Failed to initiate system shutdown. ".concat(t.children),a(t)})},titleText:"Shutdown ".concat(s,"?")})},children:"Shutdown"})}),d]})]})},ep=e=>{let{refreshInterval:t=6e4}=e,[n,s]=(0,o.useState)(!1),[d,u]=(0,o.useState)({actionProceedText:"",closeOnProceed:!0,content:"",dialogProps:{open:n},onCancelAppend:()=>{s(!1)},onProceedAppend:()=>{s(!1)},titleText:""}),[h,m]=(0,o.useState)(),[x,p]=(0,o.useState)(""),{data:g,loading:A}=(0,k.A)("/host/local",{onError:()=>{p("Unknown")},onSuccess:e=>{let{short:t,variables:n}=e;m(n.installTarget),p(t)},refreshInterval:t});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{children:(0,l.jsx)("title",{children:A?"Loading...":"".concat(null==g?void 0:g.short," Config")})}),(0,l.jsx)(c.A,{}),(0,l.jsxs)(r.Ay,{container:!0,columns:{xs:1,md:3,lg:4},children:[(0,l.jsx)(r.Ay,{item:!0,xs:1,children:(0,l.jsx)(ex,{installTarget:h,onSubmit:e=>{let{onProceedAppend:t,...n}=e;u(e=>({...e,...n,onProceedAppend:function(){for(var e=arguments.length,n=Array(e),l=0;l<e;l++)n[l]=arguments[l];null==t||t.call(null,...n),s(!1)}})),s(!0)},title:x})}),(0,l.jsx)(r.Ay,{item:!0,md:2,xs:1,children:(0,l.jsx)(ec,{})})]}),(0,l.jsx)(a.A,{...d,dialogProps:{open:n}})]})}},20863:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(14232),r=n(13920),s=n(28850),i=n(74235);let o=e=>{let{description:t,getRequestBody:n,getSummary:o,header:a,helpers:c,onError:d,onSuccess:u,operation:h,slotProps:m,tools:x,url:p,values:g,method:A=(e=>{switch(e){case"add":return"post";case"delete":return"delete";default:return"put"}})(h)}=e,f=e.confirm?(e=>({finish:e.finishConfirm,loading:e.setConfirmDialogLoading,open:function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.setConfirmDialogOpen(t)},prepare:e.setConfirmDialogProps}))(e.confirm):null==x?void 0:x.confirm,j=null==o?void 0:o(g),b={actionProceedText:(e=>{switch(e){case"add":return"Add";case"delete":return"Delete";default:return"Save"}})(h),content:null!=t?t:(0,l.createElement)(r.A,{entries:null!=j?j:g,...null==m?void 0:m.summary}),onCancelAppend:()=>c.setSubmitting(!1),onProceedAppend:()=>{null==f||f.loading(!0);let e=null==n?void 0:n(g,j);s.A.request({data:e,method:A,url:p}).then(()=>{null==f||f.finish("Success",{children:null==u?void 0:u()}),null==x||x.add.open(!1),null==x||x.edit.open(!1)}).catch(e=>{let t=(0,i.A)(e);t.children=(0,l.createElement)(l.Fragment,null,null==d?void 0:d(e)," ",t.children),null==f||f.finish("Error",t)})},proceedColour:"delete"===h?"red":"blue",titleText:a,...null==m?void 0:m.confirm};null==f||f.prepare(b),null==f||f.open(!0)}},21635:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>s,WT:()=>r});let l=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[,l,r,s]=t;void 0!==s&&(l[r]=s)},r=function(e,t){let{set:n=l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l=>{let r={};return Object.keys(l).forEach(s=>{e.test(s)?n(l,r,s,t):r[s]=l[s]}),r}},s=function(e,t){let{guard:n=()=>!0,set:r=l}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l=>{let{[e]:s,...i}=l,o={...i};return n(l,e,t)&&r(l,o,e,t),o}}},25351:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(37876),r=n(14232),s=n(21635),i=n(13920);let o=e=>{let{list:t={}}=e,[n,o]=(0,r.useState)({}),a=(0,r.useMemo)(()=>Object.keys(t),[t]),c=(0,r.useMemo)(()=>Object.keys(n),[n]),d=(0,r.useMemo)(()=>c.length===a.length,[c.length,a.length]),u=(0,r.useMemo)(()=>c.length>0,[c.length]),h=(0,r.useMemo)(()=>a.length>1,[a.length]),m=(0,r.useCallback)(e=>{let{confirmDialogProps:t={},formSummaryProps:r={},getConfirmDialogTitle:s,onProceedAppend:o,renderEntry:a}=e;return{actionProceedText:"Delete",content:(0,l.jsx)(i.A,{entries:n,maxDepth:0,renderEntry:a,...r}),onProceedAppend:o,proceedColour:"red",titleText:s(c.length),...t}},[n,c.length]),x=(0,r.useCallback)(e=>!!n[e],[n]),p=(0,r.useCallback)(()=>o({}),[]);return{buildDeleteDialogProps:m,checklist:n,checks:c,getCheck:x,hasAllChecks:d,hasChecks:u,multipleItems:h,resetChecks:p,setAllChecks:(0,r.useCallback)(e=>o(a.reduce((t,n)=>(e&&(t[n]=e),t),{})),[a]),setCheck:(0,r.useCallback)((e,t)=>o((0,s.Ay)(e,t||void 0)),[])}}},27532:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var l=n(14232),r=n(28850),s=n(21635),i=n(74235);let o=(e,t)=>{let{key:n,re:l,replace:r,value:i}=t;return n?e[n]===i?e:(0,s.Ay)(n,i)(e):l?(0,s.WT)(l,i)(e):r||e},a=(e,t)=>{var n;let[s,a]=(0,l.useState)(!1),[c,d]=(0,l.useReducer)(o,{}),u=(0,l.useCallback)(e=>{var n,l;return null==t||null==(l=t.current)||null==(n=l.setMessage)?void 0:n.call(null,"api",e)},[t]),h=(0,l.useCallback)((e,n)=>{var l,r;null==t||null==(r=t.current)||null==(l=r.setMessage)||l.call(null,String(e),n)},[t]),m=(0,l.useCallback)((e,n)=>{var l,r;null==t||null==(r=t.current)||null==(l=r.setMessageRe)||l.call(null,e,n)},[t]),x=(0,l.useCallback)(e=>{d({replace:e})},[]),p=(0,l.useCallback)((e,t)=>{d({key:e,value:t})},[]),g=(0,l.useCallback)((e,t)=>{d({re:e,value:t})},[]),A=(0,l.useCallback)(e=>{h(e),p(e)},[h,p]),f=(0,l.useCallback)(e=>{m(e),g(e)},[m,g]),j=(0,l.useCallback)(e=>t=>{p(e,t)},[p]),b=(0,l.useCallback)(e=>t=>{let{isValid:n}=t;p(e,n)},[p]),k=(0,l.useCallback)(e=>()=>{A(e)},[A]),v=(0,l.useCallback)(e=>{let{body:l,getErrorMsg:s,msgKey:o="api",method:c,onError:d,onSuccess:u,setMsg:h=null==t||null==(n=t.current)?void 0:n.setMessage,successMsg:m,url:x}=e;a(!0),r.A.request({data:l,method:c,url:x}).then(()=>{null==h||h.call(null,o,{children:m,type:"info"}),null==u||u.call(null)}).catch(e=>{let t=(0,i.A)(e);t.children=s(t.children),null==h||h.call(null,o,t),null==d||d.call(null)}).finally(()=>{a(!1)})},[t,a]),y=(0,l.useMemo)(()=>Object.values(c).some(e=>!e),[c]);return{buildFinishInputTestBatchFunction:j,buildInputFirstRenderFunction:b,buildInputUnmountFunction:k,formValidity:c,isFormInvalid:y,isFormSubmitting:s,setApiMessage:u,setFormValidity:x,setMessage:h,setMessageRe:m,setValidity:p,setValidityRe:g,submitForm:v,unsetKey:A,unsetKeyRe:f}}},36150:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var l=n(37876),r=n(66998),s=n(14232),i=n(48937);let o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{formikUtils:s,operation:o,slotProps:a}=r,c={background:"blue",disabled:s.disabledSubmit,type:"submit",...null==a?void 0:a.submit};switch(o){case"add":c.children="Add";break;case"delete":c.background="red",c.children="Delete";break;default:c.children="Save"}return(0,l.jsx)(i.A,{actions:[c],...null==a?void 0:a.group})},a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s]=t,{children:i,formikUtils:o,slotProps:a}=s;return(0,l.jsx)(r.A,{component:"form",container:!0,onSubmit:e=>{e.preventDefault(),o.formik.handleSubmit(e)},spacing:"1em",width:"100%",...null==a?void 0:a.grid,children:i})};var c=n(67820);let d=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{formikUtils:s,slotProps:i}=r;return(0,l.jsx)(c.A,{count:1,messages:s.formikErrors,...null==i?void 0:i.messageGroup})};var u=n(93647);let h=e=>{var t,n;let i=(0,s.createContext)(null!=(n=null==e||null==(t=e.context)?void 0:t.defaultValue)?n:null);return{Form:e=>{let{children:t,config:n,operation:c,slotProps:h}=e,m=(0,u.A)(n),x=(0,s.useMemo)(()=>({formikUtils:m}),[m]);return(0,l.jsxs)(a,{formikUtils:m,...null==h?void 0:h.grid,children:[(0,l.jsx)(r.A,{width:"100%",children:(0,l.jsx)(i,{value:x,children:t})}),(0,l.jsx)(r.A,{width:"100%",children:(0,l.jsx)(d,{formikUtils:m,...null==h?void 0:h.messages})}),(0,l.jsx)(r.A,{width:"100%",children:(0,l.jsx)(o,{formikUtils:m,operation:c,...null==h?void 0:h.actions})})]})},FormContext:i,useFormContext:s.useContext}}},56014:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var l=n(37876),r=n(9982),s=n(35268),i=n(10595);let o=(0,s.Ay)(r.A)({color:i.a$,textDecorationColor:i.Qu}),a=e=>{let{children:t,...n}=e;return(0,l.jsx)(o,{underline:"always",variant:"subtitle1",...n,children:t})}},61931:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(37876),r=n(14232),s=n(89848),i=n(39294);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:t="",content:n="",titleText:o="",...a}={}}=e,c=(0,r.useRef)(null),[d,u]=(0,r.useState)({actionProceedText:t,content:n,titleText:o}),h=(0,r.useCallback)(e=>u(t=>{let{loading:n,...l}=t;return{...l,loading:e}}),[]),m=(0,r.useCallback)(e=>{var t,n;return null==c||null==(n=c.current)||null==(t=n.setOpen)?void 0:t.call(n,e)},[]),x=(0,r.useCallback)((e,t)=>{var n,l;null==c||null==(l=c.current)||null==(n=l.setOpen)||n.call(l,!1);let r=/error/i.test(String(e))?"error":"success";s.oR[r](t.children)},[]);return{confirmDialog:(0,r.useMemo)(()=>(0,l.jsx)(i.A,{...a,...d,ref:c}),[d,a]),confirmDialogRef:c,setConfirmDialogLoading:h,setConfirmDialogOpen:m,setConfirmDialogProps:u,finishConfirm:x}}},87356:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});let l={bcn:"Back-Channel Network",ifn:"Internet-Facing Network",mn:"Migration Network",sn:"Storage Network"}},95623:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/config",function(){return n(19161)}])}},e=>{e.O(0,[347,766,845,632,237,337,577,466,636,593,792],()=>e(e.s=95623)),_N_E=e.O()}]);