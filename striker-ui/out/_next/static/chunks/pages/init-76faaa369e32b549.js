(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{16820:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>O});var t=r(37876),i=r(87986),a=r(14232),s=r(23437),l=r(79982),o=r(64410),c=r(48171),u=r(63190),d=r(23934),m=r(86149),x=r(5806),h=r(89275),A=r(71401),p=r(69267),j=r(59571),f=r(91408);let g=f.Ik({adminPassword:f.Yj().required(),confirmAdminPassword:f.Yj().oneOf([f.KR("adminPassword")]).required(),domainName:f.Yj().required(),hostName:f.Yj().required(),hostNumber:f.ai().required(),organizationName:f.Yj().required(),organizationPrefix:f.Yj().min(1).max(5).required(),networkInit:h.hJ});var y=r(51677);let b=e=>{let{values:n}=e;return(0,t.jsxs)(o.Ay,{container:!0,spacing:".6em",columns:{xs:2},children:[(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.a3,{children:"Organization name"})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.NA,{children:n.organizationName})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.a3,{children:"Organization prefix"})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.NA,{children:n.organizationPrefix})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.a3,{children:"Striker number"})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.NA,{children:n.hostNumber})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.a3,{children:"Domain name"})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.NA,{children:n.domainName})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.a3,{children:"Host name"})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(y.NA,{children:n.hostName})}),(0,t.jsx)(h.Sf,{...e})]})};var v=r(588),w=r(4064),k=r(71986);let C=e=>{let n="",r="",t="",i="",a="",s={defaultbcn:{interfaces:["",""],ip:"",sequence:"1",subnetMask:"",type:"bcn"},defaultifn:{interfaces:["",""],ip:"",sequence:"1",subnetMask:"",type:"ifn"}},l="",o="",c="";if(e){({domain:n="",organization:o="",prefix:c=""}=e.variables),r=e.name;let{sequence:u}=e.variables;t=u?String(u):"",{dns:i="",gateway:a="",ntp:l=""}=e.netconf;let{networks:d={}}=e.netconf;s=(0,v.A)(d)}return{adminPassword:"",confirmAdminPassword:"",domainName:n,hostName:r,hostNumber:t,networkInit:{dns:i,gateway:a,networks:s,ntp:l},organizationName:o,organizationPrefix:c}},N=(e,n,r)=>[e,n,r].every(e=>e.length>0)?"".concat(e,"-striker").concat((0,j.A)(n),".").concat(r):"",S=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=e.split(/\s+/).filter(e=>!/^(?:and|of)$/.test(e)).slice(0,n),t="";return r.length>1?t=r.map(e=>e.substring(0,1).toLocaleLowerCase()).join(""):1===r.length&&(t=r[0].substring(0,n).toLocaleLowerCase()),t},P=e=>{let{detail:n,onSubmitSuccess:r,tools:i}=e,s=(0,a.useRef)(null),l=(0,k.A)({initialValues:C(n),onSubmit:(e,n)=>{let{setSubmitting:a}=n,l=(0,m.A)(e,s.current);i.confirm.prepare({actionProceedText:"Initialize",content:s.current&&(0,t.jsx)(b,{gatewayIface:l.gatewayInterface,ifaces:s.current,values:e}),onCancelAppend:()=>a(!1),onProceedAppend:()=>{i.confirm.loading(!0),d.A.put("/init",l).then(e=>{null==r||r.call(null,e.data),i.confirm.finish("Success",{children:(0,t.jsx)(t.Fragment,{children:"Successfully registered striker initialization job."})})}).catch(e=>{let n=(0,x.A)(e);n.children=(0,t.jsxs)(t.Fragment,{children:["Failed to register striker initialization job. ",n.children]}),i.confirm.finish("Error",n),a(!1)})},titleText:"Initialize ".concat(e.hostName," with the following?")}),i.confirm.open()},validationSchema:g}),{disabledSubmit:j,formik:f,formikErrors:y,getFieldChanged:v,handleChange:P}=l,z=(0,a.useMemo)(()=>"adminPassword",[]),q=(0,a.useMemo)(()=>"confirmAdminPassword",[]),M=(0,a.useMemo)(()=>"domainName",[]),L=(0,a.useMemo)(()=>"hostName",[]),D=(0,a.useMemo)(()=>"hostNumber",[]),I=(0,a.useMemo)(()=>"organizationName",[]),R=(0,a.useMemo)(()=>"organizationPrefix",[]),_=(0,a.useCallback)(e=>n=>{if(v(L))return;let{target:{value:r}}=n,{values:{domainName:t,hostNumber:i,organizationPrefix:a}}=f;switch(e){case M:t=r;break;case D:i=r;break;case R:a=r}let s=N(a,i,t);f.setFieldValue(L,s)},[M,f,v,L,D,R]);return(0,t.jsxs)(o.Ay,{columns:{xs:1,sm:2,md:3},component:"form",container:!0,onSubmit:e=>{e.preventDefault(),f.handleSubmit(e)},spacing:"1em",children:[(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsxs)(o.Ay,{columns:2,container:!0,spacing:"1em",children:[(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{id:I,label:"Organization Name",name:I,onBlur:e=>{if(v(R))return;let{target:{value:n}}=e,r=S(n);f.setFieldValue(R,r)},onChange:P,required:!0,value:f.values.organizationName})})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{baseInputProps:{maxLength:5},id:R,label:"Prefix",name:R,onBlur:_(R),onChange:P,required:!0,value:f.values.organizationPrefix})})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{id:D,label:"Striker #",name:D,onBlur:_(D),onChange:P,required:!0,value:f.values.hostNumber})})})]})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsxs)(o.Ay,{columns:1,container:!0,spacing:"1em",children:[(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{id:M,label:"Domain name",name:M,onBlur:_(M),onChange:P,required:!0,value:f.values.domainName})})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{disableAutofill:!0,id:L,label:"Host name",name:L,onChange:P,required:!0,value:f.values.hostName})})})]})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,sm:2,md:1,children:(0,t.jsxs)(o.Ay,{columns:{xs:1,sm:2,md:1},container:!0,spacing:"1em",children:[(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{disableAutofill:!0,id:z,label:"Admin password",name:z,onChange:P,required:!0,type:c.A.password,value:f.values.adminPassword})})}),(0,t.jsx)(o.Ay,{item:!0,xs:1,children:(0,t.jsx)(w.A,{input:(0,t.jsx)(p.A,{disableAutofill:!0,id:q,label:"Confirm admin password",name:q,onChange:P,required:!0,type:c.A.password,value:f.values.confirmAdminPassword})})})]})}),(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsx)(h.VT,{formikUtils:l,host:{parentSequence:NaN,sequence:Number(f.values.hostNumber),type:"striker",uuid:"local"},onFetchSuccess:e=>{s.current=e}})}),(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsx)(A.A,{count:1,messages:y})}),(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsx)(u.A,{actions:[{background:"blue",children:"Initialize",disabled:j,type:"submit"}]})})]})};var z=r(64632),q=r(19659),M=r(85210),L=r(94923),D=r(59664),I=r(95779),R=r(81302);let _=e=>{let{children:n}=e;return(0,t.jsx)(s.Zk,{sx:{marginLeft:{xs:"1em",sm:"auto"},marginRight:{xs:"1em",sm:"auto"},marginTop:"calc(50vh - 30vh - 6em)",width:{xs:void 0,sm:"90vw",md:"80vw",lg:"70vw",xl:"60vw"}},children:n})},Y=e=>{let{jobUuid:n,reinit:r}=e,i=(0,a.useRef)(null),c=(0,a.useMemo)(()=>{let e="login",n="/login";return r&&(e="striker config",n="/config"),{label:e,path:n}},[r]),u=(0,R.A)({follow:!0}),{data:d}=(0,D.A)("/init/job/".concat(n),{onSuccess:e=>{let{progress:n}=e;null===i.current&&100===n&&(i.current=setTimeout(e=>{window.location.replace(e)},3e3,c.path))},refreshInterval:2e3}),m=(0,I.A)(null==d?void 0:d.status);return d?(0,t.jsx)(_,{children:(0,t.jsxs)(o.Ay,{columns:1,container:!0,rowGap:".6em",children:[(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsxs)(y.a3,{children:["You will be auto redirected to ",c.label," after initialization completes. If not, you can manually access"," ",(0,t.jsx)(q.A,{display:"inline-flex",href:c.path,children:c.label})," ","after completion."]})}),(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsx)(z.z2,{progressPercentage:d.progress})}),(0,t.jsx)(o.Ay,{item:!0,width:"100%",children:(0,t.jsxs)(s.t$,{mb:0,mt:0,children:[(0,t.jsx)(s.WJ,{children:(0,t.jsx)(y.a3,{children:"Status"})}),(0,t.jsx)(s.BF,{children:(0,t.jsx)(L.A,{height:"60vh",lineHeight:"2",ref:u.callbackRef,children:(0,t.jsx)(M.A,{children:m.string})},"status")})]})})]})}):(0,t.jsx)(_,{children:(0,t.jsx)(l.A,{mt:0})})};var T=r(30764);let F=()=>{let[e,n]=(0,a.useState)(),{confirmDialog:r,finishConfirm:i,setConfirmDialogLoading:o,setConfirmDialogOpen:c,setConfirmDialogProps:u}=(0,T.A)({initial:{scrollContent:!0,wide:!0}}),d=(0,a.useMemo)(()=>({add:{open:()=>null},confirm:{finish:i,loading:o,open:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return c(e)},prepare:u},edit:{open:()=>null}}),[i,o,c,u]),{data:m,loading:x}=(0,D.A)("/host/local");return x?(0,t.jsx)(s.Zk,{children:(0,t.jsx)(l.A,{})}):e?(0,t.jsx)(Y,{jobUuid:e,reinit:!!m}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Zk,{children:[(0,t.jsx)(s.aO,{children:(0,t.jsxs)(y.HM,{children:[m?"Rei":"I","nitialize striker"]})}),(0,t.jsx)(P,{detail:m,onSubmitSuccess:e=>{n(e.jobUuid)},tools:d})]}),r]})},O=()=>(0,t.jsx)(i.A,{children:(0,t.jsx)(F,{})})},19659:(e,n,r)=>{"use strict";r.d(n,{A:()=>o});var t=r(37876),i=r(54773),a=r(94760),s=r(90890);let l=(0,i.Ay)(a.A)({color:s.a$,textDecorationColor:s.Qu}),o=e=>{let{children:n,...r}=e;return(0,t.jsx)(l,{underline:"always",variant:"subtitle1",...r,children:n})}},30764:(e,n,r)=>{"use strict";r.d(n,{A:()=>l});var t=r(37876),i=r(14232),a=r(75925),s=r(5755);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:n="",content:r="",titleText:l="",...o}={}}=e,c=(0,i.useRef)(null),[u,d]=(0,i.useState)({actionProceedText:n,content:r,titleText:l}),m=(0,i.useCallback)(e=>d(n=>{let{loading:r,...t}=n;return{...t,loading:e}}),[]),x=(0,i.useCallback)(e=>{var n,r;return null==c||null==(r=c.current)||null==(n=r.setOpen)?void 0:n.call(null,e)},[]),h=(0,i.useCallback)((e,n)=>d({actionProceedText:"",content:(0,t.jsx)(s.A,{...n}),showActionArea:!1,showClose:!0,titleText:e}),[]);return{confirmDialog:(0,i.useMemo)(()=>(0,t.jsx)(a.A,{...o,...u,ref:c}),[u,o]),confirmDialogRef:c,setConfirmDialogLoading:m,setConfirmDialogOpen:x,setConfirmDialogProps:d,finishConfirm:h}}},42658:(e,n,r)=>{"use strict";r.d(n,{A:()=>u});var t=r(37876),i=r(54773),a=r(12981),s=r(90890);let l="Decorator",o={ok:"".concat(l,"-ok"),warning:"".concat(l,"-warning"),error:"".concat(l,"-error"),off:"".concat(l,"-off")},c=(0,i.Ay)(a.A)({borderRadius:s.ax,height:"100%",width:"1.4em",["&.".concat(o.ok)]:{backgroundColor:s.ft},["&.".concat(o.warning)]:{backgroundColor:s.hr},["&.".concat(o.error)]:{backgroundColor:s.UH},["&.".concat(o.off)]:{backgroundColor:s.Qu}}),u=e=>{let{colour:n,...r}=e;return(0,t.jsx)(c,{...r,className:o[n]})}},71495:(e,n,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/init",function(){return r(16820)}])},87986:(e,n,r)=>{"use strict";r.d(n,{A:()=>a});var t=r(37876),i=r(64410);let a=e=>{let{children:n}=e;return(0,t.jsxs)(i.Ay,{columns:{lg:8,xs:1},container:!0,children:[(0,t.jsx)(i.Ay,{item:!0,xs:1}),(0,t.jsx)(i.Ay,{item:!0,lg:6,xs:1,children:n}),(0,t.jsx)(i.Ay,{item:!0,xs:1})]})}},94760:(e,n,r)=>{"use strict";r.d(n,{A:()=>C});var t=r(14232),i=r(69241),a=r(40393),s=r(4697),l=r(97369),o=r(80027),c=r(54773),u=r(30566),d=r(29548),m=r(78457),x=r(52196),h=r(77018),A=r(47951),p=r(45879);function j(e){return(0,p.Ay)("MuiLink",e)}let f=(0,A.A)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var g=r(16829);let y=e=>{let{theme:n,ownerState:r}=e,t=r.color,i=(0,g.Yn)(n,"palette.".concat(t,".main"),!1)||(0,g.Yn)(n,"palette.".concat(t),!1)||r.color,s=(0,g.Yn)(n,"palette.".concat(t,".mainChannel"))||(0,g.Yn)(n,"palette.".concat(t,"Channel"));return"vars"in n&&s?"rgba(".concat(s," / 0.4)"):(0,a.X4)(i,.4)};var b=r(37876);let v={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},w=e=>{let{classes:n,component:r,focusVisible:t,underline:i}=e,a={root:["root","underline".concat((0,o.A)(i)),"button"===r&&"button",t&&"focusVisible"]};return(0,s.A)(a,j,n)},k=(0,c.Ay)(h.A,{name:"MuiLink",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:r}=e;return[n.root,n["underline".concat((0,o.A)(r.underline))],"button"===r.component&&n.button]}})((0,d.A)(e=>{let{theme:n}=e;return{variants:[{props:{underline:"none"},style:{textDecoration:"none"}},{props:{underline:"hover"},style:{textDecoration:"none","&:hover":{textDecoration:"underline"}}},{props:{underline:"always"},style:{textDecoration:"underline","&:hover":{textDecorationColor:"inherit"}}},{props:e=>{let{underline:n,ownerState:r}=e;return"always"===n&&"inherit"!==r.color},style:{textDecorationColor:"var(--Link-underlineColor)"}},...Object.entries(n.palette).filter((0,m.A)()).map(e=>{let[r]=e;return{props:{underline:"always",color:r},style:{"--Link-underlineColor":n.vars?"rgba(".concat(n.vars.palette[r].mainChannel," / 0.4)"):(0,a.X4)(n.palette[r].main,.4)}}}),{props:{underline:"always",color:"textPrimary"},style:{"--Link-underlineColor":n.vars?"rgba(".concat(n.vars.palette.text.primaryChannel," / 0.4)"):(0,a.X4)(n.palette.text.primary,.4)}},{props:{underline:"always",color:"textSecondary"},style:{"--Link-underlineColor":n.vars?"rgba(".concat(n.vars.palette.text.secondaryChannel," / 0.4)"):(0,a.X4)(n.palette.text.secondary,.4)}},{props:{underline:"always",color:"textDisabled"},style:{"--Link-underlineColor":(n.vars||n).palette.text.disabled}},{props:{component:"button"},style:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(f.focusVisible)]:{outline:"auto"}}}]}})),C=t.forwardRef(function(e,n){let r=(0,x.b)({props:e,name:"MuiLink"}),a=(0,u.A)(),{className:s,color:o="primary",component:c="a",onBlur:d,onFocus:m,TypographyClasses:h,underline:A="always",variant:p="inherit",sx:j,...f}=r,[g,C]=t.useState(!1),N={...r,color:o,component:c,focusVisible:g,underline:A,variant:p},S=w(N);return(0,b.jsx)(k,{color:o,className:(0,i.A)(S.root,s),classes:h,component:c,onBlur:e=>{(0,l.A)(e.target)||C(!1),d&&d(e)},onFocus:e=>{(0,l.A)(e.target)&&C(!0),m&&m(e)},ref:n,ownerState:N,variant:p,...f,sx:[...void 0===v[o]?[{color:o}]:[],...Array.isArray(j)?j:[j]],style:{...f.style,..."always"===A&&"inherit"!==o&&!v[o]&&{"--Link-underlineColor":y({theme:a,ownerState:N})}}})})}},e=>{var n=n=>e(e.s=n);e.O(0,[559,208,925,623,296,901,133,341,314,636,593,792],()=>n(71495)),_N_E=e.O()}]);