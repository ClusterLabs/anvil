(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{41609:function(e,t,n){var r=n(280),i=n(64160),l=n(35694),s=n(1469),a=n(98612),o=n(44144),d=n(25726),u=n(36719),c=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||u(e)||l(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(d(e))return!r(e).length;for(var n in e)if(c.call(e,n))return!1;return!0}},24084:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mail-config",function(){return n(95954)}])},48801:function(e,t,n){"use strict";var r=n(85893),i=n(21640),l=n(93454),s=n(77527),a=n(4989),o=n(1142),d=n(58219),u=n(35562),c=n(90642),m=n(96245),p=n(82492),h=n.n(p),x=n(67294),g=n(39971),v=n(17512),j=n(23852);let f=e=>(0,r.jsx)(i.Z,{in:!0,children:(0,r.jsx)(l.Z,{...e})}),Z=(0,s.ZP)("ul")({padding:0}),y=a.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:n,getGroupLabel:i,label:l,ListboxProps:s,messageBoxProps:a,renderGroup:p,renderInput:b,required:w,sx:C,...A}=e,P=(0,x.useMemo)(()=>h()({paper:{sx:{backgroundColor:g.s7,["& .".concat(o.Z.groupLabel)]:{backgroundColor:g.s7}}}},t),[t]),O=(0,x.useMemo)(()=>h()({sx:{["& .".concat(o.Z.option)]:{'&[aria-selected="true"]':{backgroundColor:g.lD,["&.".concat(o.Z.focused)]:{backgroundColor:g.lD}},["&.".concat(o.Z.focused)]:{backgroundColor:g.lD}}}},s),[s]),M=(0,x.useMemo)(()=>p||i&&(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)(y,{component:"div",className:o.Z.groupLabel,children:i(e.group)}),(0,r.jsx)(Z,{className:o.Z.groupUl,children:e.children})]},e.key)),[i,p]),F=(0,x.useMemo)(()=>null!=b?b:e=>{let{fullWidth:t,InputProps:i,InputLabelProps:s,inputProps:a}=e,o={formControlProps:{fullWidth:t,ref:i.ref},inputLabelProps:s,inputProps:{className:i.className,endAdornment:i.endAdornment,inputProps:a,startAdornment:i.startAdornment,sx:{["& .".concat(d.Z.input)]:{margin:0}}},label:l,required:w,value:a.value};return null==n||n.call(null,o,e),(0,r.jsx)(j.Z,{...o})},[n,l,b,w]),I=(0,x.useMemo)(()=>h()({["& .".concat(d.Z.root," .").concat(o.Z.endAdornment)]:{right:"7px",["& .".concat(u.Z.root)]:{color:g.s7}}},C),[C]);return(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(m.Z,{autoHighlight:!0,autoSelect:w,PaperComponent:f,...A,ListboxProps:O,renderGroup:M,renderInput:F,slotProps:P,sx:I}),(0,r.jsx)(v.Z,{...a})]})}},39806:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=e=>e.reduce((e,t)=>{let{hostName:n,hostType:r,hostUUID:i,shortHostName:l}=t;return e[i]={name:n,short:l,type:r,uuid:i},e},{}),i=e=>e.reduce((e,t)=>{let{anvilDescription:n,anvilName:i,anvilUUID:l,hosts:s}=t;return e[l]={description:n,hosts:r(s),name:i,uuid:l},e},{})},95996:function(e,t,n){"use strict";n.d(t,{Um:function(){return i}});let r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[,r,i,l]=t;void 0!==l&&(r[i]=l)},i=function(e,t){let{set:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let i={};return Object.keys(r).forEach(l=>{e.test(l)?n(r,i,l,t):i[l]=r[l]}),i}};t.ZP=function(e,t){let{guard:n=()=>!0,set:i=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{[e]:l,...s}=r,a={...s};return n(r,e,t)&&i(r,a,e,t),a}}},95954:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(85893),i=n(8506),l=n(9008),s=n.n(l),a=n(25436),o=n(37906),d=n(67294),u=n(25934),c=n(42050),m=n(66389),p=n(5387),h=n(76740),x=n(11100),g=n(16310),v=n(74178),j=n(48313);let f=g.Rx().oneOf([0,1,2,3,4]),Z=g.Ry({delete:g.O7().optional(),level:f.required(),target:g.Ry({type:g.Z_().oneOf(["node","subnode"]).required(),uuid:(0,j.uI)().required()}),uuid:(0,j.uI)().optional()}),y=g.Vo(e=>g.Ry((0,v.Z)(e,Z))),b=g.Ry({alertOverrides:y,email:g.Z_().email().required(),language:g.Z_().oneOf(["en_CA"]).optional(),level:f.required(),name:g.Z_().required(),uuid:(0,j.uI)().optional()}),w=g.Vo(e=>g.Ry((0,v.Z)(e,b)));var C=n(48801),A=n(45328),P=n(37628),O=n(57882),M=n(12823);let F=[{displayValue:"Ignore",value:0},{displayValue:"Critical",value:1},{displayValue:"Warning",value:2},{displayValue:"Notice",value:3},{displayValue:"Info",value:4}];var I=e=>{let{alertOverrideTargetOptions:t,alertOverrideValueId:n,mailRecipientUuid:l,formikUtils:s}=e,a=(0,d.useMemo)(()=>null!=n?n:(0,u.Z)(),[n]),{formik:o}=s,{values:{[l]:c}}=o,{alertOverrides:{[a]:m}}=c,h=(0,d.useMemo)(()=>"".concat(l,".alertOverrides.").concat(a),[a,l]),x=(0,d.useMemo)(()=>"".concat(h,".remove"),[h]),g=(0,d.useMemo)(()=>"".concat(h,".target"),[h]),v=(0,d.useMemo)(()=>"".concat(h,".level"),[h]);return(0,r.jsxs)(i.ZP,{alignItems:"center",columns:{xs:1,sm:10},container:!0,justifyContent:"stretch",spacing:"1em",children:[(0,r.jsx)(i.ZP,{item:!0,xs:6,children:(0,r.jsx)(C.Z,{getOptionLabel:e=>e.name,id:g,isOptionEqualToValue:(e,t)=>e.uuid===t.uuid,label:"Target",noOptionsText:"No node or subnode found.",onChange:(e,t)=>o.setFieldValue(g,t,!0),openOnFocus:!0,options:t,renderOption:(e,t)=>(0,d.createElement)("li",{...e,key:"".concat(t.node,"-").concat(t.uuid)},"node"===t.type?(0,r.jsxs)(p.Z,{spacing:0,children:[(0,r.jsx)(O.Ac,{inheritColour:!0,children:t.name}),(0,r.jsx)(O.KI,{inheritColour:!0,children:t.description})]}):(0,r.jsx)(O.Ac,{inheritColour:!0,paddingLeft:".6em",children:t.name})),value:m.target})}),(0,r.jsx)(i.ZP,{item:!0,flexGrow:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(P.Z,{id:v,label:"Alert level",name:v,onChange:o.handleChange,selectItems:F,value:m.level})})}),(0,r.jsx)(i.ZP,{item:!0,width:"min-content",children:(0,r.jsx)(A.Z,{mapPreset:"delete",onClick:()=>{m.uuids?o.setFieldValue(x,!0,!0):o.setValues(e=>{let t={...e},{[l]:n}=t,{[a]:r,...i}=n.alertOverrides;return n.alertOverrides={...i},t})},size:"small"})})]})},S=n(18541),V=e=>{let{alertOverrideTargetOptions:t,formikUtils:n,mailRecipientUuid:i}=e,{formik:l}=n,{values:{[i]:s}}=l,{alertOverrides:a}=s;return(0,r.jsx)(S.Z,{allowAddItem:!0,edit:!0,header:"Alert override rules",listEmpty:"No alert overrides(s)",listItems:a,onAdd:()=>{let e=(0,u.Z)();l.setValues(t=>{let n={...t},{[i]:r}=n;return r.alertOverrides={...r.alertOverrides,[e]:{level:2,target:null}},n})},renderListItem:(e,l)=>!l.remove&&(0,r.jsx)(I,{alertOverrideTargetOptions:t,alertOverrideValueId:e,formikUtils:n,mailRecipientUuid:i})})},D=n(18050),U=n(23852),_=n(22582);let E=[{displayValue:(0,r.jsxs)(p.Z,{spacing:0,children:[(0,r.jsx)(O.Ac,{inheritColour:!0,fontWeight:"inherit",children:"Critical"}),(0,r.jsx)(O.KI,{inheritColour:!0,whiteSpace:"normal",children:"Alerts that could lead to imminent service interruption or unexpected loss of redundancy."})]}),value:1},{displayValue:(0,r.jsxs)(p.Z,{spacing:0,children:[(0,r.jsx)(O.Ac,{inheritColour:!0,fontWeight:"inherit",children:"Warning"}),(0,r.jsx)(O.KI,{inheritColour:!0,whiteSpace:"normal",children:"Alerts that require attention from administrators, such as redundancy loss due to load shedding, hardware in pre-failure, input power loss, temperature anomalies, etc."})]}),value:2},{displayValue:(0,r.jsxs)(p.Z,{spacing:0,children:[(0,r.jsx)(O.Ac,{inheritColour:!0,fontWeight:"inherit",children:"Notice"}),(0,r.jsx)(O.KI,{inheritColour:!0,whiteSpace:"normal",children:"Alerts that are generally safe to ignore, but might provide early warnings of developing issues or insight into system behaviour."})]}),value:3},{displayValue:(0,r.jsxs)(p.Z,{spacing:0,children:[(0,r.jsx)(O.Ac,{inheritColour:!0,fontWeight:"inherit",children:"Info"}),(0,r.jsx)(O.KI,{inheritColour:!0,whiteSpace:"normal",children:"Alerts that are almost always safe to ignore, but may be useful in testing and debugging."})]}),value:4}],k={1:"Critical",2:"Warning",3:"Notice",4:"Info"},q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/alert-override",{uuid:r}=e;return r?Object.values(e.alertOverrides).reduce((e,t)=>{let{remove:i,level:l,target:s,uuids:a}=t;if(a&&e.push(...Object.keys(a).map(e=>({method:"delete",url:"".concat(n,"/").concat(e)}))),s&&!i){var o;let t=null!==(o=s.subnodes)&&void 0!==o?o:[s.uuid];e.push(...t.map(e=>({body:{hostUuid:e,level:l,mailRecipientUuid:r},method:"post",url:n})))}return e},[]):[]};var R=e=>{let{alertOverrideTargetOptions:t,mailRecipientUuid:n,previousFormikValues:l,tools:s}=e,a=(0,d.useMemo)(()=>null!=n?n:(0,u.Z)(),[n]),p=(0,_.Z)({initialValues:null!=l?l:{[a]:{alertOverrides:{},email:"",language:"en_CA",level:2,name:""}},onSubmit:(e,t)=>{let{setSubmitting:n}=t,{[a]:i}=e,o="Add",d=(0,r.jsx)(r.Fragment,{children:"Failed to add mail recipient."}),u="post",c=(0,r.jsx)(r.Fragment,{children:"Mail recipient added."}),p="Add mail recipient with the following?",g="/mail-recipient";l&&(o="Update",d=(0,r.jsx)(r.Fragment,{children:"Failed to update mail server."}),u="put",c=(0,r.jsx)(r.Fragment,{children:"Mail recipient updated."}),p="Update ".concat(i.name," with the following?"),g+="/".concat(a));let{alertOverrides:v,uuid:j,...f}=i;s.confirm.prepare({actionProceedText:o,content:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.Z,{entries:f}),(0,r.jsx)(h.Z,{entries:{alertOverrides:Object.entries(v).reduce((e,t)=>{let[n,r]=t;return r.remove||!r.target||(e[n]={level:r.level,name:r.target.name}),e},{})}})]}),onCancelAppend:()=>n(!1),onProceedAppend:async()=>{s.confirm.loading(!0);let e=e=>{let t=(0,x.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:[d," ",t.children]}),s.confirm.finish("Error",t),n(!1)};m.Z[u](g,f).then(t=>{let{data:n}=t,r={...i};n&&(r.uuid=n.uuid),Promise.all(q(r,l&&l[a]).map(e=>m.Z[e.method](e.url,e.body))).then(()=>{s.confirm.finish("Success",{children:c}),s["post"===u?"add":"edit"].open(!1)}).catch(e)}).catch(e)},titleText:p}),s.confirm.open(!0)},validationSchema:w}),{disabledSubmit:g,formik:v,formikErrors:j,handleChange:f}=p,Z=(0,d.useMemo)(()=>"".concat(a,".email"),[a]),y=(0,d.useMemo)(()=>"".concat(a,".level"),[a]),b=(0,d.useMemo)(()=>"".concat(a,".name"),[a]);return(0,r.jsxs)(i.ZP,{columns:{xs:1,sm:2},component:"form",container:!0,onSubmit:e=>{e.preventDefault(),v.submitForm()},spacing:"1em",children:[(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{id:b,label:"Recipient name",name:b,onChange:f,required:!0,value:v.values[a].name})})}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{id:Z,label:"Recipient email",name:Z,onChange:f,required:!0,value:v.values[a].email})})}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(P.Z,{id:y,label:"Alert level",name:y,onChange:v.handleChange,required:!0,selectItems:E,selectProps:{MenuProps:{sx:{["& .".concat(o.Z.paper)]:{maxWidth:{md:"60%",lg:"40%"}}}},renderValue:e=>k[e]},value:v.values[a].level})})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(V,{alertOverrideTargetOptions:t,formikUtils:p,mailRecipientUuid:a})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(D.Z,{count:1,messages:j})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(c.Z,{actions:[{background:"blue",children:l?"Update":"Add",disabled:g,type:"submit"}]})})]})},N=n(39806),L=n(73846),T=e=>(0,r.jsx)(R,{...e}),H=n(71108),W=n(5499),K=()=>{let[e,t]=(0,d.useState)(),{altData:n,loading:i}=(0,W.Z)("/anvil",{mod:N.Z}),l=(0,d.useMemo)(()=>n&&Object.values(n).sort((e,t)=>e.name.localeCompare(t.name)).reduce((e,t)=>{let n={description:t.description,name:t.name,node:t.uuid,subnodes:[],type:"node",uuid:t.uuid},r=Object.values(t.hosts).sort((e,t)=>e.name.localeCompare(t.name)).reduce((e,r)=>{var i;return"dr"===r.type||(e.push({name:r.name,node:t.uuid,type:"subnode",uuid:r.uuid}),null===(i=n.subnodes)||void 0===i||i.push(r.uuid)),e},[]);return e.push(n,...r),e},[]),[n]),{fetch:s,loading:a}=(0,H.Z)({onData:e=>t(e),url:"/alert-override"}),o=(0,d.useMemo)(()=>{if(n&&e)return Object.entries(Object.values(e).reduce((e,t)=>{let{node:{uuid:n}}=t;return e[n]?e[n].push(t):e[n]=[t],e},{})).reduce((e,t)=>{let[r,i]=t,[l,...s]=i;if(i.length>1&&s.every(e=>{let{level:t}=e;return t===l.level})){let{0:{level:t}}=i,{[r]:l}=n;e[r]={level:t,target:{description:l.description,name:l.name,node:l.uuid,subnodes:i.map(e=>{let{subnode:{uuid:t}}=e;return t}),type:"node",uuid:l.uuid},uuids:i.reduce((e,t)=>{let{subnode:n,uuid:r}=t;return e[r]=n.uuid,e},{})}}else i.forEach(t=>{let{level:n,node:r,subnode:i,uuid:l}=t;e[i.uuid]={level:n,target:{name:i.name,node:r.uuid,type:"subnode",uuid:i.uuid},uuids:{[l]:i.uuid}}});return e},{})},[e,n]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(L.Z,{addHeader:"Add mail recipient",editHeader:e=>"Update ".concat(null==e?void 0:e.name),entriesUrl:"/mail-recipient",getAddLoading:e=>e||i,getDeleteErrorMessage:e=>{let{children:t,...n}=e;return{...n,children:(0,r.jsxs)(r.Fragment,{children:["Failed to delete mail recipient(s). ",t]})}},getDeleteHeader:e=>"Delete the following ".concat(e," mail recipient(s)?"),getDeleteSuccessMessage:()=>({children:(0,r.jsx)(r.Fragment,{children:"Successfully deleted mail recipient(s)."})}),getEditLoading:e=>e||a,listEmpty:"No mail recipient(s) found.",onItemClick:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let[,i]=n;e(...n),s(void 0,{params:{"mail-recipient":i}})},renderAddForm:e=>l&&(0,r.jsx)(R,{alertOverrideTargetOptions:l,tools:e}),renderDeleteItem:(e,t)=>{let{key:n}=t,i=null==e?void 0:e[n];return(0,r.jsx)(O.Ac,{children:null==i?void 0:i.name})},renderEditForm:(e,t)=>l&&t&&o&&(0,r.jsx)(T,{alertOverrideTargetOptions:l,mailRecipientUuid:t.uuid,previousFormikValues:{[t.uuid]:{alertOverrides:o,...t}},tools:e}),renderListItem:(e,t)=>{let{name:n}=t;return(0,r.jsx)(O.Ac,{children:n})}})})};let z=g.Ry({address:g.Z_().required(),authentication:g.Z_().oneOf(["none","plain-text","encrypted"]),confirmPassword:g.Z_().when("password",(e,t)=>String(e).length>0?t.required().oneOf([g.iH("password")]):t.optional()),heloDomain:g.Z_().required(),password:g.Z_().optional(),port:g.Rx().required(),security:g.Z_().oneOf(["none","starttls","tls-ssl"]),username:g.Z_().optional(),uuid:(0,j.uI)().required()}),G=g.Vo(e=>g.Ry((0,v.Z)(e,z)));var X=e=>{let{localhostDomain:t="",mailServerUuid:n,previousFormikValues:l,tools:s}=e,a=(0,d.useMemo)(()=>null!=n?n:(0,u.Z)(),[n]),{disabledSubmit:o,formik:p,formikErrors:g,handleChange:v}=(0,_.Z)({initialValues:null!=l?l:{[a]:{address:"",authentication:"none",heloDomain:t,port:587,security:"none",uuid:a}},onSubmit:(e,t)=>{let{setSubmitting:n}=t,{[a]:i}=e,o="Add",d=(0,r.jsx)(r.Fragment,{children:"Failed to add mail server."}),u="post",c=(0,r.jsx)(r.Fragment,{children:"Mail server added."}),p="Add mail server with the following?",g="/mail-server";l&&(o="Update",d=(0,r.jsx)(r.Fragment,{children:"Failed to update mail server."}),u="put",c=(0,r.jsx)(r.Fragment,{children:"Mail server updated."}),p="Update ".concat(i.address,":").concat(i.port," with the following?"),g+="/".concat(a));let{confirmPassword:v,uuid:j,...f}=i;s.confirm.prepare({actionProceedText:o,content:(0,r.jsx)(h.Z,{entries:f,hasPassword:!0}),onCancelAppend:()=>n(!1),onProceedAppend:()=>{s.confirm.loading(!0),m.Z[u](g,i).then(()=>{s.confirm.finish("Success",{children:c}),s["post"===u?"add":"edit"].open(!1)}).catch(e=>{let t=(0,x.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:[d," ",t.children]}),s.confirm.finish("Error",t),n(!1)})},titleText:p}),s.confirm.open(!0)},validationSchema:G}),j=(0,d.useMemo)(()=>"".concat(a,".address"),[a]),f=(0,d.useMemo)(()=>"".concat(a,".authentication"),[a]),Z=(0,d.useMemo)(()=>"".concat(a,".confirmPassword"),[a]),y=(0,d.useMemo)(()=>"".concat(a,".heloDomain"),[a]),b=(0,d.useMemo)(()=>"".concat(a,".password"),[a]),w=(0,d.useMemo)(()=>"".concat(a,".port"),[a]),C=(0,d.useMemo)(()=>"".concat(a,".security"),[a]),A=(0,d.useMemo)(()=>"".concat(a,".username"),[a]);return(0,r.jsxs)(i.ZP,{component:"form",onSubmit:e=>{e.preventDefault(),p.submitForm()},container:!0,columns:{xs:1,sm:2},spacing:"1em",children:[(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{id:j,label:"Server address",name:j,onChange:v,required:!0,value:p.values[a].address})})}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{id:w,label:"Server port",name:w,onChange:v,required:!0,type:"number",value:p.values[a].port})})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(P.Z,{id:C,label:"Server security type",name:C,onChange:v,required:!0,selectItems:["none","starttls","tls-ssl"],value:p.values[a].security})})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(P.Z,{id:f,label:"Server authentication method",name:f,onChange:v,required:!0,selectItems:["none","plain-text","encrypted"],value:p.values[a].authentication})})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{id:y,label:"HELO domain",name:y,onChange:v,required:!0,value:p.values[a].heloDomain})})}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{disableAutofill:!0,id:A,label:"Server username",name:A,onChange:v,value:p.values[a].username})})}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{disableAutofill:!0,id:b,label:"Server password",name:b,onChange:v,type:"password",value:p.values[a].password})})}),(0,r.jsx)(i.ZP,{display:{xs:"none",sm:"initial"},item:!0,sm:1}),(0,r.jsx)(i.ZP,{item:!0,xs:1,children:(0,r.jsx)(M.Z,{input:(0,r.jsx)(U.Z,{disableAutofill:!0,id:Z,label:"Confirm password",name:Z,onChange:v,type:"password",value:p.values[a].confirmPassword})})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(D.Z,{count:1,messages:g})}),(0,r.jsx)(i.ZP,{item:!0,width:"100%",children:(0,r.jsx)(c.Z,{actions:[{background:"blue",children:l?"Update":"Add",disabled:o,type:"submit"}]})})]})},$=e=>(0,r.jsx)(X,{...e}),B=()=>{let{data:e,loading:t}=(0,W.Z)("/host/local");return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(L.Z,{addHeader:"Add mail server",editHeader:e=>"Update ".concat(null==e?void 0:e.address,":").concat(null==e?void 0:e.port),entriesUrl:"/mail-server",getAddLoading:e=>e||t,getDeleteErrorMessage:e=>{let{children:t,...n}=e;return{...n,children:(0,r.jsxs)(r.Fragment,{children:["Failed to delete mail server(s). ",t]})}},getDeleteHeader:e=>"Delete the following ".concat(e," mail server(s)?"),getDeleteSuccessMessage:()=>({children:(0,r.jsx)(r.Fragment,{children:"Successfully deleted mail server(s)."})}),listEmpty:"No mail server(s) found",renderAddForm:t=>e&&(0,r.jsx)(X,{localhostDomain:e.variables.domain,tools:t}),renderDeleteItem:(e,t)=>{let{key:n}=t,i=null==e?void 0:e[n];return(0,r.jsxs)(O.Ac,{children:[null==i?void 0:i.address,":",null==i?void 0:i.port]})},renderEditForm:(e,t)=>t&&(0,r.jsx)($,{mailServerUuid:t.uuid,previousFormikValues:{[t.uuid]:t},tools:e}),renderListItem:(e,t)=>{let{address:n,port:i}=t;return(0,r.jsxs)(O.Ac,{children:[n,":",i]})}})})},J=n(65375),Q=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Mail Config"})}),(0,r.jsx)(a.Z,{}),(0,r.jsxs)(i.ZP,{container:!0,columns:{xs:1,md:6,lg:4},children:[(0,r.jsx)(i.ZP,{item:!0,xs:1}),(0,r.jsx)(i.ZP,{item:!0,xs:1,md:4,lg:2,children:(0,r.jsxs)(J.s_,{children:[(0,r.jsx)(J.V9,{children:(0,r.jsx)(O.z,{children:"Mail config"})}),(0,r.jsx)(J.TZ,{expandInitially:!0,header:"Manage mail servers",children:(0,r.jsx)(B,{})}),(0,r.jsx)(J.TZ,{expandInitially:!0,header:"Manage mail recipients",children:(0,r.jsx)(K,{})})]})})]})]})},25934:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});for(var r,i=new Uint8Array(16),l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=[],a=0;a<256;++a)s.push((a+256).toString(16).substr(1));var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!("string"==typeof n&&l.test(n)))throw TypeError("Stringified UUID is invalid");return n},d=function(e,t,n){var l=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)})();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=l[s];return t}return o(l)}}},function(e){e.O(0,[662,256,760,14,245,215,436,590,846,888,774,179],function(){return e(e.s=24084)}),_N_E=e.O()}]);