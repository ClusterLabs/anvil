(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{72315:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/anvil",function(){return n(38312)}])},42458:function(e,t,n){"use strict";var s=n(85893),a=n(89262),o=n(14440),r=n(77831);let c="Decorator",i={ok:"".concat(c,"-ok"),warning:"".concat(c,"-warning"),error:"".concat(c,"-error"),off:"".concat(c,"-off")},d=(0,a.ZP)(o.Z)({borderRadius:r.n_,height:"100%",width:"1.4em",["&.".concat(i.ok)]:{backgroundColor:r.Ej},["&.".concat(i.warning)]:{backgroundColor:r.Wd},["&.".concat(i.error)]:{backgroundColor:r.hM},["&.".concat(i.off)]:{backgroundColor:r.s7}});t.Z=e=>{let{colour:t,...n}=e;return(0,s.jsx)(d,{...n,className:i[t]})}},62848:function(e,t,n){"use strict";var s=n(67294);t.Z=function(){let{actionProceedText:e="",content:t="",titleText:n="",...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useState)({actionProceedText:e,content:t,titleText:n,...a})}},38312:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eM}});var s=n(85893),a=n(89262),o=n(14440),r=n(9008),c=n.n(r),i=n(11163),d=n(67294),l=n(92230),h=n(77831);let x=(0,d.createContext)({uuid:"",setAnvilUuid:()=>null});var u=e=>{let{children:t}=e,[n,a]=(0,d.useState)("");return(0,s.jsx)(x.Provider,{value:{uuid:n,setAnvilUuid:e=>{a(e)}},children:t})},m=n(23930),j=n(48430),g=n(11901);let v=new Map([["optimal","Optimal"],["not_ready","Not Ready"],["degraded","Degraded"]]);var p=n(42458),f=(e,t)=>fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),Z=n(59278);let _={anvilName:"".concat("SelectedAnvil","-anvilName")},w=(0,a.ZP)(o.Z)(()=>({display:"flex",flexDirection:"row",width:"100%",["& .".concat(_.anvilName)]:{paddingLeft:0}})),b=e=>{switch(e){case"optimal":return"ok";case"not_ready":return"warning";default:return"error"}},k=e=>-1!==e.hosts.findIndex(e=>{let{state:t}=e;return"offline"!==t});var N=e=>{let{list:t}=e,{uuid:n}=(0,d.useContext)(x),a=t.findIndex(e=>e.anvil_uuid===n);return(0,s.jsx)(w,{children:""!==n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{p:1,children:(0,s.jsx)(p.Z,{colour:b(t[a].anvil_state)})}),(0,s.jsxs)(o.Z,{p:1,flexGrow:1,className:_.anvilName,children:[(0,s.jsx)(Z.z,{text:t[a].anvil_name}),(0,s.jsx)(Z.z,{text:v.get(t[a].anvil_state)||"State unavailable"})]}),(0,s.jsx)(o.Z,{p:1,children:(0,s.jsx)(g.Z,{checked:k(t[a]),onChange:()=>{let{[a]:e}=t,{anvil_uuid:n}=e;f("".concat(l.Z,"/command/").concat(k(e)?"stop-an":"start-an","/").concat(n),{})}})})]})})},C=n(37969),y=n(59505),A=n(54965),P=e=>{let{anvil:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Ac,{text:t.anvil_name}),(0,s.jsx)(Z.Ac,{text:v.get(t.anvil_state)||"State unavailable"})]})},S=e=>{let t=[],n=[],s=[];return e.forEach(e=>{"optimal"===e.anvil_state?t.push(e):"not_ready"===e.anvil_state?n.push(e):s.push(e)}),[...s,...n,...t]};let B="AnvilList",T={root:"".concat(B,"-root"),divider:"".concat(B,"-divider"),button:"".concat(B,"-button"),anvil:"".concat(B,"-anvil")},U=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(T.root)]:{width:"100%",overflow:"auto",height:"30vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(T.divider)]:{backgroundColor:h.d},["& .".concat(T.button)]:{"&:hover":{backgroundColor:h.$T},paddingLeft:0},["& .".concat(T.anvil)]:{paddingLeft:0}}}),D=e=>{switch(e){case"optimal":return"ok";case"not_ready":return"warning";case"degraded":return"error";default:return"off"}};var M=e=>{let{list:t}=e,{uuid:n,setAnvilUuid:a}=(0,d.useContext)(x);return(0,d.useEffect)(()=>{""===n&&a(S(t)[0].anvil_uuid)},[n,t,a]),(0,s.jsx)(U,{children:(0,s.jsx)(C.Z,{component:"nav",className:T.root,"aria-label":"mailbox folders",children:S(t).map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Z,{className:T.divider}),(0,s.jsx)(A.ZP,{button:!0,className:T.button,onClick:()=>a(e.anvil_uuid),children:(0,s.jsxs)(o.Z,{display:"flex",flexDirection:"row",width:"100%",children:[(0,s.jsx)(o.Z,{p:1,children:(0,s.jsx)(p.Z,{colour:D(e.anvil_state)})}),(0,s.jsx)(o.Z,{p:1,flexGrow:1,className:T.anvil,children:(0,s.jsx)(P,{anvil:e})})]})},e.anvil_uuid)]}))})})},L=e=>{let{list:t}=e,n=[];return null==t||t.anvils.forEach(e=>{let{anvil_uuid:t}=e,{data:s}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(t));n.push({...e,...s})}),(0,s.jsxs)(m.s_,{children:[(0,s.jsx)(N,{list:n}),(0,s.jsx)(M,{list:S(n)})]})},I=n(56903),E=n(53541),R=()=>{let{uuid:e}=(0,d.useContext)(x),{data:{allocated:t=0,cores:n=0,threads:a=0}={},isLoading:o}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(e,"/cpu")),r=(0,d.useMemo)(()=>o?(0,s.jsx)(E.Z,{}):(0,s.jsxs)(I.Z,{spacing:0,children:[(0,s.jsx)(Z.Ac,{text:"Total Cores: ".concat(n)}),(0,s.jsx)(Z.Ac,{text:"Total Threads: ".concat(a)}),(0,s.jsx)(Z.Ac,{text:"Allocated Cores: ".concat(t)})]}),[t,n,o,a]);return(0,s.jsxs)(m.s_,{children:[(0,s.jsx)(m.V9,{children:(0,s.jsx)(Z.z,{text:"CPU"})}),r]})},F=n(74717);let z=new Map([["message_0222","The subnode is in an unknown state."],["message_0223","The subnode is a full cluster member."],["message_0224","The subnode is coming online; the cluster resource manager is running (step 2/3)."],["message_0225","The subnode is coming online; the subnode is a consensus cluster member (step 1/3)."],["message_0226","The subnode has booted, but it is not (yet) joining the cluster."]]);var G=n(40743);let O="AnvilHost",H={state:"".concat(O,"-state"),bar:"".concat(O,"-bar"),label:"".concat(O,"-label"),decoratorBox:"".concat(O,"-decoratorBox")},W=(0,a.ZP)(o.Z)(e=>{let{theme:t}=e;return{overflow:"auto",height:"28vh",paddingLeft:".3em",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"},["& .".concat(H.state)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(H.bar)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(H.label)]:{paddingTop:".3em"},["& .".concat(H.decoratorBox)]:{alignSelf:"stretch"}}}),V=(e,t)=>{let n=e.exec(t);return n?z.get(n[0])||"Error code not recognized":"Error code not found"},q=e=>{switch(e){case"online":return"ok";case"offline":return"off";default:return"warning"}};var X=e=>{let{hosts:t}=e,n=/^[a-zA-Z]/,a=/^(message_[0-9]+)/;return(0,s.jsx)(W,{children:t&&t.map(e=>{var t;return e?(0,s.jsxs)(m.Lg,{children:[(0,s.jsxs)(m.CH,{children:[(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(Z.Ac,{text:e.host_name})}),(0,s.jsx)(o.Z,{className:H.decoratorBox,children:(0,s.jsx)(p.Z,{colour:q(e.state)})}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(Z.Ac,{text:(null==e?void 0:null===(t=e.state)||void 0===t?void 0:t.replace(n,e=>e.toUpperCase()))||"Not Available"})})]}),(0,s.jsxs)(o.Z,{display:"flex",className:H.state,children:[(0,s.jsx)(o.Z,{className:H.label,children:(0,s.jsx)(Z.Ac,{text:"Power: "})}),(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(g.Z,{checked:"online"===e.state,onChange:()=>f("".concat(l.Z,"/command/").concat("online"===e.state?"stop-subnode":"start-subnode","/").concat(e.host_uuid),{})})}),(0,s.jsx)(o.Z,{className:H.label,children:(0,s.jsx)(Z.Ac,{text:"Member: "})}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(g.Z,{checked:"online"===e.state,disabled:"online"!==e.state,onChange:()=>f("".concat(l.Z,"/command/").concat("online"===e.state?"leave-an":"join-an","/").concat(e.host_uuid),{})})})]}),"online"!==e.state&&"offline"!==e.state&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{display:"flex",width:"100%",className:H.state,children:(0,s.jsx)(o.Z,{children:(0,s.jsx)(Z.Ac,{text:V(a,e.state_message)})})}),(0,s.jsx)(o.Z,{display:"flex",width:"100%",className:H.bar,children:(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(G.ko,{progressPercentage:e.state_percent})})})]})]},e.host_uuid):(0,s.jsx)(s.Fragment,{})})})},$=e=>null==e?void 0:e.filter(e=>e.host_uuid),J=e=>{let{anvil:t}=e,{uuid:n}=(0,d.useContext)(x),{data:a,isLoading:o}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(n)),r=t.findIndex(e=>e.anvil_uuid===n);return(0,s.jsxs)(m.s_,{children:[(0,s.jsx)(Z.z,{text:"Subnodes"}),o?(0,s.jsx)(E.Z,{}):(0,s.jsx)(s.Fragment,{children:-1!==r&&a&&(0,s.jsx)(X,{hosts:$(t[r].hosts).reduce((e,t,n)=>{let s=a.hosts[n];return s&&e.push(s),e},[])})})]})},K=n(62800),Q=()=>{let{uuid:e}=(0,d.useContext)(x),{data:{allocated:t="0",reserved:n="0",total:a="0"}={},isLoading:r}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(e,"/memory")),c=(0,d.useMemo)(()=>BigInt(t),[t]),i=(0,d.useMemo)(()=>BigInt(n),[n]),h=(0,d.useMemo)(()=>BigInt(a),[a]);return(0,s.jsxs)(m.s_,{children:[(0,s.jsx)(m.V9,{children:(0,s.jsx)(Z.z,{text:"Memory"})}),r?(0,s.jsx)(E.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Z,{display:"flex",width:"100%",children:[(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(Z.Ac,{text:"Allocated: ".concat((0,K.MU)(c))})}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(Z.Ac,{text:"Free: ".concat((0,K.MU)(h-(i+c)))})})]}),(0,s.jsx)(o.Z,{display:"flex",width:"100%",children:(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(G.CD,{allocated:Number((i+c)*BigInt(100)/h)})})}),(0,s.jsx)(o.Z,{display:"flex",justifyContent:"center",width:"100%",children:(0,s.jsx)(Z.Ac,{text:"Total: ".concat((0,K.MU)(h)," | Reserved: ").concat((0,K.MU)(i))})})]})]})},Y=e=>{let t=[],n={bonds:[]};return e.hosts.forEach(e=>{e.bonds.forEach(s=>{let a=t.findIndex(e=>e===s.bond_name);-1===a?(t.push(s.bond_name),n.bonds.push({bond_name:s.bond_name,bond_uuid:s.bond_uuid,bond_speed:0,bond_state:"degraded",hosts:[{host_name:e.host_name,host_uuid:e.host_uuid,link:s.links[0].is_active?s.links[0]:s.links[1]}]})):n.bonds[a].hosts.push({host_name:e.host_name,host_uuid:e.host_uuid,link:s.links[0].is_active?s.links[0]:s.links[1]})})}),n.bonds.forEach(e=>{let t=e.hosts[0].link.link_speed>e.hosts[1].link.link_speed?1:0;e.bond_speed=e.hosts[t].link.link_speed,e.bond_state=e.hosts[t].link.link_state}),n};let ee="Network",et={container:"".concat(ee,"-container"),root:"".concat(ee,"-root"),noPaddingLeft:"".concat(ee,"-noPaddingLeft"),divider:"".concat(ee,"-divider"),verticalDivider:"".concat(ee,"-verticalDivider")},en=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(et.container)]:{width:"100%",overflow:"auto",height:"32vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(et.root)]:{paddingTop:".7em",paddingBottom:".7em"},["& .".concat(et.noPaddingLeft)]:{paddingLeft:0},["& .".concat(et.divider)]:{backgroundColor:h.d},["& .".concat(et.verticalDivider)]:{height:"3.5em"}}}),es=e=>{switch(e){case"optimal":return"ok";case"degraded":default:return"warning";case"down":return"error"}};var ea=()=>{let{uuid:e}=(0,d.useContext)(x),[t,n]=(0,d.useState)(),{isLoading:a}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(e,"/network"),{onSuccess:e=>{n(Y(e))}});return(0,s.jsx)(m.s_,{children:(0,s.jsxs)(en,{children:[(0,s.jsx)(Z.z,{text:"Network"}),a?(0,s.jsx)(E.Z,{}):(0,s.jsx)(o.Z,{className:et.container,children:t&&t.bonds.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.Z,{className:et.root,display:"flex",flexDirection:"row",width:"100%",children:[(0,s.jsx)(o.Z,{p:1,className:et.noPaddingLeft,children:(0,s.jsx)(p.Z,{colour:es(e.bond_state)})}),(0,s.jsxs)(o.Z,{p:1,flexGrow:1,className:et.noPaddingLeft,children:[(0,s.jsx)(Z.Ac,{text:e.bond_name}),(0,s.jsx)(Z.Ac,{text:"".concat(e.bond_speed,"Mbps")})]}),(0,s.jsx)(o.Z,{display:"flex",style:{paddingTop:".5em"},children:e.hosts.map((t,n)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{p:1,style:{paddingTop:0,paddingBottom:0},children:(0,s.jsxs)(o.Z,{children:[(0,s.jsx)(Z.Ac,{text:t.host_name,selected:!1}),(0,s.jsx)(Z.Ac,{text:t.link.link_name})]})},t.host_name),n!==e.hosts.length-1&&(0,s.jsx)(y.Z,{className:"".concat(et.divider," ").concat(et.verticalDivider),orientation:"vertical",flexItem:!0})]}))})]}),(0,s.jsx)(y.Z,{className:et.divider})]}))})]})})},eo=n(14789),er=n(94246),ec=n(65086),ei=n(20869);let ed=new Map([["running","Running"],["idle","Idle"],["paused","Paused"],["in shutdown","Shutting Down"],["shut off","Off"],["crashed","Crashed"],["pmsuspended","PM Suspended"],["migrating","Migrating"]]);var el=n(98484),eh=n(77583),ex=n(99429),eu=n(97607),em=n(65895),ej=n(23833),eg=n(56466),ev=n(62848);let ep="Servers",ef={root:"".concat(ep,"-root"),divider:"".concat(ep,"-divider"),verticalDivider:"".concat(ep,"-verticalDivider"),button:"".concat(ep,"-button"),headerPadding:"".concat(ep,"-headerPadding"),hostsBox:"".concat(ep,"-hostsBox"),hostBox:"".concat(ep,"-hostBox"),checkbox:"".concat(ep,"-checkbox"),editButtonBox:"".concat(ep,"-editButtonBox"),dropdown:"".concat(ep,"-dropdown"),on:"".concat(ep,"-on"),off:"".concat(ep,"-off"),all:"".concat(ep,"-all")},eZ=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(ef.root)]:{width:"100%",overflow:"auto",height:"78vh",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%",overflow:"hidden"}},["& .".concat(ef.divider)]:{backgroundColor:h.d},["& .".concat(ef.verticalDivider)]:{height:"75%",paddingTop:"1em"},["& .".concat(ef.button)]:{"&:hover":{backgroundColor:h.$T},paddingLeft:0},["& .".concat(ef.headerPadding)]:{paddingLeft:".3em"},["& .".concat(ef.hostsBox)]:{padding:"1em",paddingRight:0},["& .".concat(ef.hostBox)]:{paddingTop:0},["& .".concat(ef.checkbox)]:{paddingTop:".8em"},["& .".concat(ef.editButtonBox)]:{paddingTop:".3em"},["& .".concat(ef.dropdown)]:{paddingTop:".8em",paddingBottom:".8em"},["& .".concat(ef.all)]:{paddingTop:".5em",paddingLeft:".3em"}}}),e_=e=>{switch(e){case"running":return"ok";case"shut off":return"off";case"crashed":return"error";default:return"warning"}},ew=(0,a.ZP)(er.Z)({["&.".concat(ef.on)]:{color:h.Ej},["&.".concat(ef.off)]:{color:h.hM}});var eb=e=>{var t;let{anvil:n}=e,[a,r]=(0,d.useState)(null),[c,i]=(0,d.useState)(!1),[u,g]=(0,d.useState)(!1),[v,_]=(0,d.useState)([]),[w,b]=(0,d.useState)(!1),k=(0,d.useRef)({}),[N,P]=(0,ev.Z)(),{uuid:S}=(0,d.useContext)(x),B=(0,d.useRef)([]),{data:T=[],isLoading:U}=(0,j.Z)("".concat(l.Z,"/server?anvilUUIDs=").concat(S)),D=e=>{B.current=[],e.filter(e=>"running"===e.serverState).length&&B.current.push("off"),e.filter(e=>"shut off"===e.serverState).length&&B.current.push("on")},M=e=>{r(null),v.length&&v.forEach(t=>{f("".concat(l.Z,"/command/").concat("on"===e?"start-server":"stop-server","/").concat(t),{})})},L=e=>{let t=v.indexOf(e);-1===t?v.push(e):v.splice(t,1),D(T.filter(e=>-1!==v.indexOf(e.serverUUID))),_([...v])},I=n.findIndex(e=>e.anvil_uuid===S),R=$(null===(t=n[I])||void 0===t?void 0:t.hosts),F=(0,d.useMemo)(()=>!v.length,[v.length]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.s_,{children:(0,s.jsxs)(eZ,{children:[(0,s.jsxs)(m.V9,{className:ef.headerPadding,sx:{marginBottom:0},children:[(0,s.jsx)(Z.z,{text:"Servers"}),c&&(0,s.jsx)(em.Z,{disabled:F,mapPreset:"delete",onClick:()=>{var e;P({actionProceedText:"Delete",content:"Are you sure you want to delete the selected server(s)? This action is not revertable.",onProceedAppend:()=>{el.Z.request({data:{serverUuids:v},method:"delete",url:"/server"}).catch(e=>{(0,eu.Z)(e)})},proceedColour:"red",titleText:"Delete ".concat(v.length," server(s)?")}),null===(e=k.current.setOpen)||void 0===e||e.call(null,!0)},variant:"redcontained"}),(0,s.jsx)(em.Z,{mapPreset:"edit",onClick:()=>i(!c),state:String(c)}),(0,s.jsx)(em.Z,{mapPreset:"add",onClick:()=>b(!0)})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{className:ef.headerPadding,display:"flex",children:(0,s.jsxs)(o.Z,{flexGrow:1,className:ef.dropdown,children:[(0,s.jsx)(ex.Z,{disabled:F,onClick:e=>{r(e.currentTarget)},startIcon:(0,s.jsx)(eo.Z,{}),children:"Power"}),(0,s.jsx)(ec.Z,{anchorEl:a,keepMounted:!0,open:!!a,onClose:()=>r(null),children:B.current.map(e=>(0,s.jsx)(ej.Z,{onClick:()=>M(e),children:(0,s.jsx)(ew,{className:ef[e],variant:"subtitle1",children:e.replace(/^[a-z]/,e=>e.toUpperCase())})},e))})]})}),(0,s.jsxs)(o.Z,{display:"flex",children:[(0,s.jsx)(o.Z,{children:(0,s.jsx)(ei.Z,{style:{color:h.lD},color:"secondary",checked:u,onChange:()=>{u?(D([]),_([])):(D(T),_(T.map(e=>e.serverUUID))),g(!u)}})}),(0,s.jsx)(o.Z,{className:ef.all,children:(0,s.jsx)(Z.Ac,{text:"All"})})]})]}),U?(0,s.jsx)(E.Z,{}):(0,s.jsx)(o.Z,{className:ef.root,children:(0,s.jsx)(C.Z,{component:"nav",children:T.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.ZP,{button:!0,className:ef.button,component:c?"div":"a",href:"/server?uuid=".concat(e.serverUUID,"&server_name=").concat(e.serverName,"&server_state=").concat(e.serverState),onClick:()=>L(e.serverUUID),children:(0,s.jsxs)(o.Z,{display:"flex",flexDirection:"row",width:"100%",children:[c&&(0,s.jsx)(o.Z,{className:ef.checkbox,children:(0,s.jsx)(ei.Z,{style:{color:h.lD},color:"secondary",checked:void 0!==v.find(t=>t===e.serverUUID)})}),(0,s.jsx)(o.Z,{p:1,children:(0,s.jsx)(p.Z,{colour:e_(e.serverState)})}),(0,s.jsxs)(o.Z,{p:1,flexGrow:1,children:[(0,s.jsx)(Z.Ac,{text:e.serverName}),(0,s.jsx)(Z.Ac,{text:ed.get(e.serverState)||"Not Available"})]}),(0,s.jsx)(o.Z,{display:"flex",className:ef.hostsBox,children:"shut off"!==e.serverState&&"crashed"!==e.serverState&&R.map((t,n)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{p:1,className:ef.hostBox,children:(0,s.jsx)(Z.Ac,{text:t.host_name,selected:e.serverHostUUID===t.host_uuid})},t.host_uuid),n!==R.length-1&&(0,s.jsx)(y.Z,{className:"".concat(ef.divider," ").concat(ef.verticalDivider),orientation:"vertical"})]}))})]})},e.serverUUID),(0,s.jsx)(y.Z,{className:ef.divider})]}))})})]})}),(0,s.jsx)(eg.Z,{dialogProps:{open:w},onClose:()=>{b(!1)}}),(0,s.jsx)(eh.Z,{closeOnProceed:!0,...N,ref:k})]})};let ek="SharedStorageHost",eN={fs:"".concat(ek,"-fs"),bar:"".concat(ek,"-bar"),decoratorBox:"".concat(ek,"-decoratorBox")},eC=(0,a.ZP)("div")(()=>({["& .".concat(eN.fs)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(eN.bar)]:{paddingLeft:".7em",paddingRight:".7em"},["& .".concat(eN.decoratorBox)]:{paddingRight:".3em"}}));var ey=e=>{let{group:t}=e,{storage_group_free:n,storage_group_total:a}=t,r=(0,d.useMemo)(()=>BigInt(n),[n]),c=(0,d.useMemo)(()=>BigInt(a),[a]),i=(0,d.useMemo)(()=>c-r,[r,c]),l=(0,d.useMemo)(()=>Number(i*BigInt(100)/c),[i,c]);return(0,s.jsxs)(eC,{children:[(0,s.jsxs)(o.Z,{display:"flex",width:"100%",className:eN.fs,children:[(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(Z.Ac,{text:"Used: ".concat((0,K.MU)(c-r))})}),(0,s.jsx)(o.Z,{children:(0,s.jsx)(Z.Ac,{text:"Free: ".concat((0,K.MU)(r))})})]}),(0,s.jsx)(o.Z,{display:"flex",width:"100%",className:eN.bar,children:(0,s.jsx)(o.Z,{flexGrow:1,children:(0,s.jsx)(G.CD,{allocated:l})})}),(0,s.jsx)(o.Z,{display:"flex",justifyContent:"center",width:"100%",children:(0,s.jsx)(Z.Ac,{text:"Total Storage: ".concat((0,K.MU)(c))})})]})};let eA={root:"".concat("SharedStorage","-root")},eP=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(eA.root)]:{overflow:"auto",height:"78vh",paddingLeft:".3em",paddingRight:".3em",[t.breakpoints.down(h.li)]:{height:"100%"}}}});var eS=()=>{let{uuid:e}=(0,d.useContext)(x),{data:t,isLoading:n}=(0,j.Z)("".concat(l.Z,"/anvil/").concat(e,"/store"));return(0,s.jsx)(m.s_,{children:(0,s.jsxs)(eP,{children:[(0,s.jsx)(Z.z,{text:"Shared Storage"}),n?(0,s.jsx)(E.Z,{}):(0,s.jsx)(o.Z,{className:eA.root,children:(null==t?void 0:t.storage_groups)&&t.storage_groups.map(e=>(0,s.jsxs)(m.Lg,{children:[(0,s.jsx)(m.CH,{children:(0,s.jsx)(Z.Ac,{text:e.storage_group_name})}),(0,s.jsx)(ey,{group:e},e.storage_group_uuid)]},e.storage_group_uuid))})]})})},eB=()=>{let[e,t]=(0,d.useState)(void 0);return(0,d.useEffect)(()=>{let e=()=>{t(window.innerWidth)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e};let eT="Anvil",eU={child:"".concat(eT,"-child"),server:"".concat(eT,"-server"),container:"".concat(eT,"-container")},eD=(0,a.ZP)("div")(e=>{let{theme:t}=e;return{["& .".concat(eU.child)]:{width:"22%",height:"100%",[t.breakpoints.down(h.li)]:{width:"50%"},[t.breakpoints.down("md")]:{width:"100%"}},["& .".concat(eU.server)]:{width:"35%",height:"100%",[t.breakpoints.down("md")]:{width:"100%"}},["& .".concat(eU.container)]:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"space-between",[t.breakpoints.down("md")]:{display:"block"}}}});var eM=()=>{let e=(0,i.useRouter)(),t=eB(),{anvil_uuid:n}=e.query,{uuid:a,setAnvilUuid:r}=(0,d.useContext)(x),{data:g,isLoading:v}=(0,j.Z)("".concat(l.Z,"/anvil/summary")),p=(0,d.useMemo)(()=>{let e;return g&&t&&(e=t>h.li?(0,s.jsxs)(o.Z,{className:eU.container,children:[(0,s.jsxs)(o.Z,{className:eU.child,children:[(0,s.jsx)(L,{list:g}),(0,s.jsx)(J,{anvil:g.anvils})]}),(0,s.jsx)(o.Z,{className:eU.server,children:(0,s.jsx)(eb,{anvil:g.anvils})}),(0,s.jsx)(o.Z,{className:eU.child,children:(0,s.jsx)(eS,{})}),(0,s.jsxs)(o.Z,{className:eU.child,children:[(0,s.jsx)(ea,{}),(0,s.jsx)(R,{}),(0,s.jsx)(Q,{})]})]}):(0,s.jsxs)(o.Z,{className:eU.container,children:[(0,s.jsxs)(o.Z,{className:eU.child,children:[(0,s.jsx)(eb,{anvil:g.anvils}),(0,s.jsx)(L,{list:g}),(0,s.jsx)(J,{anvil:g.anvils})]}),(0,s.jsxs)(o.Z,{className:eU.child,children:[(0,s.jsx)(ea,{}),(0,s.jsx)(eS,{}),(0,s.jsx)(R,{}),(0,s.jsx)(Q,{})]})]})),e},[g,t]),f=(0,d.useMemo)(()=>v?(0,s.jsx)(m.s_,{sx:{marginLeft:{xs:"1em",sm:"auto"},marginRight:{xs:"1em",sm:"auto"},marginTop:"calc(50vh - 10em)",maxWidth:{xs:void 0,sm:"60%",md:"50%",lg:"40%"},minWidth:"fit-content"},children:(0,s.jsx)(E.Z,{sx:{margin:"2em 2.4em"}})}):p,[p,v]);return(0,d.useEffect)(()=>{""===a&&r((null==n?void 0:n.toString())||"")},[a,n,r]),(0,s.jsxs)(eD,{children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"Anvil"})}),(0,s.jsxs)(u,{children:[(0,s.jsx)(F.Z,{}),f]})]})}}},function(e){e.O(0,[491,442,433,206,74,680,173,717,967,466,888,774,179],function(){return e(e.s=72315)}),_N_E=e.O()}]);