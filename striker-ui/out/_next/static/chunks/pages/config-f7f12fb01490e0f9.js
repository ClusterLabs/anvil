(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{29932:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},44286:function(e){e.exports=function(e){return e.split("")}},14259:function(e){e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var l=Array(o);++r<o;)l[r]=e[r+t];return l}},80531:function(e,t,n){var r=n(62705),o=n(29932),l=n(1469),s=n(33448),i=1/0,c=r?r.prototype:void 0,a=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(l(t))return o(t,e)+"";if(s(t))return a?a.call(t):"";var n=t+"";return"0"==n&&1/t==-i?"-0":n}},40180:function(e,t,n){var r=n(14259);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:r(e,t,n)}},98805:function(e,t,n){var r=n(40180),o=n(62689),l=n(83140),s=n(79833);e.exports=function(e){return function(t){var n=o(t=s(t))?l(t):void 0,i=n?n[0]:t.charAt(0),c=n?r(n,1).join(""):t.slice(1);return i[e]()+c}}},62689:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},83140:function(e,t,n){var r=n(44286),o=n(62689),l=n(676);e.exports=function(e){return o(e)?l(e):r(e)}},676:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",o="[^"+t+"]",l="(?:\ud83c[\udde6-\uddff]){2}",s="[\ud800-\udbff][\udc00-\udfff]",i="(?:"+n+"|"+r+")?",c="[\\ufe0e\\ufe0f]?",a="(?:\\u200d(?:"+[o,l,s].join("|")+")"+c+i+")*",d=RegExp(r+"(?="+r+")|(?:"+[o+n+"?",n,l,s,"["+t+"]"].join("|")+")"+(c+i+a),"g");e.exports=function(e){return e.match(d)||[]}},48403:function(e,t,n){var r=n(79833),o=n(11700);e.exports=function(e){return o(r(e).toLowerCase())}},79833:function(e,t,n){var r=n(80531);e.exports=function(e){return null==e?"":r(e)}},11700:function(e,t,n){var r=n(98805)("toUpperCase");e.exports=r},14453:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/config",function(){return n(51688)}])},47177:function(e,t,n){"use strict";var r=n(85893),o=n(90642),l=n(67294),s=n(45036),i=n(5387),c=n(71487),a=n(57882);let d=(0,l.forwardRef)((e,t)=>{let{actionCancelText:n="Cancel",actionProceedText:d,children:u,closeOnProceed:h=!1,contentContainerProps:p,dialogProps:x,disableProceed:f,loading:m,loadingAction:g=!1,onActionAppend:j,onCancelAppend:v,onProceedAppend:Z,openInitially:y,preActionArea:b,proceedButtonProps:w,proceedColour:P="blue",scrollContent:k=!1,scrollBoxProps:A,showActionArea:C=!0,showCancel:S,showClose:T,titleText:M,wide:I,content:F=u}=e,E=(0,l.useRef)(null),R=(0,l.useMemo)(()=>(0,c.Z)(F,a.Ac),[F]),D=(0,l.useMemo)(()=>(0,l.createElement)(k?s.VZ:o.Z,A,R),[R,A,k]),O=(0,l.useMemo)(()=>C&&(0,r.jsx)(s.ux,{cancelProps:{children:n,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==j||j.call(null,...t),null==v||v.call(null,...t)}},closeOnProceed:h,loading:g,proceedProps:{background:P,children:d,disabled:f,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==j||j.call(null,...t),null==Z||Z.call(null,...t)},...w},showCancel:S}),[n,d,h,f,g,j,v,Z,w,P,C,S]);return(0,l.useImperativeHandle)(t,()=>({setOpen:e=>{var t;return null===(t=E.current)||void 0===t?void 0:t.setOpen(e)}}),[]),(0,r.jsx)(s.Js,{dialogProps:x,header:M,loading:m,openInitially:y,ref:E,showClose:T,wide:I,children:(0,r.jsxs)(i.Z,{...p,children:[D,b,O]})})});d.displayName="ConfirmDialog",t.Z=d},18950:function(e,t,n){"use strict";var r=n(85893),o=n(67294),l=n(47177);let s=(0,o.forwardRef)((e,t)=>{let{children:n,contentContainerProps:s,dialogProps:i,onSubmitAppend:c,proceedButtonProps:a,scrollBoxProps:d,scrollContent:u,...h}=e,p=(0,o.useMemo)(()=>({...s,component:"form",onSubmit:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t;r.preventDefault(),null==c||c.call(null,...t)}}),[s,c]),x=(0,o.useMemo)(()=>({...d,sx:u?{overflowX:"hidden",paddingTop:".6em",...null==d?void 0:d.sx}:null==d?void 0:d.sx}),[d,u]);return(0,r.jsx)(l.Z,{dialogProps:i,contentContainerProps:p,proceedButtonProps:{...a,type:"submit"},scrollContent:u,scrollBoxProps:x,wide:!0,...h,ref:t,children:n})});s.displayName="FormDialog",t.Z=s},76740:function(e,t,n){"use strict";var r=n(85893),o=n(90642),l=n(19304),s=n(47407),i=n(35338),c=n(44400),a=n(5387),d=n(57882);let u=e=>{let{entry:t}=e;return(0,r.jsx)(d.$_,{whiteSpace:"nowrap",children:String(t)})},h=e=>{let{entry:t,key:n}=e;return i.JW.test(n)?(0,r.jsx)(d.PJ,{wrapper:"mono",children:String(t)}):u(e)},p=e=>{let{entry:t,hasPassword:n}=e;return["",null,void 0].some(e=>t===e)||Number.isNaN(t)?(0,r.jsx)(d.Ac,{children:"none"}):n?h(e):u(e)},x=e=>{let{depth:t,entry:n,getLabel:l,hasPassword:s,key:i,nest:u,renderValue:h}=e;return(0,r.jsxs)(a.Z,{fullWidth:!0,growFirst:!0,row:!0,maxWidth:"100%",children:[(0,r.jsx)(d.Ac,{children:l({cap:c.Z,depth:t,entry:n,hasPassword:s,key:i})}),(0,r.jsx)(o.Z,{sx:{maxWidth:"100%",overflowX:"scroll"},children:!u&&h(p,{depth:t,entry:n,hasPassword:s,key:i})})]})},f=e=>{let{key:t}=e;return/confirm|uuid/i.test(t)},m=e=>{let{depth:t=0,entries:n,getEntryLabel:o,getListProps:i,getListItemProps:c,hasPassword:a,listKey:d,maxDepth:u,renderEntry:h,renderEntryValue:p,skip:x}=e,g=[];Object.entries(n).forEach(e=>{let[n,s]=e,i=null!==s&&"object"==typeof s,d=i?null:s,j={depth:t,entry:d,hasPassword:a,key:n};x(f,j)||g.push((0,r.jsx)(l.ZP,{sx:{paddingLeft:"".concat(t,"em")},...null==c?void 0:c.call(null,j),children:h({depth:t,entry:d,getLabel:o,hasPassword:a,key:n,nest:i,renderValue:p})},"form-summary-entry-".concat(n))),i&&t<u&&g.push(m({depth:t+1,entries:s,getEntryLabel:o,hasPassword:a,listKey:n,maxDepth:u,renderEntry:h,renderEntryValue:p,skip:x}))});let j="form-summary-list-".concat(null!=d?d:"root");return(0,r.jsx)(s.Z,{dense:!0,disablePadding:!0,...null==i?void 0:i.call(null,{depth:t,entries:n,key:d}),children:g},j)};t.Z=e=>{let{entries:t,getEntryLabel:n=e=>{let{cap:t,key:n}=e;return t(n)},getListProps:r,getListItemProps:o,hasPassword:l=!1,maxDepth:s=3,renderEntry:i=x,renderEntryValue:c=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)},skip:a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)}}=e;return m({entries:t,getEntryLabel:n,getListProps:r,getListItemProps:o,hasPassword:l,maxDepth:s,renderEntry:i,renderEntryValue:c,skip:a})}},65716:function(e,t,n){"use strict";var r=n(85893),o=n(77527),l=n(61769),s=n(39971);let i=(0,o.ZP)(l.Z)({color:s.lD,textDecorationColor:s.s7});t.Z=e=>{let{children:t,...n}=e;return(0,r.jsx)(i,{underline:"always",variant:"subtitle1",...n,children:t})}},81013:function(e,t,n){"use strict";var r=n(85893),o=n(67294),l=n(95996),s=n(76740);t.Z=e=>{let{list:t={}}=e,[n,i]=(0,o.useState)({}),c=(0,o.useMemo)(()=>Object.keys(t),[t]),a=(0,o.useMemo)(()=>Object.keys(n),[n]),d=(0,o.useMemo)(()=>a.length===c.length,[a.length,c.length]),u=(0,o.useMemo)(()=>a.length>0,[a.length]),h=(0,o.useMemo)(()=>c.length>1,[c.length]),p=(0,o.useCallback)(e=>{let{confirmDialogProps:t={},formSummaryProps:o={},getConfirmDialogTitle:l,onProceedAppend:i,renderEntry:c}=e;return{actionProceedText:"Delete",content:(0,r.jsx)(s.Z,{entries:n,maxDepth:0,renderEntry:c,...o}),onProceedAppend:i,proceedColour:"red",titleText:l(a.length),...t}},[n,a.length]),x=(0,o.useCallback)(e=>!!n[e],[n]);return{buildDeleteDialogProps:p,checklist:n,checks:a,getCheck:x,hasAllChecks:d,hasChecks:u,multipleItems:h,resetChecks:(0,o.useCallback)(()=>i({}),[]),setAllChecks:(0,o.useCallback)(e=>i(c.reduce((t,n)=>(e&&(t[n]=e),t),{})),[c]),setCheck:(0,o.useCallback)((e,t)=>i((0,l.ZP)(e,t||void 0)),[])}}},40657:function(e,t,n){"use strict";var r=n(85893),o=n(67294),l=n(47177),s=n(29873);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{initial:{actionProceedText:t="",content:n="",titleText:i="",...c}={}}=e,a=(0,o.useRef)(null),[d,u]=(0,o.useState)({actionProceedText:t,content:n,titleText:i}),h=(0,o.useCallback)(e=>u(t=>{let{loading:n,...r}=t;return{...r,loading:e}}),[]),p=(0,o.useCallback)(e=>{var t,n;return null==a?void 0:null===(n=a.current)||void 0===n?void 0:null===(t=n.setOpen)||void 0===t?void 0:t.call(null,e)},[]),x=(0,o.useCallback)((e,t)=>u({actionProceedText:"",content:(0,r.jsx)(s.Z,{...t}),showActionArea:!1,showClose:!0,titleText:e}),[]);return{confirmDialog:(0,o.useMemo)(()=>(0,r.jsx)(l.Z,{...c,...d,ref:a}),[d,c]),confirmDialogRef:a,setConfirmDialogLoading:h,setConfirmDialogOpen:p,setConfirmDialogProps:u,finishConfirm:x}}},84337:function(e,t,n){"use strict";var r=n(67294);t.Z=function(){let{actionProceedText:e="",content:t="",titleText:n="",...o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.useState)({actionProceedText:e,content:t,titleText:n,...o})}},94047:function(e,t){"use strict";t.Z={bcn:"Back-Channel Network",ifn:"Internet-Facing Network",mn:"Migration Network",sn:"Storage Network"}},44400:function(e,t,n){"use strict";var r=n(48403),o=n.n(r);t.Z=e=>{let t=e.replace(/([a-z\d])([A-Z])/g,"$1 $2");return o()(t)}},53819:function(e,t,n){"use strict";var r=n(54743),o=n(85893);t.Z=(0,r.Z)((0,o.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check")},61769:function(e,t,n){"use strict";n.d(t,{Z:function(){return C}});var r=n(63366),o=n(87462),l=n(67294),s=n(8780),i=n(94780),c=n(66643),a=n(77527),d=n(29567),u=n(43300),h=n(7491),p=n(96788),x=n(1588),f=n(34867);function m(e){return(0,f.Z)("MuiLink",e)}let g=(0,x.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var j=n(54844),v=n(41796);let Z={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},y=e=>Z[e]||e;var b=e=>{let{theme:t,ownerState:n}=e,r=y(n.color),o=(0,j.DW)(t,"palette.".concat(r),!1)||n.color,l=(0,j.DW)(t,"palette.".concat(r,"Channel"));return"vars"in t&&l?"rgba(".concat(l," / 0.4)"):(0,v.Fq)(o,.4)},w=n(85893);let P=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],k=e=>{let{classes:t,component:n,focusVisible:r,underline:o}=e,l={root:["root","underline".concat((0,c.Z)(o)),"button"===n&&"button",r&&"focusVisible"]};return(0,i.Z)(l,m,t)},A=(0,a.ZP)(p.Z,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,t["underline".concat((0,c.Z)(n.underline))],"button"===n.component&&t.button]}})(e=>{let{theme:t,ownerState:n}=e;return(0,o.Z)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,o.Z)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:b({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(g.focusVisible)]:{outline:"auto"}})});var C=l.forwardRef(function(e,t){let n=(0,d.Z)({props:e,name:"MuiLink"}),{className:i,color:c="primary",component:a="a",onBlur:p,onFocus:x,TypographyClasses:f,underline:m="always",variant:g="inherit",sx:j}=n,v=(0,r.Z)(n,P),{isFocusVisibleRef:y,onBlur:b,onFocus:C,ref:S}=(0,u.Z)(),[T,M]=l.useState(!1),I=(0,h.Z)(t,S),F=(0,o.Z)({},n,{color:c,component:a,focusVisible:T,underline:m,variant:g}),E=k(F);return(0,w.jsx)(A,(0,o.Z)({color:c,className:(0,s.Z)(E.root,i),classes:f,component:a,onBlur:e=>{b(e),!1===y.current&&M(!1),p&&p(e)},onFocus:e=>{C(e),!0===y.current&&M(!0),x&&x(e)},ref:I,ownerState:F,variant:g,sx:[...Object.keys(Z).includes(c)?[]:[{color:c}],...Array.isArray(j)?j:[j]]},v))})},51688:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eh}});var r=n(85893),o=n(8506),l=n(9008),s=n.n(l),i=n(67294),c=n(47177),a=n(25436),d=n(94047),u=n(46315),h=n(66389);let p=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=n=>{var r;null===(r=t.current.setMessage)||void 0===r||r.call(null,e,n)};return n&&(n[r]=o),o};var x=(e,t)=>{let n={};return e instanceof Array?e.reduce((e,n)=>(p(n,t,e),e),n):Object.entries(e).reduce((e,n)=>{let[r,o]=n;return p(o,t,e,r),e},n)},f=n(95996),m=n(50385),g=n(47856),j=n(57882),v=e=>{let{checkboxProps:t,checked:n,formControlLabelProps:o,label:l,onChange:s}=e,c=(0,i.useMemo)(()=>"string"==typeof l?(0,r.jsx)(j.Ac,{children:l}):l,[l]);return(0,r.jsx)(m.Z,{...o,control:(0,r.jsx)(g.Z,{...t,checked:n,onChange:s}),label:c})},Z=n(5387),y=n(91905),b=n(11100),w=n(45328),P=n(2911),k=n(18050),A=n(23852),C=n(68007);let S={dbPort:"dbPort",ipAddress:"ipAddress",password:"password",sshPort:"sshPort",user:"user"},T="IP address",M="Password",I=(0,i.forwardRef)((e,t)=>{let{formGridColumns:n=2}=e,o=(0,i.useRef)({}),l=(0,i.useRef)({}),s=(0,i.useRef)({}),a=(0,i.useRef)({}),d=(0,i.useRef)({}),p=(0,i.useRef)({}),[m,g]=(0,i.useState)({}),[I,F]=(0,i.useState)(!0),[E,R]=(0,i.useState)(!1),D=(0,i.useCallback)(e=>t=>{let{isValid:n}=t;g((0,f.ZP)(e,n))},[]),O=(0,i.useCallback)(e=>t=>{g((0,f.ZP)(e,t))},[]),N=(0,i.useCallback)(e=>{var t;null===(t=p.current.setMessage)||void 0===t||t.call(null,"api",e)},[]),_=(0,i.useMemo)(()=>Object.values(m).some(e=>!e),[m]),B=(0,i.useMemo)(()=>x(S,p),[]);return(0,r.jsx)(c.Z,{actionProceedText:"Add",content:(0,r.jsx)(y.Z,{columns:{xs:1,sm:n},layout:{"add-peer-ip-address":{children:(0,r.jsx)(Z.Z,{row:!0,spacing:".3em",children:(0,r.jsx)(P.Z,{input:(0,r.jsx)(A.Z,{id:"add-peer-ip-address-input",inputProps:{readOnly:!0,onFocus:e=>{e.target.readOnly=!1}},label:T}),inputTestBatch:(0,C._)(T,()=>{B.ipAddress()},{onFinishBatch:O(S.ipAddress)},e=>{B.ipAddress({children:e})}),onFirstRender:D(S.ipAddress),ref:l,required:!0})})},"add-peer-password":{children:(0,r.jsx)(P.Z,{input:(0,r.jsx)(A.Z,{id:"add-peer-password-input",label:M,type:u.Z.password}),inputTestBatch:(0,C.Gn)(M,()=>{B.password()},{onFinishBatch:O(S.password)},e=>{B.password({children:e})}),onFirstRender:D(S.password),ref:s,required:!0})},"add-peer-is-ping":{children:(0,r.jsx)(v,{checked:I,label:"Ping",onChange:(e,t)=>{F(t)}}),sx:{display:"flex"}},"add-peer-message-group":{children:(0,r.jsx)(k.Z,{count:1,defaultMessageType:"warning",ref:p}),sm:n}},spacing:"1em"}),dialogProps:{PaperProps:{sx:{minWidth:"16em"}}},loadingAction:E,onActionAppend:()=>{N()},onProceedAppend:()=>{var e,t,n,r,i;R(!0),h.Z.post("/host/connection",{ipAddress:null===(e=l.current.getValue)||void 0===e?void 0:e.call(null),isPing:I,password:null===(t=s.current.getValue)||void 0===t?void 0:t.call(null),port:null===(n=o.current.getValue)||void 0===n?void 0:n.call(null),sshPort:null===(r=a.current.getValue)||void 0===r?void 0:r.call(null),user:null===(i=d.current.getValue)||void 0===i?void 0:i.call(null)}).then(()=>{N({children:"Successfully initiated the peer addition. You can continue to edit the field(s) to add another peer.",type:"info"})}).catch(e=>{let t=(0,b.Z)(e);t.children="Failed to add the given peer. ".concat(t.children),N(t)}).finally(()=>{R(!1)})},proceedButtonProps:{disabled:_},ref:t,titleText:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.z,{children:"Add a peer"}),(0,r.jsx)(w.Z,{mapPreset:"close",onClick:()=>{if(t&&"current"in t){var e;null===(e=t.current.setOpen)||void 0===e||e.call(null,!1)}},variant:"redcontained"})]})})});I.displayName="AddPeerDialog";var F=n(18541),E=n(29873),R=n(65375),D=n(38444),O=n(53819),N=n(39971);let _={small:j.KI,medium:j.Ac},B={size:"small",stateMap:new Map([[!1,(0,r.jsx)(D.Z,{sx:{color:N.Wd}},"state-false")],[!0,(0,r.jsx)(O.Z,{sx:{color:N.Ej}},"state-true")]])},U=e=>{let{label:t,size:n=B.size,state:o,stateMap:l=B.stateMap}=e,s=l.get(o);return(0,r.jsxs)(Z.Z,{row:!0,spacing:".3em",children:[s&&(0,i.cloneElement)(s,{fontSize:n}),(0,i.createElement)(_[n],{},t)]})};U.defaultProps=B;var L=n(5499),W=e=>{let{refreshInterval:t=6e4}=e,n=(0,i.useRef)({}),l=(0,i.useRef)({}),[s,a]=(0,i.useState)(void 0),[u,p]=(0,i.useState)({actionProceedText:"",content:"",titleText:""}),[x,f]=(0,i.useState)({}),[m,g]=(0,i.useState)(!1),[v,y]=(0,i.useState)({}),w=(0,i.useMemo)(()=>s&&(0,r.jsx)(o.ZP,{item:!0,sm:2,xs:1,children:(0,r.jsx)(E.Z,{...s})}),[s]),{loading:P}=(0,L.Z)("/host/connection",{refreshInterval:t,onError:e=>{a({children:"Failed to get connection data. Error: ".concat(e),type:"error"})},onSuccess:e=>{let{local:{inbound:{ipAddress:t,port:n,user:r},peer:o}}=e;f(e=>Object.entries(t).reduce((t,o)=>{let[l,{ifaceId:s,networkLinkNumber:i,networkNumber:c,networkType:a}]=o;return t[l]={...e[l],dbPort:n,dbUser:r,ifaceId:s,ipAddress:l,networkLinkNumber:i,networkNumber:c,networkType:a},t},{})),y(e=>Object.entries(o).reduce((t,n)=>{let[r,{hostUUID:o,isPing:l,port:s,user:i}]=n,c="".concat(i,"@").concat(r,":").concat(s);return t[c]={...e[c],dbPort:s,dbUser:i,hostUUID:o,ipAddress:r,isPingTest:l},t},{}))}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.TZ,{header:"Configure striker peers",loading:P,children:(0,r.jsxs)(o.ZP,{columns:{xs:1,sm:2},container:!0,spacing:"1em",children:[(0,r.jsx)(o.ZP,{item:!0,xs:1,children:(0,r.jsx)(F.Z,{header:"Inbound connections",listEmpty:(0,r.jsx)(j.Ac,{align:"center",children:"No inbound connections found."}),listItemKeyPrefix:"config-peers-inbound-connection",listItems:x,renderListItem:(e,t)=>{let{dbPort:n,dbUser:o,ifaceId:l,networkNumber:s,networkType:i}=t,c=d.Z[i]&&s?"".concat(d.Z[i]," ").concat(s):"Unknown network; interface: ".concat(l);return(0,r.jsxs)(Z.Z,{spacing:0,sx:{width:"100%"},children:[(0,r.jsx)(j.$_,{children:"".concat(o,"@").concat(e,":").concat(n)}),(0,r.jsx)(j.KI,{children:c})]})}})}),(0,r.jsx)(o.ZP,{item:!0,xs:1,children:(0,r.jsx)(F.Z,{header:"Peer connections",allowEdit:!0,edit:m,listEmpty:(0,r.jsx)(j.Ac,{align:"center",children:"No peer connections found."}),listItemKeyPrefix:"config-peers-peer-connection",listItems:v,onAdd:()=>{var e;null===(e=n.current.setOpen)||void 0===e||e.call(null,!0)},onDelete:()=>{let e=Object.entries(v).reduce((e,t)=>{let[,{hostUUID:n,isChecked:r}]=t;return r&&e.local.push(n),e},{local:[]}),t=e.local.length;if(t>0){var n;p({actionProceedText:"Delete",content:"The peer relationship between this striker and the selected ".concat(t," host(s) will terminate. The removed peer(s) can be re-added later."),onProceedAppend:()=>{h.Z.delete("/host/connection",{data:e}).catch(e=>{let t=(0,b.Z)(e);t.children="Failed to delete peer connection(s). ".concat(t.children),a(t)})},proceedColour:"red",titleText:"Delete ".concat(t," peer(s) from this striker?")}),null===(n=l.current.setOpen)||void 0===n||n.call(null,!0)}},onEdit:()=>{g(e=>!e)},onItemCheckboxChange:(e,t,n)=>{v[e].isChecked=n,y(e=>({...e}))},renderListItem:(e,t)=>{let{isPingTest:n=!1}=t;return(0,r.jsx)(Z.Z,{row:!0,spacing:0,children:(0,r.jsxs)(Z.Z,{spacing:0,children:[(0,r.jsx)(j.$_,{children:e}),(0,r.jsx)(U,{label:"Ping",state:n})]})})}})}),w]})}),(0,r.jsx)(I,{ref:n}),(0,r.jsx)(c.Z,{closeOnProceed:!0,...u,ref:l})]})},V=n(90642),z=n(65716),H=n(81013),q=n(40657),K=e=>{let{mitmExternalHref:t="https://en.wikipedia.org/wiki/Man-in-the-middle_attack",refreshInterval:n=1e4}=e,[o,l]=(0,i.useState)(),{confirmDialog:s,finishConfirm:c,setConfirmDialogLoading:a,setConfirmDialogOpen:d,setConfirmDialogProps:u}=(0,q.Z)(),p=(0,i.useMemo)(()=>o&&(0,r.jsx)(E.Z,{...o}),[o]),{data:x,loading:f}=(0,L.Z)("/ssh-key/conflict",{onError:e=>{l({children:"Failed to fetch SSH key conflicts. Error: ".concat(e),type:"error"})},refreshInterval:n}),{checks:m,getCheck:g,hasAllChecks:v,hasChecks:y,setAllChecks:w,setCheck:P}=(0,H.Z)({list:x}),k=(0,i.useMemo)(()=>x&&Object.keys(x).length>1,[x]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R.TZ,{header:"Manage changed SSH keys",loading:f,children:[(0,r.jsxs)(Z.Z,{spacing:".2em",children:[(0,r.jsx)(j.Ac,{children:"The identity of the following targets have unexpectedly changed."}),(0,r.jsxs)(E.Z,{type:"warning",isAllowClose:!0,children:["If you haven't rebuilt the listed targets, then you could be experiencing a"," ",(0,r.jsx)(z.Z,{href:t,sx:{display:"inline-flex"},target:"_blank",children:'"Man In The Middle"'})," ","attack. Please verify the targets have changed for a known reason before proceeding to remove the broken keys."]}),(0,r.jsx)(F.Z,{header:!0,allowCheckAll:k,allowCheckItem:!0,allowDelete:!0,allowEdit:!1,disableDelete:!y,edit:!0,getListCheckboxProps:()=>({checked:v}),listEmpty:(0,r.jsx)(j.Ac,{align:"center",children:"No conflicting keys found."}),listItems:x,onAllCheckboxChange:(e,t)=>{w(t)},onDelete:()=>{if(!x)return;let e={badKeys:m};u({actionProceedText:"Delete",content:"Resolves ".concat(m.length," SSH key conflicts. Please make sure the identity change(s) are expected to avoid MITM attacks."),onProceedAppend:()=>{a(!0),h.Z.delete("/ssh-key/conflict",{data:e}).then(()=>{c("Success",{children:(0,r.jsx)(r.Fragment,{children:"Started job to delete the selected keys."})})}).catch(e=>{let t=(0,b.Z)(e);t.children=(0,r.jsxs)(r.Fragment,{children:["Failed to delete the selected keys. ",t.children]}),c("Error",t)})},proceedColour:"red",titleText:"Delete ".concat(m.length," conflicting SSH keys?")}),d(!0)},onItemCheckboxChange:(e,t,n)=>{P(e,n)},renderListItem:(e,t)=>{let{ip:n,name:o,short:l}=t.target;return(0,r.jsxs)(V.Z,{width:"calc(100% - 4em)",children:[(0,r.jsx)(j.Ac,{noWrap:!0,children:l||o||n}),(0,r.jsx)(j.KI,{monospaced:!0,noWrap:!0,children:e})]})},renderListItemCheckboxState:e=>g(e)})]}),p]}),s]})};let $="common-user-input-confirm-password",G="common-user-input-name",J="common-user-input-password",X="Username",Y="Password";var Q=e=>{let{formUtils:{buildFinishInputTestBatchFunction:t,buildInputFirstRenderFunction:n,setMessage:o,setValidity:l},previous:{name:s}={},readOnlyUserName:c,requirePassword:a=!1,showPasswordField:d}=e,h=(0,i.useRef)({}),p=(0,i.useRef)({}),[x,f]=(0,i.useState)(a),m=(0,i.useMemo)(()=>d?{"common-user-input-cell-password":{children:(0,r.jsx)(P.Z,{input:(0,r.jsx)(A.Z,{id:J,label:Y,type:u.Z.password}),inputTestBatch:(0,C.Gn)(Y,()=>{o(J)},{onFinishBatch:t(J)},e=>{o(J,{children:e})}),onBlurAppend:e=>{var t;let{target:{value:n}}=e;f(n.length>0),l($,n===(null===(t=p.current.getValue)||void 0===t?void 0:t.call(null)))},onFirstRender:n(J),ref:h,required:a})},"common-user-input-cell-confirm-password":{children:(0,r.jsx)(P.Z,{input:(0,r.jsx)(A.Z,{id:$,inputProps:{readOnly:!x},label:"Confirm password",type:u.Z.password}),inputTestBatch:{defaults:{onSuccess:()=>{o($)}},onFinishBatch:t($),tests:[{test:C.HJ},{onFailure:()=>{o($,{children:"The passwords do not match."})},test:e=>{var t;let{value:n}=e;return n===(null===(t=h.current.getValue)||void 0===t?void 0:t.call(null))}}]},onFirstRender:n($),ref:p,required:x})}}:void 0,[t,n,x,a,o,l,d]);return(0,r.jsx)(y.Z,{columns:{xs:1,sm:2,md:3},layout:{"common-user-input-cell-name":{children:(0,r.jsx)(P.Z,{input:(0,r.jsx)(A.Z,{id:G,inputProps:{readOnly:c},label:X,value:s}),inputTestBatch:(0,C.Gn)(X,()=>{o(G)},{onFinishBatch:t(G)},e=>{o(G,{children:e})}),onFirstRender:n(G),required:!0}),md:1,sm:2},...m},spacing:"1em"})},ee=n(18950),et=n(76740),en=n(84337),er=n(95275);let eo=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[{target:r}]=t,{elements:o}=r,{value:l}=o.namedItem(G),s=o.namedItem(J),i="";return s&&({value:i}=s),{password:i,userName:l}};var el=()=>{let e=(0,i.useRef)({}),t=(0,i.useRef)({}),n=(0,i.useRef)({}),o=(0,i.useRef)({}),[l,s]=(0,en.Z)(),[a,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)({children:"No users found."}),[p,x]=(0,i.useState)(),{data:f,loading:m}=(0,L.Z)("/user",{onError:e=>{h((0,b.Z)(e))},periodic:!0}),g=(0,er.Z)([$,G,J],o),{isFormInvalid:v,isFormSubmitting:Z,submitForm:y}=g,{buildDeleteDialogProps:w,checks:P,getCheck:A,hasChecks:C,setCheck:S}=(0,H.Z)({list:f}),{userName:T,userUUID:M}=(0,i.useMemo)(()=>null!=p?p:{},[p]),I=(0,i.useMemo)(()=>({actionProceedText:"Add",content:(0,r.jsx)(Q,{formUtils:g,requirePassword:!0,showPasswordField:!0}),onSubmitAppend:function(){for(var e,n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];let i=eo(...o);s({actionProceedText:"Add",content:(0,r.jsx)(et.Z,{entries:i,hasPassword:!0}),onProceedAppend:()=>{y({body:i,getErrorMsg:e=>(0,r.jsxs)(r.Fragment,{children:["Add user failed. ",e]}),method:"post",successMsg:"Created user ".concat(i.userName,"."),url:"/user"})},titleText:"Add the following new user?"}),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},titleText:"Add a web interface user"}),[g,s,y]),D=(0,i.useMemo)(()=>({actionProceedText:"Update",content:(0,r.jsx)(Q,{formUtils:g,previous:{name:T},readOnlyUserName:"admin"===T,showPasswordField:!0}),onSubmitAppend:function(){for(var e,n=arguments.length,o=Array(n),l=0;l<n;l++)o[l]=arguments[l];let i=eo(...o);s({actionProceedText:"Update",content:(0,r.jsx)(et.Z,{entries:i,hasPassword:!0}),onProceedAppend:()=>{y({body:i,getErrorMsg:e=>(0,r.jsxs)(r.Fragment,{children:["Update user failed. ",e]}),method:"put",successMsg:"Updated user ".concat(T),url:"/user/".concat(M)})},titleText:"Update user ".concat(T," with the following?")}),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},titleText:"Edit user ".concat(T)}),[g,s,y,T,M]),O=(0,i.useMemo)(()=>(0,r.jsx)(k.Z,{count:1,defaultMessageType:"warning",ref:o}),[]),N=(0,i.useMemo)(()=>{var e;return(null==f?void 0:null===(e=f.current)||void 0===e?void 0:e.userName)==="admin"},[f]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(R.TZ,{header:"Manage users",loading:m,children:(0,r.jsx)(F.Z,{allowAddItem:N,allowDelete:N,allowEdit:!0,allowItemButton:a,disableDelete:!C,edit:a,getListItemCheckboxProps:(e,t)=>{let{userName:n}=t;return{disabled:"admin"===n}},header:!0,listEmpty:(0,r.jsx)(E.Z,{...u}),listItems:f,onAdd:()=>{var t;null===(t=e.current.setOpen)||void 0===t||t.call(null,!0)},onDelete:()=>{var e;s(w({confirmDialogProps:{onProceedAppend:()=>{y({body:{uuids:P},getErrorMsg:e=>(0,r.jsxs)(r.Fragment,{children:["Delete user(s) failed. ",e]}),method:"delete",url:"/user"})}},formSummaryProps:{renderEntry:e=>{let{key:t}=e;return(0,r.jsx)(j.Ac,{children:null==f?void 0:f[t].userName})}},getConfirmDialogTitle:e=>"Delete the following ".concat(e," users?")})),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},onEdit:()=>d(e=>!e),onItemCheckboxChange:(e,t,n)=>S(e,n),onItemClick:e=>{if(a){var t;x(e),null===(t=n.current.setOpen)||void 0===t||t.call(null,!0)}},renderListItemCheckboxState:e=>A(e),renderListItem:(e,t)=>{let{userName:n}=t;return(0,r.jsx)(j.Ac,{children:n})}})}),(0,r.jsx)(ee.Z,{...I,disableProceed:v,loadingAction:Z,preActionArea:O,ref:e}),(0,r.jsx)(ee.Z,{...D,disableProceed:v,loadingAction:Z,preActionArea:O,ref:n}),(0,r.jsx)(c.Z,{closeOnProceed:!0,...l,ref:t})]})},es=()=>(0,r.jsxs)(R.s_,{children:[(0,r.jsx)(W,{}),(0,r.jsx)(K,{}),(0,r.jsx)(el,{})]}),ei=n(13539),ec=n(46194),ea=n(90209);let ed=e=>(0,r.jsx)(ec.Z,{...e,sx:{width:"100%"}});var eu=e=>{let{installTarget:t="disabled",onSubmit:n,title:l}=e,[s,c]=(0,i.useState)(),a=(0,i.useMemo)(()=>l?(0,r.jsx)(j.z,{sx:{textAlign:"center"},children:l}):(0,r.jsx)(ea.Z,{mt:0}),[l]),d=(0,i.useMemo)(()=>s&&(0,r.jsx)(o.ZP,{item:!0,sm:2,xs:1,children:(0,r.jsx)(E.Z,{...s,onClose:()=>{c(void 0)}})}),[s,c]);return(0,r.jsxs)(R.s_,{children:[(0,r.jsx)(R.V9,{children:a}),(0,r.jsxs)(o.ZP,{columns:{xs:1,sm:2},container:!0,spacing:"1em",children:[(0,r.jsx)(o.ZP,{display:"none",item:!0,sm:2,xs:1,children:(0,r.jsxs)(Z.Z,{row:!0,children:[(0,r.jsx)(j.Ac,{sx:{flexGrow:1},children:"Install target"}),(0,r.jsx)(ei.Z,{checked:"enabled"===t,edge:"end",onChange:(e,t)=>{let o="disable",s="Disable";t&&(o="enable",s="Enable"),null==n||n.call(null,{actionProceedText:s,content:(0,r.jsxs)(j.Ac,{children:["Would you like to ",o,' "Install target" on this striker? It\'ll take a few moments to complete.']}),onProceedAppend:()=>{h.Z.put("/host/local",{isEnableInstallTarget:t},{params:{handler:"install-target"}}).catch(e=>{let t=(0,b.Z)(e);t.children="Failed to ".concat(o,' "Install target". ').concat(t.children),c(t)})},titleText:"".concat(s,' "Install target" on ').concat(l,"?")})}})]})}),(0,r.jsx)(o.ZP,{item:!0,sm:2,xs:1,children:(0,r.jsx)(ed,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Update",content:(0,r.jsx)(j.Ac,{children:"Would you like to update the operating system on this striker? It'll be placed into maintenance mode until the update completes."}),onProceedAppend:()=>{h.Z.put("/command/update-system").catch(e=>{let t=(0,b.Z)(e);t.children="Failed to initiate system update. ".concat(t.children),c(t)})},titleText:"Update operating system on ".concat(l,"?")})},children:"Update system"})}),(0,r.jsx)(o.ZP,{item:!0,sm:2,xs:1,children:(0,r.jsx)(ed,{href:"/init?re=1",children:"Reconfigure striker"})}),(0,r.jsx)(o.ZP,{item:!0,xs:1,children:(0,r.jsx)(ed,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Reboot",content:(0,r.jsx)(j.Ac,{children:"Would you like to reboot this striker?"}),onProceedAppend:()=>{h.Z.put("/command/reboot-host").catch(e=>{let t=(0,b.Z)(e);t.children="Failed to initiate system reboot. ".concat(t.children),c(t)})},titleText:"Reboot ".concat(l,"?")})},children:"Reboot"})}),(0,r.jsx)(o.ZP,{item:!0,xs:1,children:(0,r.jsx)(ed,{onClick:()=>{null==n||n.call(null,{actionProceedText:"Shutdown",content:(0,r.jsx)(j.Ac,{children:"Would you like to shutdown this striker?"}),onProceedAppend:()=>{h.Z.put("/command/poweroff-host").catch(e=>{let t=(0,b.Z)(e);t.children="Failed to initiate system shutdown. ".concat(t.children),c(t)})},titleText:"Shutdown ".concat(l,"?")})},children:"Shutdown"})}),d]})]})},eh=e=>{let{refreshInterval:t=6e4}=e,[n,l]=(0,i.useState)(!1),[d,u]=(0,i.useState)({actionProceedText:"",closeOnProceed:!0,content:"",dialogProps:{open:n},onCancelAppend:()=>{l(!1)},onProceedAppend:()=>{l(!1)},titleText:""}),[h,p]=(0,i.useState)(),[x,f]=(0,i.useState)(""),{data:m,loading:g}=(0,L.Z)("/host/local",{onError:()=>{f("Unknown")},onSuccess:e=>{let{installTarget:t,shortHostName:n}=e;p(t),f(n)},refreshInterval:t});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:g?"Loading...":"".concat(null==m?void 0:m.shortHostName," Config")})}),(0,r.jsx)(a.Z,{}),(0,r.jsxs)(o.ZP,{container:!0,columns:{xs:1,md:3,lg:4},children:[(0,r.jsx)(o.ZP,{item:!0,xs:1,children:(0,r.jsx)(eu,{installTarget:h,onSubmit:e=>{let{onProceedAppend:t,...n}=e;u(e=>({...e,...n,onProceedAppend:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];null==t||t.call(null,...n),l(!1)}})),l(!0)},title:x})}),(0,r.jsx)(o.ZP,{item:!0,md:2,xs:1,children:(0,r.jsx)(es,{})})]}),(0,r.jsx)(c.Z,{...d,dialogProps:{open:n}})]})}}},function(e){e.O(0,[537,256,548,848,436,879,888,774,179],function(){return e(e.s=14453)}),_N_E=e.O()}]);