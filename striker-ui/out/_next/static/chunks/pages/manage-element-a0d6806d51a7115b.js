(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[808],{29582:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-element",function(){return n(17562)}])},11399:function(e,t,n){"use strict";var s=n(85893),r=n(67294),l=n(77583);let a=(0,r.forwardRef)((e,t)=>{let{children:n,contentContainerProps:a,dialogProps:o,onSubmitAppend:i,proceedButtonProps:c,scrollBoxProps:d,scrollContent:u,...m}=e,h=(0,r.useMemo)(()=>({...a,component:"form",onSubmit:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s]=t;s.preventDefault(),null==i||i.call(null,...t)}}),[a,i]),p=(0,r.useMemo)(()=>({...d,sx:u?{overflowX:"hidden",paddingTop:".6em",...null==d?void 0:d.sx}:null==d?void 0:d.sx}),[d,u]);return(0,s.jsx)(l.Z,{dialogProps:o,contentContainerProps:h,proceedButtonProps:{...c,type:"submit"},scrollContent:u,scrollBoxProps:p,wide:!0,...m,ref:t,children:n})});a.displayName="FormDialog",t.Z=a},82777:function(e,t,n){"use strict";var s=n(85893),r=n(67294),l=n(99514),a=n(14440);t.Z=e=>{let{calculateItemBreakpoints:t=()=>({xs:1}),layout:n,wrapperBoxProps:o,...i}=e,c=(0,r.useMemo)(()=>Object.entries(n).map((e,n)=>{let[s,a]=e;return a?(0,r.createElement)(l.ZP,{...t(n,s),key:s,item:!0,...a}):void 0}),[t,n]);return(0,s.jsx)(a.Z,{...o,children:(0,s.jsx)(l.ZP,{container:!0,...i,children:c})})}},62848:function(e,t,n){"use strict";var s=n(67294);t.Z=function(){let{actionProceedText:e="",content:t="",titleText:n="",...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,s.useState)({actionProceedText:e,content:t,titleText:n,...r})}},56907:function(e,t,n){"use strict";var s=n(67294),r=n(98484),l=n(8534),a=n(97607);t.Z=(e,t)=>{var n;let[o,i]=(0,s.useState)(!1),[c,d]=(0,s.useState)({}),u=(0,s.useCallback)(e=>{var n,s;return null==t?void 0:null===(s=t.current)||void 0===s?void 0:null===(n=s.setMessage)||void 0===n?void 0:n.call(null,"api",e)},[t]),m=(0,s.useCallback)((e,n)=>{var s,r;null==t||null===(r=t.current)||void 0===r||null===(s=r.setMessage)||void 0===s||s.call(null,String(e),n)},[t]),h=(0,s.useCallback)((e,n)=>{var s,r;null==t||null===(r=t.current)||void 0===r||null===(s=r.setMessageRe)||void 0===s||s.call(null,e,n)},[t]),p=(0,s.useCallback)((e,t)=>{d((0,l.ZP)(e,t))},[]),x=(0,s.useCallback)((e,t)=>{d((0,l.Um)(e,t))},[]),f=(0,s.useCallback)(e=>{m(e),p(e)},[m,p]),j=(0,s.useCallback)(e=>{h(e),x(e)},[h,x]),g=(0,s.useCallback)(e=>t=>{p(e,t)},[p]),v=(0,s.useCallback)(e=>t=>{let{isValid:n}=t;p(e,n)},[p]),Z=(0,s.useCallback)(e=>()=>{f(e)},[f]),b=(0,s.useCallback)(e=>{let{body:s,getErrorMsg:l,msgKey:o="api",method:c,onError:d,onSuccess:u,setMsg:m=null==t?void 0:null===(n=t.current)||void 0===n?void 0:n.setMessage,successMsg:h,url:p}=e;i(!0),r.Z.request({data:s,method:c,url:p}).then(()=>{null==m||m.call(null,o,{children:h,type:"info"}),null==u||u.call(null)}).catch(e=>{let t=(0,a.Z)(e);t.children=l(t.children),null==m||m.call(null,o,t),null==d||d.call(null)}).finally(()=>{i(!1)})},[t,i]),w=(0,s.useMemo)(()=>Object.values(c).some(e=>!e),[c]);return{buildFinishInputTestBatchFunction:g,buildInputFirstRenderFunction:v,buildInputUnmountFunction:Z,formValidity:c,isFormInvalid:w,isFormSubmitting:o,setApiMessage:u,setFormValidity:d,setMessage:m,setMessageRe:h,setValidity:p,setValidityRe:x,submitForm:b,unsetKey:f,unsetKeyRe:j}}},17562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return nu}});var s=n(85893),r=n(9008),l=n.n(r),a=n(11163),o=n(67294),i=n(98484),c=function(e){let{fallbackValue:t="",joinSeparator:n="",limit:s=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof Array?e.slice(0,s).join(n):null!=e?e:t},d=n(82777),u=n(97607),m=n(39937),h=n(92230),p=n(38189),x=n(14440),f=n(96674),j=n(89262),g=n(51050),v=n(37842),Z=n(56903),b=n(28293),w=n(91029),k=n(23930),y=n(6189),P=n(41553),M=n(11901),S=n(77831),C=n(59278);let I=(0,j.ZP)(P.Z)({height:"3.5em",marginLeft:0,width:"100%"});var A=e=>{let{baseInputProps:t,checked:n,formControlLabelProps:r,id:l,label:a,name:i,onChange:c,switchProps:d}=e,u=(0,o.useMemo)(()=>"string"==typeof a?(0,s.jsx)(C.Ac,{inheritColour:!0,color:"".concat(S.s7,"AF"),children:a}):(0,s.jsx)(s.Fragment,{children:a}),[a]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I,{componentsProps:{typography:{flexGrow:1}},control:(0,s.jsx)(M.Z,{checked:n,edge:"end",name:i,onChange:c,...d}),label:u,labelPlacement:"start",...r}),(0,s.jsx)("input",{checked:n,hidden:!0,id:l,readOnly:!0,...t})]})},F=n(52675);let T=["1","on"],U=e=>{let{formUtils:{buildFinishInputTestBatchFunction:t,setMessage:n},id:s,label:r}=e,l=t(s),a=()=>{n(s)};return"ip"===r.toLowerCase()?(0,F._)(r,a,{onFinishBatch:l},e=>{n(s,{children:e})}):{defaults:{onSuccess:a},onFinishBatch:l,tests:[{test:F.HJ}]}},O=e=>{let{formUtils:t,id:n,isRequired:r,label:l="",name:a=n,value:o}=e,{buildFinishInputTestBatchFunction:i,buildInputFirstRenderFunction:c,setMessage:d}=t;return(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:n,label:l,name:a,value:o}),inputTestBatch:(0,F.qY)(l,()=>{d(n)},{onFinishBatch:i(n)},e=>{d(n,{children:e})}),onFirstRender:c(n),required:r,valueType:"number"},"".concat(n,"-wrapper"))},N={boolean:e=>{let{id:t,isChecked:n=!1,label:r,name:l=t}=e;return(0,s.jsx)(b.Z,{input:(0,s.jsx)(A,{checked:n,id:t,label:r,name:l}),valueType:"boolean"},"".concat(t,"-wrapper"))},integer:O,second:O,select:e=>{let{formUtils:t,id:n,isRequired:r,label:l,name:a=n,selectOptions:o=[],value:i=""}=e,{buildFinishInputTestBatchFunction:c,buildInputFirstRenderFunction:d,setMessage:u}=t;return(0,s.jsx)(b.Z,{input:(0,s.jsx)(y.Z,{id:n,label:l,name:a,selectItems:o,value:i}),inputTestBatch:{defaults:{onSuccess:()=>{u(n)}},onFinishBatch:c(n),tests:[{test:F.HJ}]},onFirstRender:d(n),required:r},"".concat(n,"-wrapper"))},string:e=>{let t;let{formUtils:n,id:r,isRequired:l,isSensitive:a=!1,label:o="",name:i=r,value:c}=e,{buildInputFirstRenderFunction:d}=n;return a&&(t=v.Z.password),(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:r,label:o,name:i,type:t,value:c}),inputTestBatch:U({formUtils:n,id:r,label:o}),onFirstRender:d(r),required:l},"".concat(r,"-wrapper"))}},R=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("-")},q=(0,j.ZP)(Z.Z)({margin:".4em 0"});var E=e=>{let{fenceId:t,fenceParameterTooltipProps:n,fenceTemplate:r,formUtils:l,previousFenceName:a,previousFenceParameters:i}=e,{buildFinishInputTestBatchFunction:c,buildInputFirstRenderFunction:d,setMessage:u}=l,m=(0,o.useMemo)(()=>{let e;if(r&&t){let{parameters:o}=r[t],m={};i&&(m=Object.entries(i).reduce((e,n)=>{let[s,r]=n;return e[R(t,s)]=r,e},{}));let{optional:h,required:f}=Object.entries(o).sort((e,t)=>{let[n]=e,[s]=t;return n>s?1:-1}).reduce((e,r)=>{var a,o;let[i,{content_type:c,default:d,deprecated:u,description:h,options:f,required:j}]=r;if("1"===String(u))return e;let{optional:v,required:Z}=e,b=null!==(a=N[c])&&void 0!==a?a:N.string,w=R(t,i),k=null!==(o=m[w])&&void 0!==o?o:d,y="1"===String(j),P=p.JW.test(i),M=b({formUtils:l,id:w,isChecked:T.includes(k),isRequired:y,isSensitive:P,label:i,selectOptions:f,value:k}),S=(0,s.jsx)(g.Z,{componentsProps:{tooltip:{sx:{maxWidth:{md:"62.6em"}}}},disableInteractive:!0,placement:"top-start",title:(0,s.jsx)(C.Ac,{children:h}),...n,children:(0,s.jsx)(x.Z,{children:M})},"".concat(w,"-tooltip"));return y?Z.push(S):v.push(S),e},{optional:[],required:[]}),j=R(t,"name"),v="Fence device name";e=(0,s.jsxs)(Z.Z,{sx:{"& > div:first-child":{marginTop:0},"& > div":{marginBottom:0}},children:[(0,s.jsx)(k.TZ,{expandInitially:!0,header:"Required parameters",children:(0,s.jsxs)(q,{children:[(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:j,label:v,name:j,value:a}),inputTestBatch:(0,F.Gn)(v,()=>{u(j)},{onFinishBatch:c(j)},e=>{u(j,{children:e})}),onFirstRender:d(j),required:!0},"".concat(j,"-wrapper")),f]})}),(0,s.jsx)(k.TZ,{header:"Optional parameters",children:(0,s.jsx)(q,{children:h})})]})}return e},[c,d,t,n,r,l,a,i,u]);return(0,s.jsx)(s.Fragment,{children:m})},D=n(53541),_=n(6631);let B="add-fence-input-agent";var H=e=>{let{fenceTemplate:t,formUtils:n,loading:r}=e,{setValidity:l}=n,a=(0,_.Z)(),[i,c]=(0,o.useState)(null),d=(0,o.useMemo)(()=>t?Object.entries(t).sort((e,t)=>{let[n]=e,[s]=t;return n>s?1:-1}).map(e=>{let[t,{description:n}]=e;return{fenceDescription:"string"==typeof n?n:"No description.",fenceId:t,label:t}}):[],[t]),u=(0,o.useMemo)(()=>(0,s.jsx)(f.Z,{id:B,isOptionEqualToValue:(e,t)=>e.fenceId===t.fenceId,label:"Fence device type",onChange:(e,t)=>{l(B,null!==t),c(t)},openOnFocus:!0,options:d,renderOption:(e,t,n)=>{let{fenceDescription:r,fenceId:l}=t,{selected:a}=n;return(0,s.jsxs)(x.Z,{component:"li",sx:{display:"flex",flexDirection:"column","& > *":{width:"100%"}},...e,children:[(0,s.jsx)(C.Ac,{inverted:!0,sx:{fontSize:"1.2em",fontWeight:a?400:void 0},children:l}),(0,s.jsx)(C.Ac,{selected:!1,children:r})]})},sx:{marginTop:".3em"},value:i}),[d,i,l]),m=(0,o.useMemo)(()=>(0,s.jsx)(E,{fenceId:null==i?void 0:i.fenceId,fenceTemplate:t,formUtils:n}),[t,null==i?void 0:i.fenceId,n]),h=(0,o.useMemo)(()=>r?(0,s.jsx)(D.Z,{}):(0,s.jsxs)(Z.Z,{children:[u,m]}),[u,m,r]);return(0,o.useEffect)(()=>{a&&l(B,null!==i)},[i,a,l]),(0,s.jsx)(s.Fragment,{children:h})},z=n(77583),L=e=>{let{fenceId:t,fenceTemplate:n,formUtils:r,loading:l,previousFenceName:a,previousFenceParameters:i}=e,c=(0,o.useMemo)(()=>l?(0,s.jsx)(D.Z,{}):(0,s.jsx)(E,{fenceId:t,fenceTemplate:n,formUtils:r,previousFenceName:a,previousFenceParameters:i}),[n,t,r,l,a,i]);return(0,s.jsx)(s.Fragment,{children:c})},V=n(11399),G=n(44089),$=n(83916),W=n(81208),J=n(48430),Q=n(85291),K=n(62848),X=n(56907);let Y=e=>{let{id:t}=e,n=new RegExp("^(fence[^-]+)".concat("-","([^\\s]+)$")),s=t.match(n);if(!s)throw Error("Not target input element");return s},ee=(e,t,n)=>{if("name"===e)throw t.name=n,Error("Not child parameter")},et=e=>{if(!e)throw Error("Not parameter specification")},en=(e,t)=>{if([t,"",null,void 0].some(t=>e===t))throw Error("Skippable parameter value")},es=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];let[{target:r}]=n,{elements:l}=r;return Object.values(l).reduce((t,n)=>{try{let[,s,r]=Y(n);t.agent=s;let{checked:l,value:a}=n;ee(r,t,a);let{[s]:{parameters:{[r]:o}}}=e;et(o);let{content_type:i,default:c}=o,d=a;"boolean"===i&&(d=l?"1":""),en(d,c),t.parameters[r]=d}catch(e){}return t},{agent:"",name:"",parameters:{}})};var er=()=>{let e=(0,_.Z)(),t=(0,o.useRef)({}),n=(0,o.useRef)({}),r=(0,o.useRef)({}),[l,a]=(0,K.Z)(),[c,d]=(0,K.Z)(),[m,x]=(0,o.useState)(),[f,j]=(0,o.useState)(),[g,v]=(0,o.useState)(!1),[b,w]=(0,o.useState)(!0),{isLoading:y}=(0,J.Z)("".concat(h.Z,"/fence"),{onSuccess:e=>x(e),refreshInterval:6e4}),P=(0,o.useCallback)(()=>{i.Z.get("/fence").then(e=>{let{data:t}=e;x(t)})},[x]),M=(0,X.Z)([B],r),{isFormInvalid:S,isFormSubmitting:I,submitForm:A}=M,{buildDeleteDialogProps:F,checks:T,getCheck:U,hasChecks:O,resetChecks:N,setCheck:R}=(0,Q.Z)({list:m}),q=(0,o.useCallback)(e=>{let{cap:t,depth:n,key:s}=e;return 0===n?t(s):s},[]),E=(0,o.useMemo)(()=>(0,s.jsx)($.Z,{allowEdit:!0,allowItemButton:g,disableDelete:!O,edit:g,header:!0,listEmpty:"No fence device(s) registered.",listItems:m,onAdd:()=>{var e;d({actionProceedText:"Add",content:(0,s.jsx)(H,{fenceTemplate:f,formUtils:M}),onSubmitAppend:e=>{var n;if(!f)return;let r=es(f,e),{agent:l,name:o}=r;a({actionProceedText:"Add",content:(0,s.jsx)(G.Z,{entries:r,hasPassword:!0,getEntryLabel:q}),onProceedAppend:()=>{A({body:r,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to add fence device. ",e]}),method:"post",onSuccess:()=>P(),successMsg:"Added fence device ".concat(o),url:"/fence"})},titleText:(0,s.jsxs)(C.z,{children:["Add a"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:l})," ","fence device with the following parameters?"]})}),null===(n=t.current.setOpen)||void 0===n||n.call(null,!0)},titleText:"Add a fence device"}),null===(e=n.current.setOpen)||void 0===e||e.call(null,!0)},onDelete:()=>{var e;a(F({getConfirmDialogTitle:e=>"Delete ".concat(e," fence device(s)?"),onProceedAppend:()=>{A({body:{uuids:T},getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to delete fence device(s). ",e]}),method:"delete",onSuccess:()=>{P(),N()},url:"/fence"})},renderEntry:e=>{let{key:t}=e;return(0,s.jsx)(C.Ac,{children:null==m?void 0:m[t].fenceName})}})),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},onEdit:()=>{v(e=>!e)},onItemCheckboxChange:(e,t,n)=>{R(e,n)},onItemClick:e=>{var r;let{fenceAgent:l,fenceName:o,fenceParameters:i,fenceUUID:c}=e;d({actionProceedText:"Update",content:(0,s.jsx)(L,{fenceId:l,fenceTemplate:f,formUtils:M,previousFenceName:o,previousFenceParameters:i}),onSubmitAppend:e=>{var n;if(!f)return;let r=es(f,e);a({actionProceedText:"Update",content:(0,s.jsx)(G.Z,{entries:r,hasPassword:!0,getEntryLabel:q}),onProceedAppend:()=>{A({body:r,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to update fence device. ",e]}),method:"put",onSuccess:()=>P(),successMsg:"Updated fence device ".concat(o),url:"/fence/".concat(c)})},titleText:(0,s.jsxs)(C.z,{children:["Update"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:o})," ","fence device with the following parameters?"]})}),null===(n=t.current.setOpen)||void 0===n||n.call(null,!0)},titleText:(0,s.jsxs)(C.z,{children:["Update fence device"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:o})," ","parameters"]})}),null===(r=n.current.setOpen)||void 0===r||r.call(null,!0)},renderListItemCheckboxState:e=>U(e),renderListItem:(e,t)=>{let{fenceAgent:n,fenceName:r,fenceParameters:l}=t;return(0,s.jsxs)(Z.Z,{row:!0,children:[(0,s.jsx)(C.Ac,{children:r}),(0,s.jsx)(C.Ac,{children:Object.entries(l).reduce((e,t)=>{let[n,r]=t,l=(0,s.jsxs)(s.Fragment,{children:[n,'="']});return l=p.JW.test(n)?(0,s.jsxs)(s.Fragment,{children:[l,(0,s.jsx)(C.PJ,{wrapper:"mono",children:r})]}):(0,s.jsxs)(s.Fragment,{children:[l,r]}),(0,s.jsxs)(s.Fragment,{children:[e," ",l,'"']})},n)})]})}}),[F,T,m,f,M,U,P,q,O,g,N,R,a,d,A]),Y=(0,o.useMemo)(()=>b||y?(0,s.jsx)(D.Z,{}):E,[y,b,E]),ee=(0,o.useMemo)(()=>(0,s.jsx)(W.Z,{count:1,defaultMessageType:"warning",ref:r}),[]);return e&&i.Z.get("/fence/template").then(e=>{let{data:t}=e;j(t)}).catch(e=>{(0,u.Z)(e)}).finally(()=>{w(!1)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.s_,{children:[(0,s.jsx)(k.V9,{children:(0,s.jsx)(C.z,{children:"Manage fence devices"})}),Y]}),(0,s.jsx)(V.Z,{dialogProps:{PaperProps:{sx:{minWidth:{xs:"90%",md:"50em"}}}},scrollBoxProps:{padding:".3em .5em"},...c,disableProceed:S,loadingAction:I,preActionArea:ee,ref:n,scrollContent:!0,showClose:!0}),(0,s.jsx)(z.Z,{closeOnProceed:!0,scrollBoxProps:{paddingRight:"1em"},...l,ref:t,scrollContent:!0})]})},el=n(42458),ea=n(29535);let eo={online:"ok",offline:"off"},ei={dr:"DR",node:"Subnode"};var ec=e=>{var t;let{data:n}=e,{hostName:r,hostStatus:l,hostType:a,shortHostName:o}=n;return(0,s.jsxs)(Z.Z,{row:!0,spacing:".5em",children:[(0,s.jsx)(el.Z,{colour:null!==(t=eo[l])&&void 0!==t?t:"warning",sx:{alignSelf:"stretch",height:"auto"}}),(0,s.jsxs)(Z.Z,{flexGrow:1,spacing:0,children:[(0,s.jsxs)(Z.Z,{sm:"row",spacing:".5em",children:[(0,s.jsx)(C.Ac,{children:ei[a]}),(0,s.jsx)(C.$_,{whiteSpace:"nowrap",children:o}),(0,s.jsx)(ea.Z,{orientation:"vertical",sx:{alignSelf:"stretch",height:"auto"}}),(0,s.jsx)(C.$_,{sx:{display:{xs:"none",sm:"flex"}},whiteSpace:"nowrap",children:r})]}),(0,s.jsx)(C.Ac,{children:l})]})]})},ed=n(78533),eu=n(33544),em=n(65895),eh=n(99514),ep=n(4845),ex=n(98479),ef=n(66950),ej=n(51714),eg=n(17586),ev=n(60504),eZ=e=>{let{formControlProps:t,formControlLabelProps:n,formLabelProps:r,id:l,label:a,name:i,onChange:c,radioItems:d,radioProps:{sx:u,...m}={},radioGroupProps:h,value:p}=e,x=(0,o.useMemo)(()=>"string"==typeof a?(0,s.jsx)(C.Ac,{children:a}):a,[a]),f=(0,o.useMemo)(()=>Object.entries(d).map(e=>{let[t,{label:r,value:a}]=e,o="string"==typeof r?(0,s.jsx)(C.Ac,{children:r}):r;return(0,s.jsx)(P.Z,{control:(0,s.jsx)(ex.Z,{...m,sx:{["&.".concat(ef.Z.root)]:{color:S.s7},...u}}),value:a,label:o,...n},"".concat(l,"-").concat(t))}),[n,l,d,u,m]);return(0,s.jsxs)(ej.Z,{...t,children:[(0,s.jsx)(eg.Z,{...r,children:x}),(0,s.jsx)(ev.Z,{id:l,name:i,onChange:c,row:!0,value:p,...h,children:f})]})},eb=n(16310),ew=n(74077);let ek=eb.Ry().shape({enterpriseKey:(0,ew.u)().optional(),ip:(0,ew.T)().required(),name:eb.Z_().required(),redhatConfirmPassword:eb.Z_().when("redhatPassword",(e,t)=>String(e).length>0?t.required().oneOf([eb.iH("redhatPassword")]):t.optional()),redhatPassword:eb.Z_().when("redhatUsername",(e,t)=>String(e).length>0?t.required():t.optional()),redhatUsername:eb.Z_().when("redhatPassword",(e,t)=>String(e).length>0?t.required():t.optional()),type:eb.Z_().oneOf(["dr","subnode"]).required(),uuid:(0,ew.u)().required()},[["redhatUsername","redhatPassword"]]);var ey=n(12387),eP=n(82547);let eM={subnode:{label:"Subnode",value:"subnode"},dr:{label:"Disaster Recovery (DR) host",value:"dr"}};var eS=e=>{let{host:t,setResponse:n,tools:r}=e,{disabledSubmit:l,formik:a,formikErrors:c,handleChange:d}=(0,eP.Z)({initialValues:{ip:t.hostIpAddress,name:t.hostName,password:t.hostPassword,type:"",uuid:t.hostUUID},onSubmit:(e,t)=>{let{setSubmitting:l}=t,{enterpriseKey:a,ip:o,name:c,password:d,type:m,uuid:h,redhatPassword:p,redhatUsername:x}=e;r.confirm.prepare({actionProceedText:"Prepare",content:(0,s.jsx)(G.Z,{entries:e,hasPassword:!0}),onCancelAppend:()=>l(!1),onProceedAppend:()=>{r.confirm.loading(!0),i.Z.put("/host/prepare",{enterpriseUUID:a,hostIPAddress:o,hostName:c,hostPassword:d,hostType:"subnode"===m?"node":m,hostUUID:h,redhatPassword:p,redhatUser:x}).then(()=>{r.confirm.finish("Success",{children:(0,s.jsxs)(s.Fragment,{children:["Started job to prepare host at ",o,"."]})}),r.add.open(!1),setTimeout(n,500)}).catch(e=>{let t=(0,u.Z)(e);t.children=(0,s.jsxs)(s.Fragment,{children:["Failed to prepare host at ",o,". ",t.children]}),r.confirm.finish("Error",t),l(!1)})},titleText:"Prepare host at ".concat(e.ip," with the following?")}),r.confirm.open()},validationSchema:ek}),m=(0,o.useMemo)(()=>"enterpriseKey",[]),h=(0,o.useMemo)(()=>"name",[]),p=(0,o.useMemo)(()=>"redhatConfirmPassword",[]),x=(0,o.useMemo)(()=>"redhatPassword",[]),f=(0,o.useMemo)(()=>"redhatUsername",[]),j=(0,o.useMemo)(()=>"type",[]),g=(0,o.useMemo)(()=>t.isInetConnected&&/rhel/i.test(t.hostOS)&&!t.isOSRegistered,[t.hostOS,t.isInetConnected,t.isOSRegistered]);return(0,s.jsxs)(eh.ZP,{columns:{xs:1,sm:2},component:"form",container:!0,onSubmit:e=>{e.preventDefault(),a.submitForm()},spacing:"1em",children:[(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(eZ,{id:j,label:"Host type",name:j,onChange:d,radioItems:eM,value:a.values.type})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{id:h,label:"Host name",name:h,onChange:d,required:!0,value:a.values.name})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{id:m,label:"Alteeve enterprise key",name:m,onChange:d,value:a.values.enterpriseKey})})}),g&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:f,label:"RedHat username",name:f,onChange:d,value:a.values.redhatUsername})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:x,label:"RedHat password",name:x,onChange:d,type:"password",value:a.values.redhatPassword})})}),(0,s.jsx)(eh.ZP,{display:{xs:"none",sm:"initial"},item:!0,sm:1}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:p,label:"Confirm RedHat password",name:p,onChange:d,type:"password",value:a.values.redhatConfirmPassword})})})]}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(W.Z,{count:1,messages:c})}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(ep.Z,{actions:[{background:"blue",children:"Prepare host",disabled:l,type:"submit"}]})})]})};let eC=eb.Ry({ip:(0,ew.T)().required(),password:eb.Z_().required()});var eI=e=>{let{setResponse:t,tools:n}=e,r=(0,o.useRef)(null),[l,a]=(0,o.useState)(!1),[c,d]=(0,o.useState)([]),m=(0,o.useCallback)(e=>{var t,n;return null===(n=r.current)||void 0===n?void 0:null===(t=n.setMessage)||void 0===t?void 0:t.call(null,"api",e)},[]),{disabledSubmit:h,formik:p,formikErrors:x,handleChange:f}=(0,eP.Z)({initialValues:{ip:"",password:""},onSubmit:(e,r)=>{let{setSubmitting:l}=r;m(),a(!0),d([]),t(void 0);let{ip:o,password:c}=e;i.Z.put("/command/inquire-host",{ipAddress:o,password:c}).then(e=>{let{data:r}=e,{badSshKeys:l,isConnected:a}=r;if(l){m({children:(0,s.jsxs)(s.Fragment,{children:["Host identification at ",o," changed. If this is valid, please delete the conflicting SSH host key."]}),type:"warning"}),d([{background:"red",children:"Delete keys",onClick:()=>{n.confirm.prepare({actionProceedText:"Delete",content:(0,s.jsxs)(C.Ac,{children:["There's a different host key on ",o,", which could mean a MITM attack. But if this change is expected, you can delete the known host key(s) to resolve the conflict."]}),onProceedAppend:()=>{n.confirm.loading(!0),i.Z.delete("/ssh-key/conflict",{data:l}).then(()=>{n.confirm.finish("Success",{children:(0,s.jsxs)(s.Fragment,{children:["Started job to delete host key(s) for ",o,"."]})}),d([])}).catch(e=>{let t=(0,u.Z)(e);t.children=(0,s.jsxs)(s.Fragment,{children:["Failed to delete host key(s). ",t.children]}),n.confirm.finish("Error",t)})},proceedColour:"red",titleText:"Delete all known SSH host key(s) for ".concat(o,"?")}),n.confirm.open(!0)},type:"button"}]);return}if(!a){m({children:(0,s.jsx)(s.Fragment,{children:"Failed to connect. Please make sure the credentials are correct, and the host is reachable from this striker."}),type:"warning"});return}t({...r,hostIpAddress:o,hostPassword:c}),m()}).catch(e=>{let t=(0,u.Z)(e);t.children=(0,s.jsxs)(s.Fragment,{children:["Failed to access ",o,". ",t.children]}),m(t)}).finally(()=>{l(!1),a(!1)})},validationSchema:eC}),j=(0,o.useMemo)(()=>"ip",[]),g=(0,o.useMemo)(()=>"password",[]);return(0,s.jsxs)(eh.ZP,{component:"form",container:!0,columns:{xs:1,sm:2},onSubmit:e=>{e.preventDefault(),p.submitForm()},spacing:"1em",children:[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:j,label:"IP address",name:j,onChange:f,required:!0,value:p.values.ip})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:g,label:"Password",name:g,onChange:f,required:!0,type:"password",value:p.values.password})})}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(W.Z,{count:1,messages:x,ref:r})}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:l?(0,s.jsx)(D.Z,{mt:0}):(0,s.jsx)(ep.Z,{actions:[...c,{background:"blue",children:"Test access",disabled:h,type:"submit"}]})})]})},eA=()=>{let[e,t]=(0,o.useState)();return(0,s.jsx)(ed.Z,{formDialogProps:{common:{onClose:function(e){let{handlers:{base:n}}=e;for(var s=arguments.length,r=Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];null==n||n.call(null,...r),setTimeout(t,500)}}},addHeader:"Initialize host",editHeader:"",entriesUrl:"/host?types=dr,node",entryUrlPrefix:"/host",getDeleteErrorMessage:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{...n,children:(0,s.jsxs)(s.Fragment,{children:["Failed to delete host(s). ",e]})}},getDeleteHeader:e=>"Delete the following ".concat(e," host(s)?"),getDeleteSuccessMessage:()=>({children:(0,s.jsx)(s.Fragment,{children:"Successfully deleted host(s)"})}),listEmpty:"No host(s) found.",listProps:{allowAddItem:!0,allowEdit:!1,allowItemButton:!0},renderAddForm:n=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI,{setResponse:t,tools:n}),e&&(0,s.jsx)(eS,{host:e,setResponse:t,tools:n})]}),renderDeleteItem:(e,t)=>{let{key:n}=t,r=null==e?void 0:e[n];return(0,s.jsx)(C.Ac,{children:null==r?void 0:r.shortHostName})},renderEditForm:(e,t)=>t&&(0,s.jsx)(eu.VZ,{children:(0,s.jsx)(G.Z,{entries:t,renderEntryValue:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];let{0:{entry:l,key:a}}=n;return"command"===a?(0,s.jsx)(em.Z,{iconProps:{fontSize:"small"},mapPreset:"copy",onClick:()=>navigator.clipboard.writeText(String(l)),size:"small"}):e(...n)},hasPassword:!0})}),renderListItem:(e,t)=>(0,s.jsx)(ec,{data:t})})},eF=n(28951),eT=n(99576);let eU="an-host-input",eO="".concat(eU,"-cell"),eN="IPMI IP",eR={fence:(e,t)=>{let{dataset:{hostId:n="",fenceId:s="",fenceName:r=""},value:l}=t,{hostConfig:{hosts:{[n]:a}}}=e,{fences:o={}}=a;o[s]={fenceName:r,fencePort:l},a.fences=o},host:(e,t)=>{let{dataset:{hostId:n="",hostNumber:s="",hostType:r=""}}=t,l=Number.parseInt(s,10);e.hostConfig.hosts[n]={hostNumber:l,hostType:r}},ipmi:(e,t)=>{let{dataset:{hostId:n=""},value:s}=t,{hostConfig:{hosts:{[n]:r}}}=e;r.ipmiIp=s},network:(e,t)=>{let{dataset:{hostId:n="",networkId:s="",networkNumber:r="",networkType:l=""},value:a}=t,{hostConfig:{hosts:{[n]:o}}}=e,{networks:i={}}=o,c=Number.parseInt(r,10);i[s]={networkIp:a,networkNumber:c,networkType:l},o.networks=i},ups:(e,t)=>{let{checked:n,dataset:{hostId:s="",upsId:r="",upsName:l=""}}=t,{hostConfig:{hosts:{[s]:a}}}=e,{upses:o={}}=a;o[r]={isUsed:n,upsName:l},a.upses=o}},eq={xs:1,sm:2,md:3},eE=(e,t)=>"".concat(eU,"-").concat(e,"-").concat(t,"-port"),eD=e=>"".concat(eU,"-").concat(e,"-ipmi-ip"),e_=(e,t)=>"".concat(eU,"-").concat(e,"-").concat(t,"-ip"),eB=(e,t)=>"".concat(eU,"-").concat(e,"-").concat(t,"-power-host");var eH=e=>{let{formUtils:{buildFinishInputTestBatchFunction:t,buildInputFirstRenderFunction:n,buildInputUnmountFunction:r,setMessage:l},hostId:a,hostNumber:i,hostType:c,previous:{fences:u={},ipmiIp:m,networks:h={},upses:p={}}={},hostLabel:x="".concat(c.replace("node","subnode")," ").concat(i)}=e,f=(0,o.useMemo)(()=>Object.entries(u),[u]),j=(0,o.useMemo)(()=>Object.entries(h),[h]),g=(0,o.useMemo)(()=>Object.entries(p),[p]),v=(0,o.useMemo)(()=>!!g.length,[g.length]),y=(0,o.useMemo)(()=>"".concat(eU,"-").concat(a),[a]),P=(0,o.useMemo)(()=>eD(a),[a]),M=(0,o.useMemo)(()=>"".concat(eO,"-").concat(a,"-ipmi-ip"),[a]),S=(0,o.useMemo)(()=>f.reduce((e,r)=>{let[o,{fenceName:i,fencePort:c}]=r,d="".concat(eO,"-").concat(a,"-").concat(o,"-port"),u=eE(a,o),m="Port on ".concat(i);return e[d]={children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"fence","data-host-id":a,"data-fence-id":o,"data-fence-name":i},id:u,label:m,value:c}),inputTestBatch:(0,F.Gn)("".concat(a," ").concat(m),()=>{l(u)},{onFinishBatch:t(u)},e=>{l(u,{children:e})}),onFirstRender:n(u)})},e},{}),[t,n,f,a,l]),I=(0,o.useMemo)(()=>j.reduce((e,o)=>{let[i,{networkIp:c,networkNumber:d,networkType:u}]=o,m="".concat(eO,"-").concat(a,"-").concat(i,"-ip"),h=e_(a,i),p="".concat(u.toUpperCase()," ").concat(d," IP");return e[m]={children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"network","data-host-id":a,"data-network-id":i,"data-network-number":d,"data-network-type":u},id:h,label:p,value:c}),inputTestBatch:(0,F._)("".concat(a," ").concat(p),()=>{l(h)},{onFinishBatch:t(h)},e=>{l(h,{children:e})}),onFirstRender:n(h),onUnmount:r(h),required:!0})},e},{}),[j,a,t,n,r,l]),T=(0,o.useMemo)(()=>g.reduce((e,t)=>{let[n,{isUsed:r,upsName:l}]=t,o="".concat(eO,"-").concat(a,"-").concat(n,"-power-host"),i=eB(a,n),c="Uses ".concat(l);return e[o]={children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(A,{baseInputProps:{"data-handler":"ups","data-host-id":a,"data-ups-id":n,"data-ups-name":l},checked:r,id:i,label:c}),valueType:"boolean"})},e},{}),[a,g]),U=(0,o.useMemo)(()=>v&&(0,s.jsx)(d.Z,{columns:eq,layout:T,spacing:"1em"}),[v,T]);return(0,s.jsxs)(k.Lg,{mv:0,children:[(0,s.jsx)(k.CH,{children:(0,s.jsx)(C.Ac,{children:x})}),(0,s.jsxs)(k.bc,{children:[(0,s.jsx)("input",{hidden:!0,id:y,readOnly:!0,"data-handler":"host","data-host-id":a,"data-host-number":i,"data-host-type":c}),(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(d.Z,{columns:eq,layout:{"fence-message":{children:(0,s.jsx)(eT.Z,{children:"It is recommended to provide 2 fence device ports."}),width:"100%",xs:0},...I,[M]:{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"ipmi","data-host-id":a},id:P,label:eN,value:m}),inputTestBatch:(0,F._)("".concat(a," ").concat(eN),()=>{l(P)},{onFinishBatch:t(P)},e=>{l(P,{children:e})}),onFirstRender:n(P),onUnmount:r(P)})},...S},spacing:"1em"}),U]})]})]})};let ez="".concat("".concat("an-host-config-input","-group"),"-cell"),eL={node1:{hostNumber:1,hostType:"node"},node2:{hostNumber:2,hostType:"node"}},eV=e=>{let{anSeq:t,minIp:n,offset3:s=10,step3:r=2,subnetMask:l,subSeq:a}=e;try{let e=new eF.Netmask("".concat(n,"/").concat(l));if(16!==e.bitmask)return"".concat(e.base.replace(/\.0/g,""),".");return n.replace(/^((\d+\.){2})\d+\.\d+$/,"$1".concat((t-1)*r+s,".").concat(a))}catch(e){return""}};var eG=e=>{let{anSequence:t,formUtils:n,knownFences:r={},knownUpses:l={},networkListEntries:a,previous:{hosts:i=eL}={}}=e,c=(0,o.useMemo)(()=>Object.entries(i),[i]),u=(0,o.useMemo)(()=>Object.values(r),[r]),m=(0,o.useMemo)(()=>Object.values(l),[l]),h=(0,o.useMemo)(()=>c.reduce((e,r)=>{let[l,o]=r,{fences:i={},hostNumber:c,hostType:d,ipmiIp:h,networks:p={},upses:x={}}=o,f=h,j=u.reduce((e,t)=>{let{fenceName:n}=t,{[n]:{fencePort:s=""}={}}=i;return e[n]={fenceName:n,fencePort:s},e},{}),g=a.reduce((e,n)=>{let[s,{networkMinIp:r,networkNumber:l,networkSubnetMask:a,networkType:o}]=n,{[s]:{networkIp:i=""}={}}=p;return i||(i=eV({anSeq:t,minIp:r,subnetMask:a,subSeq:c})),f||"bcn"!==o||1!==l||(f=eV({anSeq:t,minIp:r,offset3:11,subnetMask:a,subSeq:c})),e[s]={networkIp:i,networkNumber:l,networkType:o},e},{}),v=m.reduce((e,t)=>{let{upsName:n}=t,{[n]:{isUsed:s=!0}={}}=x;return e[n]={isUsed:s,upsName:n},e},{});return e["".concat(ez,"-").concat(l)]={children:(0,s.jsx)(eH,{formUtils:n,hostId:l,hostNumber:c,hostType:d,previous:{fences:j,ipmiIp:f,networks:g,upses:v}}),md:3,sm:2},e},{}),[t,n,c,u,m,a]);return(0,s.jsx)(d.Z,{columns:{xs:1,sm:2,md:3},layout:h,spacing:"1em"})},e$=n(23279),eW=n.n(e$);let eJ="an-id-input",eQ="".concat(eJ,"-domain"),eK="".concat(eJ,"-prefix"),eX="".concat(eJ,"-sequence"),eY="Domain name",e0="Prefix",e1="Sequence";var e2=e=>{let{debounceWait:t=500,formUtils:{buildFinishInputTestBatchFunction:n,buildInputFirstRenderFunction:r,setMessage:l},onSequenceChange:a,previous:{domain:i,prefix:c,sequence:u}={}}=e,m=(0,o.useMemo)(()=>a&&eW()(a,t),[t,a]);return(0,s.jsx)(d.Z,{columns:{xs:1,sm:2,md:3},layout:{"an-id-input-cell-prefix":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:eK,label:e0,value:c}),inputTestBatch:(0,F.Gn)(e0,()=>{l(eK)},{onFinishBatch:n(eK)},e=>{l(eK,{children:e})}),onFirstRender:r(eK),required:!0})},"an-id-input-cell-domain":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:eQ,label:eY,value:i}),inputTestBatch:(0,F.Gn)(eY,()=>{l(eQ)},{onFinishBatch:n(eQ)},e=>{l(eQ,{children:e})}),onFirstRender:r(eQ),required:!0})},"an-id-input-cell-sequence":{children:(0,s.jsx)(b.Z,{createInputOnChangeHandlerOptions:{postSet:m},input:(0,s.jsx)(w.Z,{id:eX,label:e1,value:u}),inputTestBatch:(0,F.qY)(e1,()=>{l(eX)},{onFinishBatch:n(eX)},e=>{l(eX,{children:e})}),onFirstRender:r(eX),required:!0,valueType:"number"})}},spacing:"1em"})},e5=n(25934),e8=n(26339);let e9="an-network-input",e4="".concat(e9,"-cell"),e3={gateway:(e,t)=>{let{dataset:{networkId:n=""},value:s}=t,{networkConfig:{networks:r}}=e;r[n].networkGateway=s},minip:(e,t)=>{let{dataset:{networkId:n=""},value:s}=t,{networkConfig:{networks:r}}=e;r[n].networkMinIp=s},network:(e,t)=>{let{dataset:{networkId:n="",networkNumber:s="",networkType:r=""}}=t,{networkConfig:{networks:l}}=e,a=Number.parseInt(s,10);l[n]={networkNumber:a,networkType:r}},subnetmask:(e,t)=>{let{dataset:{networkId:n=""},value:s}=t,{networkConfig:{networks:r}}=e;r[n].networkSubnetMask=s}},e6=e=>"".concat(e9,"-").concat(e,"-gateway"),e7=e=>"".concat(e9,"-").concat(e,"-min-ip"),te=e=>"".concat(e9,"-").concat(e,"-network-type"),tt=e=>"".concat(e9,"-").concat(e,"-subnet-mask");var tn=e=>{let{debounceWait:t=500,formUtils:{buildFinishInputTestBatchFunction:n,buildInputFirstRenderFunction:r,buildInputUnmountFunction:l,setMessage:a},inputGatewayLabel:i="Gateway",inputMinIpLabel:c="IP address",inputSubnetMaskLabel:u="Subnet mask",networkId:m,networkNumber:h,networkType:p,networkTypeOptions:x,onClose:f,onNetworkGatewayChange:j,onNetworkMinIpChange:g,onNetworkSubnetMaskChange:v,onNetworkTypeChange:Z,previous:{gateway:P,minIp:M,subnetMask:S}={},readonlyNetworkName:C,showCloseButton:I,showGateway:A}=e,T=(0,o.useMemo)(()=>"".concat(e8.default[p]," ").concat(h),[h,p]),U=(0,o.useMemo)(()=>"".concat(e4,"-").concat(m,"-gateway"),[m]),O=(0,o.useMemo)(()=>"".concat(e4,"-").concat(m,"-ip"),[m]),N=(0,o.useMemo)(()=>"".concat(e4,"-").concat(m,"-subnet-mask"),[m]),R=(0,o.useMemo)(()=>"".concat(e9,"-").concat(m),[m]),q=(0,o.useMemo)(()=>e6(m),[m]),E=(0,o.useMemo)(()=>e7(m),[m]),D=(0,o.useMemo)(()=>te(m),[m]),_=(0,o.useMemo)(()=>tt(m),[m]),B=(0,o.useMemo)(()=>A?void 0:"none",[A]),H=(0,o.useMemo)(()=>j&&eW()(j,t),[t,j]),z=(0,o.useMemo)(()=>g&&eW()(g,t),[t,g]),L=(0,o.useMemo)(()=>v&&eW()(v,t),[t,v]),V=(0,o.useMemo)(()=>I&&(0,s.jsx)(em.Z,{mapPreset:"close",iconProps:{fontSize:"small"},onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,{networkId:m,networkType:p},...t)},sx:{padding:".2em",position:"absolute",right:"-.6rem",top:"-.2rem"}}),[I,m,p,f]),G=(0,o.useMemo)(()=>{let e;return A&&q&&(e=(0,s.jsx)(b.Z,{createInputOnChangeHandlerOptions:{postSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==H?void 0:H.call(null,{networkId:m,networkType:p},...t)}},input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"gateway","data-network-id":m},id:q,label:i,value:P}),inputTestBatch:(0,F._)("".concat(T," ").concat(i),()=>{a(q)},{onFinishBatch:n(q)},e=>{a(q,{children:e})}),onFirstRender:r(q),onUnmount:l(q),required:A})),e},[A,q,m,i,P,T,n,r,l,H,p,a]);return(0,s.jsxs)(k.Lg,{mv:0,children:[(0,s.jsxs)(k.CH,{children:[(0,s.jsx)(b.Z,{input:(0,s.jsx)(y.Z,{id:D,isReadOnly:C,onChange:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==Z||Z.call(null,{networkId:m,networkType:p},...t)},selectItems:x,selectProps:{renderValue:()=>T},value:p})}),V]}),(0,s.jsxs)(k.bc,{children:[(0,s.jsx)("input",{hidden:!0,id:R,readOnly:!0,"data-handler":"network","data-network-id":m,"data-network-number":h,"data-network-type":p}),(0,s.jsx)(d.Z,{columns:{xs:1,sm:2,md:3},layout:{[O]:{children:(0,s.jsx)(b.Z,{createInputOnChangeHandlerOptions:{postSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==z?void 0:z.call(null,{networkId:m,networkType:p},...t)}},input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"minip","data-network-id":m},id:E,label:c,value:M}),inputTestBatch:(0,F._)("".concat(T," ").concat(c),()=>{a(E)},{onFinishBatch:n(E)},e=>{a(E,{children:e})}),onFirstRender:r(E),onUnmount:l(E),required:!0})},[N]:{children:(0,s.jsx)(b.Z,{createInputOnChangeHandlerOptions:{postSet:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null==L?void 0:L.call(null,{networkId:m,networkType:p},...t)}},input:(0,s.jsx)(w.Z,{baseInputProps:{"data-handler":"subnetmask","data-network-id":m},id:_,label:u,value:S}),inputTestBatch:(0,F._)("".concat(T," ").concat(u),()=>{a(_)},{onFinishBatch:n(_)},e=>{a(_,{children:e})}),onFirstRender:r(_),onUnmount:l(_),required:!0})},[U]:{children:G,display:B}},spacing:"1em"})]})]})},ts=n(8534);let tr="an-network-config-input",tl="".concat(tr,"-cell"),ta="".concat(tr,"-dns"),to="".concat(tr,"-ntp"),ti=Object.entries(e8.default),tc={bcn:{base:"10.201.0.0",mask:"255.255.0.0"},mn:{base:"10.199.0.0",mask:"255.255.0.0"},sn:{base:"10.101.0.0",mask:"255.255.0.0"}},td=e=>"ifn"===e,tu=e=>"mn"===e,tm=e=>{let{entries:t,type:n}=e,s=t.filter(e=>{let[,{networkType:t}]=e;return t===n}).sort((e,t)=>{let[,{networkNumber:n}]=e,[,{networkNumber:s}]=t;return n>s?1:-1}).pop();if(!s){var r;return null!==(r=tc[n])&&void 0!==r?r:{}}let[,{networkMinIp:l,networkSubnetMask:a}]=s;try{let{base:e,mask:t}=new eF.Netmask("".concat(l,"/").concat(a)).next();return{base:e,mask:t}}catch(e){return{}}};var th=e=>{let{formUtils:t,networkListEntries:n,previous:{dnsCsv:r="8.8.8.8,8.8.4.4",ntpCsv:l}={},setNetworkList:a}=e,{buildFinishInputTestBatchFunction:i,buildInputFirstRenderFunction:c,setMessage:u,setMessageRe:m}=t,h=(0,o.useCallback)(function(e){let{input:t=n,end:s=n.length}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=s-1,l=0;return t.every((t,n)=>{let[,{networkType:s}]=t;return s===e&&(l+=1),n<r}),l},[n]),p=(0,o.useMemo)(()=>ti.map(e=>{let[t,n]=e;return{displayValue:n,value:t}}),[]),x=(0,o.useCallback)(function(){let{networkMinIp:e="",networkSubnetMask:t="",networkType:s=n.some(e=>{let[,{networkType:t}]=e;return tu(t)})?"ifn":"mn",networkGateway:r=td(s)?"":void 0,networkNumber:l=h(s)+1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{base:a=e,mask:o=t}=tm({entries:n,type:s});return{network:{networkGateway:r,networkMinIp:a,networkNumber:l,networkSubnetMask:o,networkType:s},networkId:(0,e5.Z)()}},[h,n]),f=(0,o.useCallback)((e,t)=>a((0,ts.ZP)(e,t)),[a]),j=(0,o.useCallback)((e,t,n)=>a(s=>{let r={...s},{[e]:l}=r;return l&&(l[t]=n),r}),[a]),g=(0,o.useCallback)((e,t)=>{let{networkId:s,networkType:r}=e,{target:{value:l}}=t,o=String(l),i=!1,c=0;a(n.reduce((e,t)=>{let[l,a]=t,{networkNumber:d,networkType:u,networkMinIp:h,networkSubnetMask:p,...x}=a,f=d,j=u;l===s&&(i=!0,j=o,m(RegExp(l)));let g=j===o;if(g&&(c+=1),i){g?f=c:j===r&&(f-=1);let{base:t=h,mask:s=p}=tm({entries:n,type:j});e[l]={...x,networkMinIp:t,networkSubnetMask:s,networkNumber:f,networkType:j}}else e[l]=a;return e},{}))},[n,m,a]),v=(0,o.useCallback)(e=>{let{networkId:t,networkType:s}=e,r=!1,l=0;a(n.reduce((e,n)=>{let[a,o]=n;if(a===t)return r=!0,e;let{networkType:i}=o,c=i===s;return c&&(l+=1),e[a]=r&&c?{...o,networkNumber:l}:o,e},{}))},[n,a]),Z=(0,o.useMemo)(()=>n.reduce((e,n)=>{let[r,{networkGateway:l,networkMinIp:a,networkNumber:o,networkSubnetMask:i,networkType:c}]=n,d="".concat(tl,"-").concat(r),u=1===o,m=td(c),h=tu(c)||!u;return e[d]={children:(0,s.jsx)(tn,{formUtils:t,networkId:r,networkNumber:o,networkType:c,networkTypeOptions:p,onClose:v,onNetworkMinIpChange:(e,t)=>{let{networkId:n}=e,{target:{value:s}}=t;return j(n,"networkMinIp",s)},onNetworkSubnetMaskChange:(e,t)=>{let{networkId:n}=e,{target:{value:s}}=t;return j(n,"networkSubnetMask",s)},onNetworkTypeChange:g,previous:{gateway:l,minIp:a,subnetMask:i},readonlyNetworkName:!h,showCloseButton:h,showGateway:m}),md:3,sm:2},e},{}),[n,t,p,v,g,j]);return(0,s.jsx)(d.Z,{columns:{xs:1,sm:2,md:3},layout:{...Z,"an-network-config-cell-add-network":{children:(0,s.jsx)(em.Z,{mapPreset:"add",onClick:()=>{let{network:e,networkId:t}=x();f(t,e)}}),display:"flex",justifyContent:"center",md:3,sm:2},"an-network-config-input-cell-dns":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:ta,label:"DNS",value:r}),inputTestBatch:(0,F.dg)("DNS",()=>{u(ta)},{onFinishBatch:i(ta)},e=>{u(ta,{children:e})}),onFirstRender:c(ta),required:!0})},"an-network-config-input-cell-ntp":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:to,label:"NTP",value:l}),inputTestBatch:(0,F.dg)("NTP",()=>{u(to)},{onFinishBatch:i(to)},e=>{u(to,{children:e})}),onFirstRender:c(to)})}},spacing:"1em"})};let tp={bcn1:{networkMinIp:"10.201.0.0",networkNumber:1,networkSubnetMask:"255.255.0.0",networkType:"bcn"},sn1:{networkMinIp:"10.101.0.0",networkNumber:1,networkSubnetMask:"255.255.0.0",networkType:"sn"},ifn1:{networkMinIp:"",networkNumber:1,networkSubnetMask:"",networkType:"ifn"}};var tx=e=>{var t;let{formUtils:n,knownFences:r,knownUpses:l,previous:{hostConfig:a,networkConfig:i={},...c}={}}=e,{networks:d=tp}=i,[u,m]=(0,o.useState)(null!==(t=null==c?void 0:c.sequence)&&void 0!==t?t:0),[h,p]=(0,o.useState)(d),x=(0,o.useMemo)(()=>Object.entries(h),[h]);return(0,s.jsxs)(Z.Z,{children:[(0,s.jsx)(e2,{formUtils:n,onSequenceChange:e=>{let{target:{value:t}}=e;m(Number(t))},previous:c}),(0,s.jsx)(th,{formUtils:n,networkListEntries:x,previous:i,setNetworkList:p}),(0,s.jsx)(eG,{anSequence:u,formUtils:n,knownFences:r,knownUpses:l,networkListEntries:x,previous:a})]})},tf=e=>{let{formUtils:t,knownFences:n,knownUpses:r,previous:l}=e;return(0,s.jsx)(tx,{formUtils:t,knownFences:n,knownUpses:r,previous:l})},tj=n(50361),tg=n.n(tj),tv=n(45486),tZ=n(36026);let tb=eb.Ry({name:eb.Z_().required(),uuid:(0,ew.u)().required()}),tw=eb.Ry({anvil:eb.Vo(e=>void 0!==e?tb:eb.nK().optional()),number:eb.Rx(),type:eb.Z_(),uuid:(0,ew.u)().required()}),tk=eb.Z_().when("rerun",(e,t)=>e[0]?t.optional():t.required()),ty=eb.Ry({confirmPassword:tk.oneOf([eb.iH("password")]),description:tk,hosts:eb.Vo(e=>eb.Ry((0,tZ.Z)(e,tw))),password:tk,rerun:eb.O7().required(),reuseHosts:eb.O7().when("hosts",(e,t)=>Object.values(e[0]).some(e=>!!e.anvil)?t.isTrue():t.isFalse())});var tP=e=>{let{detail:t,knownFences:n,knownHosts:r,knownUpses:l,onSubmitSuccess:a,tools:c}=e,{anvil:d,domain:m,hostConfig:h,networkConfig:p}=t,{hosts:x}=h,{dnsCsv:f,networks:j,ntpCsv:g}=p,b=(0,o.useMemo)(()=>Object.entries(x),[x]),k=(0,o.useMemo)(()=>Object.entries(j),[j]),P=(0,o.useMemo)(()=>Object.entries(n),[n]),M=(0,o.useMemo)(()=>Object.entries(r),[r]),S=(0,o.useMemo)(()=>Object.entries(l),[l]),I=(0,o.useMemo)(()=>M.map(e=>{let[,{anvil:t,hostName:n,hostUUID:r}]=e;return{displayValue:(0,s.jsxs)(Z.Z,{spacing:0,children:[(0,s.jsx)(C.Ac,{inverted:!0,children:n}),(0,s.jsx)(C.KI,{inverted:!0,children:t?"Used by ".concat(t.name):"Ready"})]}),value:r}}),[M]),{disabledSubmit:A,formik:F,formikErrors:T,handleChange:U}=(0,eP.Z)({initialValues:{confirmPassword:"",description:"",hosts:b.reduce((e,t)=>{let n;let[s,{hostName:l,hostNumber:a,hostType:o}]=t,i="";if(d){let{hosts:{[a]:{uuid:e}}}=d;i=e;let t=r[e];t&&(n=t.anvil)}else if(l){let e=M.find(e=>{let[,{shortHostName:t}]=e;return t===l});if(e){let[,t]=e;n=t.anvil,i=t.hostUUID}}return e[s]={anvil:n,number:a,type:o,uuid:i},e},{}),password:"",rerun:!!d,reuseHosts:!1},onSubmit:(e,n)=>{let{setSubmitting:l}=n,{confirmPassword:o,rerun:d,reuseHosts:h,hosts:p,...f}=e,j={...d?null:f,hosts:Object.values(p).reduce((e,t)=>{let{number:n,type:s,uuid:l}=t,a="".concat(s).concat(n);return e["".concat(s.replace("node","Subnode")," ").concat(n)]={useHost:r[l].hostName,renameTo:"".concat(x[a].hostName,".").concat(m)},e},{})};c.confirm.prepare({actionProceedText:"Run",content:(0,s.jsx)(G.Z,{entries:j,hasPassword:!0}),onCancelAppend:()=>l(!1),onProceedAppend:()=>{c.confirm.loading(!0),i.Z.put("/command/run-manifest/".concat(t.uuid),e).then(()=>{c.confirm.finish("Success",{children:(0,s.jsxs)(s.Fragment,{children:["Successfully started installing ",t.name]})}),null==a||a.call(null),c.edit.open(!1)}).catch(e=>{let t=(0,u.Z)(e);t.children=(0,s.jsxs)(s.Fragment,{children:["Failed to run install manifest. ",t.children]}),c.confirm.finish("Error",t),l(!1)})},titleText:"Run install manifest ".concat(t.name," with the following?")}),c.confirm.open()},validationSchema:ty}),O=(0,o.useMemo)(()=>"confirmPassword",[]),N=(0,o.useMemo)(()=>"description",[]),R=(0,o.useMemo)(()=>"hosts",[]),q=(0,o.useMemo)(()=>"password",[]),E=(0,o.useMemo)(()=>"reuseHosts",[]),D=(0,o.useMemo)(()=>b.reduce((e,t)=>{let[n,{hostNumber:l,hostType:a}]=t,o="".concat(R,".").concat(n),i="".concat(o,".uuid"),c="".concat(a.replace("node","Subnode")," ").concat(l);return e.push((0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(y.Z,{id:i,label:c,name:i,onChange:e=>{let{target:{value:t}}=e,{[t]:{anvil:s}}=r,o=tg()(F.values.hosts),i=Object.entries(o).find(e=>{let[s,{uuid:r}]=e;return s!==n&&r===t});if(i){let[e,t]=i,{number:s,type:r}=t;o[e]={...o[n],number:s,type:r}}return o[n]={anvil:s,number:l,type:a,uuid:t},F.setFieldValue(R,o)},required:!0,selectItems:I,selectProps:{renderValue:e=>{let{[e]:{hostName:t}}=r;return t}},value:F.values.hosts[n].uuid})},"".concat(n,"-selector"))),e},[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:"Use host"})},"host-selector-header")]),[F,b,I,R,r]),_=(0,o.useMemo)(()=>b.reduce((e,t)=>{let[n,{hostName:r}]=t;return e.push((0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsxs)(C.$_,{noWrap:!0,children:[r,".",m]})},"".concat(n,"-rename"))),e},[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:"New hostname"})},"host-rename-header")]),[b,m]),B=(0,o.useMemo)(()=>k.reduce((e,t)=>{let[n,r]=t,{networkNumber:l,networkType:a}=r,o="".concat(a.toLocaleUpperCase()).concat(l),i=b.map(e=>{let[t,{networks:r}]=e,l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{children:e})},"".concat(n,"-").concat(t,"-ip"))};if(!r)return l();let{[n]:a}=r;if(!a)return l();let{networkIp:o}=a;return l(o)});return e.push((0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:o})},"".concat(n,"-header")),...i),e},[]),[b,k]),H=(0,o.useMemo)(()=>P.reduce((e,t)=>{let[n,r]=t,{fenceName:l}=r,a=b.map(e=>{let[t,{fences:r}]=e,a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{children:e})},"".concat(n,"-").concat(t,"-port"))};if(!r)return a();let{[l]:o}=r;if(!o)return a();let{fencePort:i}=o;return a(i)});return e.push((0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsxs)(C.Ac,{children:["Port on ",l]})},"".concat(n,"-header")),...a),e},[]),[b,P]),z=(0,o.useMemo)(()=>S.reduce((e,t)=>{let[n,r]=t,{upsName:l}=r,a=b.map(e=>{let[t,{upses:r}]=e,a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{children:e})},"".concat(n,"-").concat(t,"-used"))};if(!r)return a();let{[l]:o}=r;if(!o)return a();let{isUsed:i}=o;return a(i?"yes":"no")});return e.push((0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsxs)(C.Ac,{children:["Uses ",l]})},"".concat(n,"-header")),...a),e},[]),[b,S]),L=(0,o.useMemo)(()=>{let e;let t=k.find(e=>{let{1:{networkGateway:t}}=e;return!!t}),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{justifyContent:"end",children:e})},"gateway-value")};if(t){let[,{networkGateway:s}]=t;e=s&&s.length>0?n(s):n()}else e=n();return[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:"Gateway"})},"gateway-header"),e]},[k]),V=(0,o.useMemo)(()=>{let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{justifyContent:"end",children:e})},"dns-value")},t=f&&f.length>0?e(f):e();return[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:"DNS"})},"dns-header"),t]},[f]),$=(0,o.useMemo)(()=>{let e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"--";return(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.$_,{justifyContent:"end",children:e})},"ntp-value")},t=g&&g.length>0?e(g):e();return[(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(C.Ac,{children:"NTP"})},"ntp-header"),t]},[g]),J=(0,o.useMemo)(()=>{let e=Object.values(F.values.hosts).filter(e=>!!e.anvil);if(0===e.length)return null;let t=e.slice(1).reduce((e,t)=>"".concat(e,", ").concat(r[t.uuid].shortHostName),r[e[0].uuid].shortHostName);return(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsxs)(eT.Z,{children:[(0,s.jsx)(tv.Z,{id:E,invert:!0,name:E,onChange:F.handleChange,required:!0,sx:{marginRight:".5em"},thinPadding:!0,value:F.values.reuseHosts}),"Confirm reusing host(s): ",t,"."]})})},[F,r,E]);return(0,s.jsxs)(eh.ZP,{columns:{xs:1,sm:2},component:"form",container:!0,onSubmit:e=>{e.preventDefault(),F.submitForm()},spacing:"1em",children:[d?(0,s.jsxs)(eh.ZP,{item:!0,width:"100%",children:[(0,s.jsx)(C.Ac,{children:"Description"}),(0,s.jsx)(C.Ac,{children:d.description})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{id:N,label:"Description",name:N,onChange:U,required:!0,value:F.values.description})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:q,label:"Password",name:q,onChange:U,required:!0,type:v.Z.password,value:F.values.password})})}),(0,s.jsx)(eh.ZP,{item:!0,xs:1,children:(0,s.jsx)(ey.Z,{input:(0,s.jsx)(w.Z,{disableAutofill:!0,id:O,label:"Confirm password",name:O,onChange:U,required:!0,type:v.Z.password,value:F.values.confirmPassword})})})]}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsxs)(eh.ZP,{alignItems:"center",columns:b.length+1,columnSpacing:"1em",container:!0,rowSpacing:".6em",children:[...D,..._,...B,...H,...z]})}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsxs)(eh.ZP,{columns:2,container:!0,spacing:".6em",children:[...L,...V,...$]})}),J,(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(W.Z,{count:1,messages:T})}),(0,s.jsx)(eh.ZP,{item:!0,width:"100%",children:(0,s.jsx)(ep.Z,{actions:[{background:"blue",children:"Run",disabled:A,type:"submit"}]})})]})},tM=n(2188),tS=n(77510);let tC=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[{target:s}]=t,{elements:r}=s,{value:l}=r.namedItem(eQ),{value:a}=r.namedItem(eK),{value:o}=r.namedItem(eX),{value:i}=r.namedItem(ta),{value:c}=r.namedItem(to),d=Number.parseInt(o,10);return Object.values(r).reduce((e,t)=>{var n,s;let{id:r}=t;if(RegExp("^".concat(eU)).test(r)){let{dataset:{handler:s=""}}=t;null===(n=eR[s])||void 0===n||n.call(null,e,t)}else if(RegExp("^".concat(e9)).test(r)){let{dataset:{handler:n=""}}=t;null===(s=e3[n])||void 0===s||s.call(null,e,t)}return e},{domain:l,hostConfig:{hosts:{}},networkConfig:{dnsCsv:i,networks:{},ntpCsv:c},prefix:a,sequence:d})};var tI=()=>{let e=(0,o.useRef)({}),t=(0,o.useRef)({}),n=(0,o.useRef)({}),r=(0,o.useRef)(null),l=(0,o.useRef)({}),[a,c]=(0,K.Z)(),[d,m]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!0),[x,f]=(0,o.useState)(),{data:j,loading:g,mutate:v}=(0,tS.Z)("/manifest",{refreshInterval:1e4}),{data:b,loading:w,mutate:y}=(0,tS.Z)("/manifest/template"),{data:P,loading:M,mutate:S}=(0,tS.Z)("/host?types=node"),I=(0,X.Z)([eQ,eK,eX,ta,to],l),{isFormInvalid:A,isFormSubmitting:F,submitForm:T}=I,{buildDeleteDialogProps:U,checks:O,getCheck:N,hasChecks:R,resetChecks:q,setCheck:E}=(0,Q.Z)({list:j}),{name:_,uuid:B}=(0,o.useMemo)(()=>null!=x?x:{},[x]),{domain:H,fences:L,prefix:J,sequence:Y,upses:ee}=(0,o.useMemo)(()=>null!=b?b:{},[b]),et=(0,o.useCallback)(e=>{let{hostConfig:{hosts:t}}=e,n=Object.values(t).reduce((e,t)=>{let{fences:n,hostType:s,hostNumber:r}=t,l="".concat(s.replace(/node/,"subnode")).concat(r);return n?e[l]=Object.values(n).reduce((e,t)=>{let{fencePort:n}=t;return e+(n.length?1:0)},0):e[l]=0,e},{}),r=Object.entries(n).map(e=>{let[t,n]=e;return n?(0,s.jsx)(s.Fragment,{}):(0,s.jsxs)(eT.Z,{children:["No fence device port specified for ",t,"."]},"".concat(t,"-no-fence-port-message"))});return{counts:n,messages:r}},[]),en=(0,o.useMemo)(()=>({actionProceedText:"Add",content:(0,s.jsx)(tx,{formUtils:I,knownFences:L,knownUpses:ee,previous:{domain:H,prefix:J,sequence:Y}}),onSubmitAppend:function(){for(var t,n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];let a=tC(...r),{messages:o}=et(a);c({actionProceedText:"Add",content:(0,s.jsx)(G.Z,{entries:a,maxDepth:6}),onProceedAppend:()=>{T({body:a,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to add install manifest. ",e]}),method:"post",onSuccess:()=>v(),successMsg:"Successfully added install manifest",url:"/manifest"})},preActionArea:(0,s.jsx)(Z.Z,{spacing:".3em",children:o}),titleText:"Add install manifest?"}),null===(t=e.current.setOpen)||void 0===t||t.call(null,!0)},titleText:"Add an install manifest"}),[et,I,v,L,ee,H,J,Y,c,T]),es=(0,o.useMemo)(()=>({actionProceedText:"Edit",content:(0,s.jsx)(tf,{formUtils:I,knownFences:L,knownUpses:ee,previous:x}),onSubmitAppend:function(){for(var t,n=arguments.length,r=Array(n),l=0;l<n;l++)r[l]=arguments[l];let a=tC(...r),{messages:o}=et(a);c({actionProceedText:"Edit",content:(0,s.jsx)(G.Z,{entries:a,maxDepth:6}),onProceedAppend:()=>{T({body:a,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to update install manifest. ",e]}),method:"put",onSuccess:()=>v(),successMsg:"Successfully updated install manifest ".concat(_),url:"/manifest/".concat(B)})},preActionArea:(0,s.jsx)(Z.Z,{spacing:".3em",children:o}),titleText:"Update install manifest ".concat(_,"?")}),null===(t=e.current.setOpen)||void 0===t||t.call(null,!0)},loading:h,titleText:"Update install manifest ".concat(_)}),[et,I,v,h,L,ee,x,_,B,c,T]),er=(0,o.useCallback)((e,t)=>{p(!0),i.Z.get("manifest/".concat(e)).then(t=>{let{data:n}=t;n.uuid=e,f(n)}).catch(e=>{(0,u.Z)(e)}).finally(()=>{p(!1),null==t||t.call(null)})},[p,f]),el=(0,o.useMemo)(()=>(0,s.jsx)($.Z,{allowEdit:!0,allowItemButton:d,disableDelete:!R,edit:d,header:!0,listEmpty:"No manifest(s) registered.",listItems:j,onAdd:()=>{var e;null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},onDelete:()=>{var t;c(U({onProceedAppend:()=>{T({body:{uuids:O},getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Delete manifest(s) failed. ",e]}),method:"delete",onSuccess:()=>{v(),q()},url:"/manifest"})},getConfirmDialogTitle:e=>"Delete ".concat(e," manifest(s)?"),renderEntry:e=>{let{key:t}=e;return(0,s.jsx)(C.Ac,{children:null==j?void 0:j[t].manifestName})}})),null===(t=e.current.setOpen)||void 0===t||t.call(null,!0)},onEdit:()=>{m(e=>!e)},onItemCheckboxChange:(e,t,n)=>{E(e,n)},onItemClick:e=>{var t;let{manifestName:s,manifestUUID:r}=e;f({name:s,uuid:r}),null===(t=n.current.setOpen)||void 0===t||t.call(null,!0),er(r)},renderListItemCheckboxState:e=>N(e),renderListItem:(e,t)=>{let{manifestName:n}=t;return(0,s.jsxs)(Z.Z,{fullWidth:!0,row:!0,children:[(0,s.jsx)(em.Z,{disabled:d,mapPreset:"play",onClick:()=>{var t;null===(t=r.current)||void 0===t||t.setOpen(!0),er(e)},variant:"normal"}),(0,s.jsx)(C.Ac,{children:n})]})}}),[U,O,N,er,v,R,d,j,q,E,c,f,T]),ea=(0,o.useMemo)(()=>M||w||g?(0,s.jsx)(D.Z,{}):el,[M,g,w,el]),eo=(0,o.useMemo)(()=>(0,s.jsx)(W.Z,{count:1,defaultMessageType:"warning",ref:l}),[]),{confirmDialog:ei,finishConfirm:ec,setConfirmDialogLoading:ed,setConfirmDialogOpen:eh,setConfirmDialogProps:ep}=(0,tM.Z)({initial:{scrollContent:!0,wide:!0}}),ex=(0,o.useMemo)(()=>({add:{open:()=>null},confirm:{finish:ec,loading:ed,open:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return eh(e)},prepare:ep},edit:{open:function(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.setOpen(t)}}}),[ec,ed,eh,ep]),ef=(0,o.useMemo)(()=>w||h||M,[M,h,w]),ej=(0,o.useMemo)(()=>x&&L&&P&&ee&&(0,s.jsx)(tP,{detail:x,knownFences:L,knownHosts:P,knownUpses:ee,onSubmitSuccess:()=>{y(),S()},tools:ex}),[ex,S,y,P,L,ee,x]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.s_,{children:[(0,s.jsx)(k.V9,{children:(0,s.jsx)(C.z,{children:"Manage manifests"})}),ea]}),(0,s.jsx)(V.Z,{...en,disableProceed:A,loadingAction:F,preActionArea:eo,ref:t,scrollContent:!0,showClose:!0}),(0,s.jsx)(V.Z,{...es,disableProceed:A,loadingAction:F,preActionArea:eo,ref:n,scrollContent:!0,showClose:!0}),(0,s.jsx)(eu.Js,{header:"".concat((null==x?void 0:x.anvil)?"Rerun":"Run"," install manifest ").concat(null==x?void 0:x.name),loading:ef,ref:r,showClose:!0,wide:!0,children:ej}),(0,s.jsx)(z.Z,{closeOnProceed:!0,...a,ref:e,scrollContent:!0,wide:!0}),ei]})};let tA="common-ups-input-ip-address",tF="common-ups-input-host-name",tT="IP address",tU="Host name";var tO=e=>{let{formUtils:{buildFinishInputTestBatchFunction:t,buildInputFirstRenderFunction:n,setMessage:r},previous:{upsIPAddress:l,upsName:a}={}}=e;return(0,s.jsx)(d.Z,{columns:{xs:1,sm:2},layout:{"common-ups-input-cell-host-name":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:tF,label:tU,value:a}),inputTestBatch:(0,F.Gn)(tU,()=>{r(tF)},{onFinishBatch:t(tF)},e=>{r(tF,{children:e})}),onFirstRender:n(tF),required:!0})},"common-ups-input-cell-ip-address":{children:(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{id:tA,label:tT,value:l}),inputTestBatch:(0,F._)(tT,()=>{r(tA)},{onFinishBatch:t(tA)},e=>{r(tA,{children:e})}),onFirstRender:n(tA),required:!0})}},spacing:"1em"})},tN=n(86549);let tR="add-ups-select-ups-type-id";var tq=e=>{let{formUtils:t,loading:n,previous:r={},upsTemplate:l}=e,{buildInputFirstRenderFunction:a,setValidity:i}=t,{upsTypeId:c=""}=r,d=(0,_.Z)(),[u,m]=(0,o.useState)(c),h=(0,o.useMemo)(()=>l?Object.entries(l).map(e=>{let t,[n,{brand:r,description:l,links:{0:a}}]=e;if(a){let{linkHref:e,linkLabel:n}=a;t=(0,s.jsx)(tN.Z,{href:e,onClick:e=>{e.stopPropagation()},sx:{display:"inline-flex",color:S.E5},target:"_blank",children:n})}return{displayValue:(0,s.jsxs)(Z.Z,{spacing:0,children:[(0,s.jsx)(C.Ac,{inverted:!0,children:r}),(0,s.jsxs)(C.Ac,{inverted:!0,children:[l," (",t,")"]})]}),value:n}}):[],[l]),p=(0,o.useMemo)(()=>l&&(0,s.jsx)(y.Z,{formControlProps:{sx:{marginTop:".3em"}},id:tR,label:"UPS type",onChange:e=>{let{target:{value:t}}=e,n=String(t);i(tR,!0),m(n)},required:!0,selectItems:h,selectProps:{onClearIndicatorClick:()=>{i(tR,!1),m("")},renderValue:e=>{let{brand:t}=l[String(e)];return t}},value:u}),[l,h,u,i]),x=(0,o.useMemo)(()=>n?(0,s.jsx)(D.Z,{}):(0,s.jsxs)(Z.Z,{children:[p,u&&(0,s.jsx)(tO,{formUtils:t,previous:r})]}),[t,u,n,p,r]);return(0,o.useEffect)(()=>{d&&a(tR)({isValid:!!u})},[a,u,d]),x};let tE="edit-ups-input-ups-uuid";var tD=e=>{let{formUtils:t,loading:n,previous:r,upsTemplate:l,upsUUID:a}=e;return(0,o.useMemo)(()=>n?(0,s.jsx)(D.Z,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tq,{formUtils:t,previous:r,upsTemplate:l}),(0,s.jsx)("input",{hidden:!0,id:tE,readOnly:!0,value:a})]}),[t,n,r,l,a])};let t_=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];let[{target:r}]=n,{elements:l}=r,{value:a}=l.namedItem(tF),{value:o}=l.namedItem(tA),i=l.namedItem(tR),c="",d="",u="";i&&({value:u}=i,{agent:c,brand:d}=e[u]);let m=l.namedItem(tE),h="";return m&&({value:h}=m),{agent:c,brand:d,ipAddress:o,name:a,typeId:u,uuid:h}},tB=e=>{let{brand:t,ipAddress:n,name:r,uuid:l}=e;return(0,s.jsx)($.Z,{listItems:{"ups-brand":{label:"Brand",value:t},"ups-name":{label:"Host name",value:r},"ups-ip-address":{label:"IP address",value:n}},listItemProps:{sx:{padding:0}},renderListItem:(e,t)=>{let{label:n,value:r}=t;return(0,s.jsxs)(Z.Z,{fullWidth:!0,growFirst:!0,row:!0,children:[(0,s.jsx)(C.Ac,{children:n}),(0,s.jsx)(C.$_,{children:r})]},"confirm-ups-".concat(l,"-").concat(e))}})};var tH=()=>{let e=(0,_.Z)(),t=(0,o.useRef)({}),n=(0,o.useRef)({}),r=(0,o.useRef)({}),[l,a]=(0,K.Z)(),[c,d]=(0,K.Z)(),[m,p]=(0,o.useState)(!1),[x,f]=(0,o.useState)(!0),[j,g]=(0,o.useState)(),{data:v,isLoading:b}=(0,J.Z)("".concat(h.Z,"/ups"),{refreshInterval:6e4}),w=(0,X.Z)([tA,tF,tR],r),{isFormInvalid:y,isFormSubmitting:P,submitForm:M}=w,{buildDeleteDialogProps:S,checks:I,getCheck:A,hasChecks:F,setCheck:T}=(0,Q.Z)({list:v}),U=(0,o.useCallback)(e=>{var n,r;let{upsAgent:l,upsIPAddress:o,upsName:i,upsUUID:c}=e,d=null!==(r=null===(n=Object.entries(null!=j?j:{}).find(e=>{let[,{agent:t}]=e;return l===t}))||void 0===n?void 0:n[0])&&void 0!==r?r:"";return{actionProceedText:"Update",content:(0,s.jsx)(tD,{formUtils:w,previous:{upsIPAddress:o,upsName:i,upsTypeId:d},upsTemplate:j,upsUUID:c}),onSubmitAppend:e=>{var n;if(!j)return;let r=t_(j,e),{name:l}=r;a({actionProceedText:"Update",content:tB(r),onProceedAppend:()=>{M({body:r,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to update UPS. ",e]}),method:"put",successMsg:"Successfully updated UPS ".concat(i),url:"/ups/".concat(c)})},titleText:(0,s.jsxs)(C.z,{children:["Update"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:l})," ","with the following data?"]})}),null===(n=t.current.setOpen)||void 0===n||n.call(null,!0)},titleText:(0,s.jsxs)(C.z,{children:["Update UPS"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:i})]})}},[w,a,M,j]),O=(0,o.useMemo)(()=>({actionProceedText:"Add",content:(0,s.jsx)(tq,{formUtils:w,upsTemplate:j}),onSubmitAppend:e=>{var n;if(!j)return;let r=t_(j,e),{brand:l,name:o}=r;a({actionProceedText:"Add",content:tB(r),onProceedAppend:()=>{M({body:r,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to add UPS. ",e]}),method:"post",successMsg:"Successfully added UPS ".concat(o),url:"/ups"})},titleText:(0,s.jsxs)(C.z,{children:["Add a"," ",(0,s.jsx)(C.Q0,{fontSize:"inherit",children:l})," UPS with the following data?"]})}),null===(n=t.current.setOpen)||void 0===n||n.call(null,!0)},titleText:"Add a UPS"}),[w,a,M,j]),N=(0,o.useMemo)(()=>(0,s.jsx)($.Z,{allowEdit:!0,allowItemButton:m,disableDelete:!F,edit:m,header:!0,listEmpty:"No Ups(es) registered.",listItems:v,onAdd:()=>{var e;d(O),null===(e=n.current.setOpen)||void 0===e||e.call(null,!0)},onDelete:()=>{var e;a(S({getConfirmDialogTitle:e=>"Delete ".concat(e," UPSes?"),onProceedAppend:()=>{M({body:{uuids:I},getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to delete UPS(es). ",e]}),method:"delete",url:"/ups"})},renderEntry:e=>{let{key:t}=e;return(0,s.jsx)(C.Ac,{children:null==v?void 0:v[t].upsName})}})),null===(e=t.current.setOpen)||void 0===e||e.call(null,!0)},onEdit:()=>{p(e=>!e)},onItemCheckboxChange:(e,t,n)=>{T(e,n)},onItemClick:e=>{var t;d(U(e)),null===(t=n.current.setOpen)||void 0===t||t.call(null,!0)},renderListItemCheckboxState:e=>A(e),renderListItem:(e,t)=>{let{upsAgent:n,upsIPAddress:r,upsName:l}=t;return(0,s.jsxs)(Z.Z,{fullWidth:!0,row:!0,children:[(0,s.jsx)(C.Ac,{children:l}),(0,s.jsxs)(C.Ac,{children:['agent="',n,'"']}),(0,s.jsxs)(C.Ac,{children:['ip="',r,'"']})]})}}),[O,S,U,I,A,F,m,T,a,d,M,v]),R=(0,o.useMemo)(()=>x||b?(0,s.jsx)(D.Z,{}):N,[x,b,N]),q=(0,o.useMemo)(()=>(0,s.jsx)(W.Z,{count:1,defaultMessageType:"warning",ref:r}),[]);return e&&i.Z.get("/ups/template").then(e=>{let{data:t}=e;g(t)}).catch(e=>{(0,u.Z)(e)}).finally(()=>{f(!1)}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(k.s_,{children:[(0,s.jsx)(k.V9,{children:(0,s.jsx)(C.z,{children:"Manage UPSes"})}),R]}),(0,s.jsx)(V.Z,{...c,disableProceed:y,loadingAction:P,preActionArea:q,ref:n,showClose:!0}),(0,s.jsx)(z.Z,{closeOnProceed:!0,...l,ref:t})]})},tz=n(99429),tL=n(4244);let tV="prepare-network-host-name-input",tG="prepare-network-netconf-input-group",t$="Host name",tW=function(e){let{netconf:t}=e;for(var n,s=arguments.length,r=Array(s>1?s-1:0),l=1;l<s;l++)r[l-1]=arguments[l];let[{target:a}]=r,{elements:o}=a,{value:i}=o.namedItem(tV);return{hostName:i,...null===(n=t.get)||void 0===n?void 0:n.call(null)}},tJ=e=>{let{networks:t=[],...n}=e,s=t.reduce((e,t)=>{let{interfaces:n,ipAddress:s,name:r="",type:l,typeCount:a,subnetMask:o}=t,i="".concat(l).concat(a),c=n.reduce((e,t,n)=>{if(t){let{networkInterfaceName:s}=t;e["link".concat(n+1)]=s}return e},{});return e[i]={name:r,network:"".concat(s,"/").concat(o),...c},e},{});return{...n,networks:s}};var tQ=e=>{let{expectUUID:t=!1,hostUUID:n}=e,{isReady:r,query:{host_uuid:l}}=(0,a.useRouter)(),d=(0,o.useRef)({}),m=(0,o.useRef)({}),h=(0,o.useRef)({}),[p,x]=(0,K.Z)(),[f,j]=(0,o.useState)(),[g,v]=(0,o.useState)(),[y,P]=(0,o.useState)(!0),[M,S]=(0,o.useState)(),{buildFinishInputTestBatchFunction:I,buildInputFirstRenderFunction:A,isFormInvalid:T,setMessage:U,setValidity:O,submitForm:N}=(0,X.Z)([tV,tG],h),R=(0,o.useMemo)(()=>n!==M,[n,M]),q=(0,o.useMemo)(()=>!!n&&R,[n,R]),E=(0,o.useMemo)(()=>(0,s.jsx)(k.V9,{children:(0,s.jsxs)(C.z,{children:["Prepare network on ",null==f?void 0:f.shortHostName]})}),[f]),_=(0,o.useMemo)(()=>(0,s.jsx)(tL.Z,{expectHostDetail:!0,hostDetail:f,ref:m,toggleSubmitDisabled:e=>{O(tG,e)}}),[f,O]),B=(0,o.useMemo)(()=>(0,s.jsx)(W.Z,{count:1,defaultMessageType:"warning",ref:h}),[]),H=(0,o.useMemo)(()=>y?(0,s.jsx)(D.Z,{mt:0}):g?(0,s.jsx)(eT.Z,{...g}):(0,s.jsxs)(s.Fragment,{children:[E,(0,s.jsxs)(Z.Z,{component:"form",onSubmit:function(){for(var e,t=arguments.length,r=Array(t),l=0;l<t;l++)r[l]=arguments[l];let[a]=r;a.preventDefault();let o=tW({netconf:m.current},...r);x({actionProceedText:"Prepare",content:(0,s.jsx)(G.Z,{entries:tJ(o),getEntryLabel:e=>{let{cap:t,key:n}=e;return/^(dns|[a-z]+n\d+)/.test(n)?n.toUpperCase():t(n)}}),onProceedAppend:()=>{var e;N({body:o,getErrorMsg:e=>(0,s.jsxs)(s.Fragment,{children:["Failed to prepare network. ",e]}),method:"put",setMsg:null==m?void 0:null===(e=m.current)||void 0===e?void 0:e.setMessage,successMsg:"Initiated prepare network on ".concat(null==f?void 0:f.shortHostName),url:"/host/".concat(n,"?handler=subnode-network")})},titleText:"Prepare ".concat(null==f?void 0:f.shortHostName," network?")}),null===(e=d.current.setOpen)||void 0===e||e.call(null,!0)},children:[(0,s.jsx)(b.Z,{input:(0,s.jsx)(w.Z,{formControlProps:{sx:{maxWidth:"20em"}},id:tV,label:t$,value:null==f?void 0:f.hostName}),inputTestBatch:(0,F.Gn)(t$,()=>{U(tV)},{onFinishBatch:I(tV)},e=>{U(tV,{children:e})}),onFirstRender:A(tV),required:!0}),B,_,(0,s.jsx)(Z.Z,{row:!0,justifyContent:"flex-end",children:(0,s.jsx)(tz.Z,{disabled:T,type:"submit",children:"Prepare network"})})]})]}),[y,g,E,null==f?void 0:f.hostName,null==f?void 0:f.shortHostName,I,A,B,_,T,x,N,n,U]),L=(0,o.useCallback)(e=>{P(!0),y&&i.Z.get("/host/".concat(e)).then(e=>{let{data:t}=e;S(t.hostUUID),j(t)}).catch(e=>{let{children:t}=(0,u.Z)(e);v({children:"Failed to get target host information; cannot continue. ".concat(t),type:"error"})}).finally(()=>{P(!1)})},[P,y,S,j,v]);return(0,o.useEffect)(()=>{t?q&&L(n):r&&!g&&(l?L(c(l)):(v({children:"No host UUID provided; cannot continue.",type:"error"}),P(!1)))},[g,L,n,t,r,l,v,j,P,q]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.s_,{children:H}),(0,s.jsx)(z.Z,{closeOnProceed:!0,scrollContent:!0,...p,ref:d})]})},tK=n(7111),tX=n(16826),tY=e=>{let{label:t,...n}=e,r=(0,o.useMemo)(()=>"string"==typeof t?(0,s.jsx)(C.Ac,{inheritColour:!0,children:t}):t,[t]);return(0,s.jsx)(tK.Z,{...n,label:r,sx:{borderRadius:S.n_,color:S.s7,padding:".4em .8em",textTransform:"none",["&.".concat(tX.Z.selected)]:{color:S.Ej}}})},t0=e=>{let{changingTabId:t,children:n,retain:r=!1,tabId:l}=e,a=(0,o.useMemo)(()=>t===l,[t,l]),i=(0,o.useMemo)(()=>r?(0,s.jsx)(x.Z,{sx:{display:a?"initial":"none"},children:n}):a&&n,[n,a,r]);return(0,s.jsx)(s.Fragment,{children:i})},t1=n(49360),t2=n(63885),t5=n(17038),t8=n(93124);let t9="1.8em";var t4=e=>{let{orientation:t,variant:n="fullWidth",...r}=e,l=(0,t1.Z)(),a=(0,o.useCallback)(e=>l.breakpoints.up(e),[l]),i=(0,t2.Z)(a("xs")),c=(0,t2.Z)(a("sm")),d=(0,t2.Z)(a("md")),u=(0,t2.Z)(a("lg")),m=(0,t2.Z)(a("xl")),h=(0,o.useMemo)(()=>[["xs",i],["sm",c],["md",d],["lg",u],["xl",m]],[u,d,c,m,i]),p=(0,o.useMemo)(()=>{let e;return"object"==typeof t?h.some(n=>{let[s,r]=n;return r&&t[s]&&(e=t[s]),!r}):e=t,e},[h,t]);return(0,s.jsx)(t5.Z,{...r,orientation:p,variant:n,sx:{minHeight:"1em",["&.".concat(t8.Z.vertical)]:{minHeight:t9,["& .".concat(tX.Z.root)]:{alignItems:"flex-start",minHeight:t9,paddingLeft:"2em"},["& .".concat(t8.Z.indicator)]:{right:"initial"}},["& .".concat(tX.Z.root)]:{minHeight:"1em"},["& .".concat(t8.Z.indicator)]:{backgroundColor:S.Ej,borderRadius:S.n_}}})};let t3="prepare-host",t6="prepare-network",t7="manage-fence",ne="manage-ups",nt="manage-manifest",nn={[t3]:"Prepare Host",[t6]:"Prepare Network",[t7]:"Manage Fence Devices",[ne]:"Manage UPSes",[nt]:"Manage Manifests"},ns="Loading",nr={md:8,sm:6,xs:1},nl={md:6,sm:4,xs:1},na=()=>(0,s.jsx)(d.Z,{columns:nr,layout:{"preparehost-left-column":{},"preparehost-center-column":{children:(0,s.jsxs)(k.s_,{children:[(0,s.jsx)(k.V9,{children:(0,s.jsx)(C.z,{children:"Hosts"})}),(0,s.jsx)(eA,{})]}),...nl}}}),no=()=>{let e=(0,_.Z)(),[t,n]=(0,o.useState)(),[r,l]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>{let e;if(t){let n=Object.entries(t);e=(0,s.jsx)(t4,{onChange:(e,t)=>{l(t)},orientation:"vertical",value:r,children:n.map(e=>{let[t,{shortHostName:n}]=e;return(0,s.jsx)(tY,{label:n,value:t},"".concat(t6,"-").concat(t))})})}else e=(0,s.jsx)(D.Z,{mt:0});return e},[t,r]);return e&&i.Z.get("/host",{params:{types:["dr","node"]}}).then(e=>{let{data:t}=e;n(t),l(Object.keys(t)[0])}).catch(e=>{(0,u.Z)(e)}),(0,s.jsx)(d.Z,{columns:nr,layout:{"preparenetwork-left-column":{children:(0,s.jsx)(k.s_,{children:a}),sm:2},"preparenetwork-center-column":{children:(0,s.jsx)(tQ,{expectUUID:!0,hostUUID:r||void 0}),...nl}}})},ni=()=>(0,s.jsx)(d.Z,{columns:nr,layout:{"managefence-left-column":{},"managefence-center-column":{children:(0,s.jsx)(er,{}),...nl}}}),nc=()=>(0,s.jsx)(d.Z,{columns:nr,layout:{"manageups-left-column":{},"manageups-center-column":{children:(0,s.jsx)(tH,{}),...nl}}}),nd=()=>(0,s.jsx)(d.Z,{columns:nr,layout:{"managemanifest-left-column":{},"managemanifest-center-column":{children:(0,s.jsx)(tI,{}),...nl}}});var nu=()=>{let{isReady:e,query:{step:t}}=(0,a.useRouter)(),[n,r]=(0,o.useState)(!1),[i,d]=(0,o.useState)(ns);return(0,o.useEffect)(()=>{if(e){let e=c(t,{fallbackValue:t3});nn[e]||(e=t3),i===ns&&d(nn[e]),n||r(e)}},[e,n,i,t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsx)("title",{children:i})}),(0,s.jsx)(m.Z,{}),(0,s.jsx)(k.s_,{children:(0,s.jsxs)(t4,{onChange:(e,t)=>{r(t),d(nn[t])},orientation:{xs:"vertical",sm:"horizontal"},value:n,children:[(0,s.jsx)(tY,{label:"Prepare host",value:t3}),(0,s.jsx)(tY,{label:"Prepare network",value:t6}),(0,s.jsx)(tY,{label:"Manage fence devices",value:t7}),(0,s.jsx)(tY,{label:"Manage UPSes",value:ne}),(0,s.jsx)(tY,{label:"Manage manifests",value:nt})]})}),(0,s.jsx)(t0,{changingTabId:n,tabId:t3,children:(0,s.jsx)(na,{})}),(0,s.jsx)(t0,{changingTabId:n,tabId:t6,children:(0,s.jsx)(no,{})}),(0,s.jsx)(t0,{changingTabId:n,tabId:t7,children:(0,s.jsx)(ni,{})}),(0,s.jsx)(t0,{changingTabId:n,tabId:ne,children:(0,s.jsx)(nc,{})}),(0,s.jsx)(t0,{changingTabId:n,tabId:nt,children:(0,s.jsx)(nd,{})})]})}}},function(e){e.O(0,[162,442,318,206,74,461,602,982,509,334,858,26,133,321,784,777,888,774,179],function(){return e(e.s=29582)}),_N_E=e.O()}]);