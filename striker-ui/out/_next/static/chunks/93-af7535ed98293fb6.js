"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{96674:function(e,t,n){var s=n(85893),l=n(89256),r=n(62191),i=n(89262),o=n(59879),a=n(324),u=n(28721),c=n(73315),d=n(14440),p=n(55074),x=n(82492),h=n.n(x),m=n(67294),g=n(77831),v=n(34635),f=n(91029);let U=e=>(0,s.jsx)(l.Z,{in:!0,children:(0,s.jsx)(r.Z,{...e})}),j=(0,i.ZP)("ul")({padding:0}),b=o.Z;t.Z=e=>{let{componentsProps:t,extendRenderInput:n,getGroupLabel:l,label:r,ListboxProps:i,messageBoxProps:o,renderGroup:x,renderInput:S,sx:y,...I}=e,Z=(0,m.useMemo)(()=>h()({paper:{sx:{backgroundColor:g.s7,["& .".concat(a.Z.groupLabel)]:{backgroundColor:g.s7}}}},t),[t]),D=(0,m.useMemo)(()=>h()({sx:{["& .".concat(a.Z.option)]:{'&[aria-selected="true"]':{backgroundColor:g.lD,["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}},["&.".concat(a.Z.focused)]:{backgroundColor:g.lD}}}},i),[i]),P=(0,m.useMemo)(()=>x||l&&(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)(b,{component:"div",className:a.Z.groupLabel,children:l(e.group)}),(0,s.jsx)(j,{className:a.Z.groupUl,children:e.children})]},e.key)),[l,x]),C=(0,m.useMemo)(()=>null!=S?S:e=>{let{fullWidth:t,InputProps:l,InputLabelProps:i,inputProps:o}=e,a={formControlProps:{fullWidth:t,ref:l.ref},inputLabelProps:i,inputProps:{className:l.className,endAdornment:l.endAdornment,inputProps:o,startAdornment:l.startAdornment},label:r};return null==n||n.call(null,a,e),(0,s.jsx)(f.Z,{...a})},[n,r,S]),M=(0,m.useMemo)(()=>h()({["& .".concat(u.Z.root," .").concat(a.Z.endAdornment)]:{right:"7px",["& .".concat(c.Z.root)]:{color:g.s7}}},y),[y]);return(0,s.jsxs)(d.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,s.jsx)(p.Z,{PaperComponent:U,...I,ListboxProps:D,renderGroup:P,renderInput:C,slotProps:Z,sx:M}),(0,s.jsx)(v.Z,{...o})]})}},77583:function(e,t,n){var s=n(85893),l=n(14440),r=n(67294),i=n(34003),o=n(56903),a=n(87006),u=n(59278);let c=(0,r.forwardRef)((e,t)=>{let{actionCancelText:n="Cancel",actionProceedText:c,children:d,closeOnProceed:p=!1,contentContainerProps:x,dialogProps:h,disableProceed:m,loading:g,loadingAction:v=!1,onActionAppend:f,onCancelAppend:U,onProceedAppend:j,openInitially:b,preActionArea:S,proceedButtonProps:y,proceedColour:I="blue",scrollContent:Z=!1,scrollBoxProps:D,showActionArea:P=!0,showCancel:C,showClose:M,titleText:k,wide:A,content:G=d}=e,B=(0,r.useRef)(null),F=(0,r.useMemo)(()=>(0,a.Z)(G,u.Ac),[G]),w=(0,r.useMemo)(()=>(0,r.createElement)(Z?i.VZ:l.Z,D,F),[F,D,Z]),z=(0,r.useMemo)(()=>P&&(0,s.jsx)(i.ux,{cancelProps:{children:n,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==U||U.call(null,...t)}},closeOnProceed:p,loading:v,proceedProps:{background:I,children:c,disabled:m,onClick:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];null==f||f.call(null,...t),null==j||j.call(null,...t)},...y},showCancel:C}),[n,c,p,m,v,f,U,j,y,I,P,C]);return(0,r.useImperativeHandle)(t,()=>({setOpen:e=>{var t;return null===(t=B.current)||void 0===t?void 0:t.setOpen(e)}}),[]),(0,s.jsx)(i.Js,{dialogProps:h,header:k,loading:g,openInitially:b,ref:B,showClose:M,wide:A,children:(0,s.jsxs)(o.Z,{...x,children:[w,S,z]})})});c.displayName="ConfirmDialog",t.Z=c},67732:function(e,t,n){var s=n(85893),l=n(89262),r=n(65086),i=n(60166),o=n(67294),a=n(77831),u=n(23833);let c=(0,l.ZP)(r.Z)({["& .".concat(i.Z.paper)]:{backgroundColor:a.s7}});t.Z=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[l]=t,{children:r,getItemDisabled:i,items:a={},muiMenuProps:d,onItemClick:p,open:x,renderItem:h}=l,m=(0,o.useMemo)(()=>Object.entries(a),[a]),g=(0,o.useMemo)(()=>m.map(e=>{let[t,n]=e;return(0,s.jsx)(u.Z,{disabled:null==i?void 0:i.call(null,t,n),onClick:function(){for(var e=arguments.length,s=Array(e),l=0;l<e;l++)s[l]=arguments[l];return null==p?void 0:p.call(null,t,n,...s)},children:null==h?void 0:h.call(null,t,n)},t)}),[i,p,m,h]);return(0,s.jsx)(c,{open:x,...d,children:r||g})}},23833:function(e,t,n){var s=n(89262),l=n(85959),r=n(73970),i=n(77831);let o=(0,s.ZP)(l.Z)({backgroundColor:i.s7,paddingRight:"3em",["&.".concat(r.Z.selected)]:{backgroundColor:i.lD,fontWeight:400,["&.".concat(r.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}},["&.".concat(r.Z.focusVisible)]:{backgroundColor:i.lD},"&:hover":{backgroundColor:i.lD}});t.Z=o},34179:function(e,t,n){var s=n(85893),l=n(14440),r=n(20408),i=n(28721),o=n(77831),a=n(34635),u=n(91029),c=n(6189);let d=e=>{let{id:t,label:n,inputWithLabelProps:d,messageBoxProps:p,onChange:x,selectItems:h,selectWithLabelProps:m,value:g}=e;return(0,s.jsxs)(l.Z,{children:[(0,s.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"row","& > :first-child":{flexGrow:1},"& > :not(:last-child)":{marginRight:".5em"},["&:hover\n          .".concat(r.Z.root,"\n          .").concat(i.Z.root,"\n          .").concat(i.Z.notchedOutline)]:{borderColor:o.s7}},children:[(0,s.jsx)(u.Z,{id:t,label:n,onChange:x,value:g,...d}),(0,s.jsx)(c.Z,{formControlProps:{fullWidth:!1,sx:{minWidth:"min-content"}},id:"".concat(t,"-nested-select"),selectItems:h,...m})]}),(0,s.jsx)(a.Z,{...p})]})};d.defaultProps={inputWithLabelProps:void 0,messageBoxProps:void 0,selectWithLabelProps:void 0},t.Z=d},98337:function(e,t,n){let s,l;var r=n(85893),i=n(67294),o=n(14440),a=n(99514),u=n(92309),c=n(12641),d=n(25934),p=n(77831),x=n(84628),h=n(98484),m=n(96674),g=n(77583),v=n(99429),f=n(56903),U=n(62800),j=n(65895),b=n(99576),S=n(91029),y=n(34179),I=n(23930),Z=n(6189),D=n(25137),P=n(52675),C=n(59278);let M=BigInt(0),k=BigInt(65536),A=BigInt(104857600),G={backgroundColor:p.Ej,color:p.lD,"&:hover":{backgroundColor:p.Ej}},B=(e,t)=>{let{onButtonClick:n}=t;return(0,r.jsx)(v.Z,{disabled:void 0===n,onClick:n,sx:{minWidth:"unset",whiteSpace:"nowrap"},children:"Max: ".concat(e)})},F=function(){let{endAdornment:e,mainLabel:t,subLabel:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.jsxs)(o.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"row",width:"100%","& > :first-child":{flexGrow:1}},children:[(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:[t&&(0,r.jsx)(C.Ac,{inverted:!0,text:t}),n&&(0,r.jsx)(C.Ac,{inverted:!0,text:n})]}),e]})},w=e=>{let t={},n=e.reduce((e,n)=>{let{anvilUUID:s,anvilName:l,anvilTotalMemory:i,anvilTotalAllocatedMemory:a,anvilTotalAvailableMemory:u,hosts:c,servers:d,storageGroups:p,files:x}=n,{anvilStorageGroups:h,anvilStorageGroupUUIDs:m}=p.reduce((t,n)=>{let i={...n,anvilUUID:s,anvilName:l,storageGroupSize:BigInt(n.storageGroupSize),storageGroupFree:BigInt(n.storageGroupFree),humanizedStorageGroupFree:""};return(0,U.Bh)(n.storageGroupFree,{fromUnit:"B",onSuccess:{string:(e,t)=>{i.humanizedStorageGroupFree="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),t.anvilStorageGroupUUIDs.push(n.storageGroupUUID),t.anvilStorageGroups.push(i),e.storageGroups.push(i),e.storageGroupSelectItems.push({displayValue:F({endAdornment:(0,r.jsx)(C.Ac,{inverted:!0,text:"~".concat(i.humanizedStorageGroupFree," free")}),mainLabel:n.storageGroupName,subLabel:l}),value:n.storageGroupUUID}),e.storageGroupUUIDMapToData[n.storageGroupUUID]=i,t},{anvilStorageGroups:[],anvilStorageGroupUUIDs:[]}),g=[];x.forEach(e=>{let{fileUUID:n}=e;g.push(n),t[n]=e});let v={...n,anvilTotalMemory:BigInt(i),anvilTotalAllocatedMemory:BigInt(a),anvilTotalAvailableMemory:BigInt(u),humanizedAnvilTotalAvailableMemory:"",hosts:c.map(e=>({...e,hostMemory:BigInt(e.hostMemory)})),servers:d.map(t=>{let{serverMemory:n,serverName:s,...l}=t,r={...l,serverMemory:BigInt(n),serverName:s};return e.serverNameMapToData[s]=r,r}),storageGroupUUIDs:m,storageGroups:h,fileUUIDs:g};return(0,U.Bh)(u,{fromUnit:"B",onSuccess:{string:(e,t)=>{v.humanizedAnvilTotalAvailableMemory="".concat(e," ").concat(t)}},precision:0,toUnit:"ibyte"}),e.anvils.push(v),e.anvilSelectItems.push({displayValue:F({endAdornment:(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",width:"8rem"},children:[(0,r.jsx)(C.Ac,{inverted:!0,text:"CPU: ".concat(v.anvilTotalCPUCores," cores")}),(0,r.jsx)(C.Ac,{inverted:!0,text:"Memory: ~".concat(v.humanizedAnvilTotalAvailableMemory)})]}),mainLabel:v.anvilName,subLabel:v.anvilDescription}),value:s}),e.anvilUUIDMapToData[s]=v,e},{anvils:[],anvilSelectItems:[],anvilUUIDMapToData:{},files:[],fileSelectItems:[],fileUUIDMapToData:{},serverNameMapToData:{},storageGroups:[],storageGroupSelectItems:[],storageGroupUUIDMapToData:{}});return Object.values(t).forEach(e=>{n.files.push(e),n.fileSelectItems.push({displayValue:e.fileName,value:e.fileUUID}),n.fileUUIDMapToData[e.fileUUID]=e}),n},z=function(e,t,n,s,l,r,i){let{includeAnvilUUIDs:o=[],includeFileUUIDs:a=[],includeStorageGroupUUIDs:u=[]}=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},c=()=>!0,d=()=>!0,p=()=>!0;o.length>0&&(c=e=>o.includes(e)),a.length>0&&(d=e=>a.includes(e)),u.length>0&&(p=e=>u.includes(e));let x={},h=r.reduce((e,t,n)=>{var s;let r=null!==(s=l[n])&&void 0!==s?s:M;return e.all+=r,""===t||(void 0===e[t]&&(e[t]=M),e[t]+=r),e},{all:M}),m=e.reduce((e,o)=>{let{anvilUUID:a}=o;if(c(a)){let{anvilTotalCPUCores:u,anvilTotalAvailableMemory:c,files:m,fileUUIDs:g,storageGroups:v}=o,f=[],U=M,j=M;v.forEach(e=>{let{storageGroupUUID:t,storageGroupFree:n}=e;p(t)&&(f.push(t),j+=n,n>U&&(U=n))}),[()=>v.length>0,()=>n<=u,()=>s<=c,()=>r.every((e,n)=>{var s;let r=null!==(s=l[n])&&void 0!==s?s:M,i=!0,o=r<=U;return""!==e&&(i=f.includes(e),o=r<=t[e].storageGroupFree),i&&o}),()=>Object.entries(h).every(e=>{let[n,s]=e;return"all"===n?s<=j:s<=t[n].storageGroupFree}),()=>i.every(e=>""===e||g.includes(e))].every(e=>e())&&(e.anvils.push(o),e.anvilUUIDs.push(a),e.maxCPUCores=Math.max(u,e.maxCPUCores),c>e.maxMemory&&(e.maxMemory=c),m.forEach(e=>{let{fileUUID:t}=e;d(t)&&(x[t]=!0)}),e.storageGroupUUIDs.push(...f),e.maxVirtualDiskSizes.fill(U))}return e},{anvils:[],anvilUUIDs:[],fileUUIDs:[],maxCPUCores:0,maxMemory:M,maxVirtualDiskSizes:r.map(()=>M),storageGroupUUIDs:[]});return m.fileUUIDs=Object.keys(x),r.forEach((e,n)=>{""!==e&&(m.maxVirtualDiskSizes[n]=t[e].storageGroupFree)}),m},O=(e,t,n,s,l,i,a,u)=>{let c=function(n){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return e[n][s]},d=function(s,l){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e[s][r]=l,n({...e})},p=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;d("sizes",n);let{formattedMaxVDSizes:s,maxVirtualDiskSizes:l}=i({virtualDisks:e});u({inputs:{["vd".concat(t,"Size")]:{displayMax:"".concat(s[t]),max:l[t],value:n}}})},h=e=>{let{value:t=c("inputSizes"),unit:n=c("inputUnits")}=e;t!==c("inputSizes")&&d("inputSizes",t),n!==c("inputUnits")&&d("inputUnits",n),(0,U.KY)(t,n,e=>p(e),()=>p())},m=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c("inputStorageGroupUUIDs");t!==c("inputStorageGroupUUIDs")&&d("inputStorageGroupUUIDs",t),i({virtualDisks:e})};return(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,r.jsx)(y.Z,{id:"ps-virtual-disk-size-".concat(t),label:"Disk size",messageBoxProps:c("inputSizeMessages"),inputWithLabelProps:{inputProps:{endAdornment:B("".concat(c("inputMaxes")," ").concat(c("inputUnits")),{onButtonClick:()=>{d("inputSizes",c("inputMaxes")),p(c("maxes"))}}),onChange:e=>{let{target:{value:t}}=e;h({value:t})},type:"number",value:c("inputSizes")},inputLabelProps:{isNotifyRequired:c("sizes")===M}},selectItems:x.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;h({unit:t})},value:c("inputUnits")}}})}),(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,r.jsx)(Z.Z,{id:"ps-storage-group-".concat(t),label:"Storage group",disableItem:e=>!(l.includes(e)&&c("sizes")<=a[e].storageGroupFree),inputLabelProps:{isNotifyRequired:0===c("inputStorageGroupUUIDs").length},messageBoxProps:c("inputStorageGroupUUIDMessages"),selectItems:s,selectProps:{onChange:e=>{let{target:{value:t}}=e;m(t)},onClearIndicatorClick:()=>m(""),renderValue:e=>{var t;let{anvilName:n="?",storageGroupName:s="Unknown (".concat(e,")")}=null!==(t=a[e])&&void 0!==t?t:{};return"".concat(s," (").concat(n,")")},value:c("inputStorageGroupUUIDs")}})})]},"ps-virtual-disk-".concat(c("stateIds")))},N=function(){let{existingVirtualDisks:e={stateIds:[],inputMaxes:[],inputSizeMessages:[],inputSizes:[],inputStorageGroupUUIDMessages:[],inputStorageGroupUUIDs:[],inputUnits:[],maxes:[],sizes:[]},stateId:t=(0,d.Z)(),inputMax:n="0",inputSize:s="",inputSizeMessage:l,inputStorageGroupUUID:r="",inputStorageGroupUUIDMessage:i,inputUnit:o="GiB",max:a=M,setVirtualDisks:u,size:c=M}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stateIds:p,inputMaxes:x,inputSizeMessages:h,inputSizes:m,inputStorageGroupUUIDMessages:g,inputStorageGroupUUIDs:v,inputUnits:f,maxes:U,sizes:j}=e;return p.push(t),x.push(n),h.push(l),m.push(s),g.push(i),v.push(r),f.push(o),U.push(a),j.push(c),null==u||u.call(null,{...e}),e},T=e=>e.filter(e=>""!==e),R=e=>({fromUnit:"B",onSuccess:{string:e},precision:0,toUnit:"ibyte"});(0,U.Bh)(k,R((e,t)=>{s="".concat(e," ").concat(t)})),(0,U.Bh)(A,R((e,t)=>{l="".concat(e," ").concat(t)})),t.Z=e=>{let{dialogProps:{open:t},onClose:n}=e,[d,F]=(0,i.useState)([]),[R,Q]=(0,i.useState)({}),[q,L]=(0,i.useState)({}),[E,V]=(0,i.useState)({}),[W,_]=(0,i.useState)({}),[H,J]=(0,i.useState)([]),[Y,K]=(0,i.useState)([]),[X,$]=(0,i.useState)([]),[ee,et]=(0,i.useState)([]),[en,es]=(0,i.useState)(""),[el,er]=(0,i.useState)(),[ei,eo]=(0,i.useState)(1),[ea,eu]=(0,i.useState)(0),[ec,ed]=(0,i.useState)(),[ep,ex]=(0,i.useState)(M),[eh,em]=(0,i.useState)(M),[eg,ev]=(0,i.useState)(),[ef,eU]=(0,i.useState)("0"),[ej,eb]=(0,i.useState)(""),[eS,ey]=(0,i.useState)("GiB"),[eI,eZ]=(0,i.useState)(N()),[eD,eP]=(0,i.useState)(""),[eC,eM]=(0,i.useState)(),[ek,eA]=(0,i.useState)(""),[eG]=(0,i.useState)(),[eB,eF]=(0,i.useState)(""),[ew,ez]=(0,i.useState)(),[eO,eN]=(0,i.useState)(null),[eT,eR]=(0,i.useState)(),[eQ,eq]=(0,i.useState)([]),[eL,eE]=(0,i.useState)([]),[eV,eW]=(0,i.useState)([]),[e_,eH]=(0,i.useState)(!1),[eJ,eY]=(0,i.useState)(!1),[eK,eX]=(0,i.useState)(!1),[e$,e0]=(0,i.useState)(0),e1=(0,i.useMemo)(()=>{let e=[];for(let t=1;t<=ea;t+=1)e.push(t);return e},[ea]),e2={serverName:{defaults:{onSuccess:()=>{er(void 0)},value:en},isRequired:!0,tests:[{onFailure:()=>{er({text:"The server name length must be 1 to 16 characters.",type:"warning"})},test:e=>{let{value:t}=e,{length:n}=t;return n>=1&&n<=16}},{onFailure:()=>{er({text:"The server name is expected to only contain alphanumeric, hyphen, or underscore characters.",type:"warning"})},test:e=>{let{value:t}=e;return/^[a-zA-Z0-9_-]+$/.test(t)}},{onFailure:()=>{er({text:"This server name already exists, please choose another name.",type:"warning"})},test:e=>{let{value:t}=e;return void 0===E[t]}}]},cpuCores:{defaults:{max:ea,min:1,onSuccess:()=>{ed(void 0)},value:ei},isRequired:!0,tests:[{onFailure:()=>{ed({text:"Non available.",type:"warning"})},test:P.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ed({text:"The number of CPU cores is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:P.SQ}]},memory:{defaults:{displayMax:"".concat(ef," ").concat(eS),displayMin:s,max:eh,min:k,onSuccess:()=>{ev(void 0)},value:ep},isRequired:!0,tests:[{onFailure:()=>{ev({text:"Non available.",type:"warning"})},test:P.X7},{onFailure:e=>{let{displayMax:t,displayMin:n}=e;ev({text:"Memory is expected to be between ".concat(n," and ").concat(t,"."),type:"warning"})},test:P.SQ}]},installISO:{defaults:{onSuccess:()=>{eM(void 0)},value:eD},isRequired:!0,tests:[{test:P.HJ}]},anvil:{defaults:{onSuccess:()=>{ez(void 0)},value:eB},isRequired:!0,tests:[{test:P.HJ}]},optimizeForOS:{defaults:{onSuccess:()=>{eR(void 0)},value:null==eO?void 0:eO.key},isRequired:!0,tests:[{test:P.HJ}]}};eI.inputSizeMessages.forEach((e,t)=>{e2["vd".concat(t,"Size")]={defaults:{displayMax:"".concat(eI.inputMaxes[t]," ").concat(eI.inputUnits[t]),displayMin:l,max:eI.maxes[t],min:A,onSuccess:()=>{eI.inputSizeMessages[t]=void 0},value:eI.sizes[t]},isRequired:!0,onFinishBatch:()=>{eZ({...eI})},tests:[{onFailure:()=>{eI.inputSizeMessages[t]={text:"Non available.",type:"warning"}},test:P.X7},{onFailure:e=>{let{displayMax:n,displayMin:s}=e;eI.inputSizeMessages[t]={text:"Virtual disk ".concat(t," size is expected to be between ").concat(s," and ").concat(n,"."),type:"warning"}},test:P.SQ}]},e2["vd".concat(t,"StorageGroup")]={defaults:{onSuccess:()=>{eI.inputStorageGroupUUIDMessages[t]=void 0},value:eI.inputStorageGroupUUIDs[t]},isRequired:!0,onFinishBatch:()=>{eZ({...eI})},tests:[{test:P.HJ}]}});let e9=function(){let{allAnvils:e=d,cpuCores:t=ei,fileUUIDs:n=[eD,ek],includeAnvilUUIDs:s=T([eB]),includeFileUUIDs:l,includeStorageGroupUUIDs:r,inputMemoryUnit:i=eS,memory:o=ep,storageGroupUUIDMapToData:a=W,virtualDisks:u=eI}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{anvilUUIDs:c,fileUUIDs:p,maxCPUCores:x,maxMemory:h,maxVirtualDiskSizes:m,storageGroupUUIDs:g}=z(e,a,t,o,u.sizes,u.inputStorageGroupUUIDs,n,{includeAnvilUUIDs:s,includeFileUUIDs:l,includeStorageGroupUUIDs:r});eu(x),em(h);let v=[];u.maxes=m,u.maxes.forEach((e,t)=>{(0,U.Bh)(e,{fromUnit:"B",onSuccess:{string:(e,n)=>{u.inputMaxes[t]=e,v[t]="".concat(e," ").concat(n)}},toUnit:u.inputUnits[t]})}),eZ({...u}),eq(c),eE(p),eW(g);let f="";return(0,U.Bh)(h,{fromUnit:"B",onSuccess:{string:(e,t)=>{eU(e),f="".concat(e," ").concat(t)}},toUnit:i}),{formattedMaxMemory:f,formattedMaxVDSizes:v,maxCPUCores:x,maxMemory:h,maxVirtualDiskSizes:m}},e7=(0,i.useCallback)(e9,[]),e8=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[s,...l]=t;return(0,P.BD)({tests:e2,...s},...l)},e3=function(){let{cmValue:e=M,cmUnit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ex(e);let{formattedMaxMemory:n,maxMemory:s}=e9({inputMemoryUnit:t,memory:e});e8({inputs:{memory:{displayMax:n,max:s,value:e}}})},e4=function(){let{value:e=ej,unit:t=eS}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e!==ej&&eb(e),t!==eS&&ey(t),(0,U.KY)(e,t,e=>e3({cmValue:e,cmUnit:t}),()=>e3({cmUnit:t}))},e6=e=>{eP(e),e9({fileUUIDs:[e,ek]})},e5=e=>{eA(e),e9({fileUUIDs:[eD,e]})},te=e=>{let t=T([e]);eF(e),e9({includeAnvilUUIDs:t})},tt=(0,i.useMemo)(()=>({"anvil node":!!Object.keys(R).length,file:!!Object.keys(q).length,"storage group":!!Object.keys(W).length}),[R,q,W]);return(0,i.useEffect)(()=>{h.Z.get("/anvil",{params:{anvilUUIDs:"all",isForProvisionServer:!0}}).then(e=>{let{data:t}=e,{anvils:n,anvilSelectItems:s,anvilUUIDMapToData:l,fileSelectItems:r,fileUUIDMapToData:i,serverNameMapToData:o,storageGroupSelectItems:a,storageGroupUUIDMapToData:u}=w(t.anvils);F(n),Q(l),L(i),V(o),_(u),J(s),K(r),et(a);let c={allAnvils:n,storageGroupUUIDMapToData:u};if(1===s.length){let{0:{value:e}}=s;eF(e),c.includeAnvilUUIDs=[e]}if(1===r.length){let{0:{value:e}}=r;eP(e),c.fileUUIDs=[e,""]}if(1===a.length){let{0:{value:e}}=a;eZ(t=>{let n={...t};return n.inputStorageGroupUUIDs[0]=e,c.virtualDisks=n,n})}e7(c),$(Object.entries(t.oses).map(e=>{let[t,n]=e;return{key:t,label:n}})),eH(!0)}).catch(()=>{})},[e7]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(u.Z,{fullWidth:!0,maxWidth:"sm",open:t,PaperComponent:I.s_,PaperProps:{sx:{overflow:"visible"}},children:[(0,r.jsxs)(I.V9,{children:[(0,r.jsx)(C.z,{text:"Provision a Server"}),(0,r.jsx)(j.Z,{onClick:n,sx:{backgroundColor:p.hM,color:p.lD,"&:hover":{backgroundColor:p.hM}},children:(0,r.jsx)(c.Z,{})})]}),(0,r.jsx)(f.Z,{spacing:".6em",children:Object.entries(tt).map(e=>{let[t,n]=e;return!n&&(0,r.jsxs)(b.Z,{type:"warning",children:["No ",t," available yet. Try refreshing after the resource gets created."]})})}),e_?(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",maxHeight:"50vh",overflowY:"scroll",paddingTop:".6em","& > :not(:first-child)":{marginTop:"1em"}},children:[(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,r.jsx)(S.Z,{id:"ps-server-name",label:"Server name",inputProps:{onChange:e=>{let{target:{value:t}}=e;es(t),e8({inputs:{serverName:{value:t}}})},value:en},inputLabelProps:{isNotifyRequired:0===en.length},messageBoxProps:el})}),(0,r.jsx)(m.Z,{id:"ps-cpu-cores",disableClearable:!0,extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=ei<=0},getOptionLabel:e=>String(e),label:"CPU cores",messageBoxProps:ec,noOptionsText:"No available number of cores.",onChange:(e,t)=>{if(!t||t===ei)return;eo(t);let{maxCPUCores:n}=e9({cpuCores:t});e8({inputs:{cpuCores:{max:n,value:t}}})},openOnFocus:!0,options:e1,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-cpu-cores-".concat(t)},t),value:ei}),(0,r.jsx)(y.Z,{id:"ps-memory",label:"Memory",messageBoxProps:eg,inputWithLabelProps:{inputProps:{endAdornment:B("".concat(ef," ").concat(eS),{onButtonClick:()=>{eb(ef),e3({cmValue:eh})}}),onChange:e=>{let{target:{value:t}}=e;e4({value:t})},type:"number",value:ej},inputLabelProps:{isNotifyRequired:ep===M}},selectItems:x.k,selectWithLabelProps:{selectProps:{onChange:e=>{let{target:{value:t}}=e;e4({unit:t})},value:eS}}}),eI.stateIds.map((e,t)=>O(eI,t,eZ,ee,eV,e9,W,e8)),(0,r.jsx)(Z.Z,{disableItem:e=>e===ek,hideItem:e=>!eL.includes(e),id:"ps-install-image",inputLabelProps:{isNotifyRequired:0===eD.length},label:"Install ISO",messageBoxProps:eC,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e6(t)},onClearIndicatorClick:()=>e6(""),value:eD}}),(0,r.jsx)(Z.Z,{disableItem:e=>e===eD,hideItem:e=>!eL.includes(e),id:"ps-driver-image",label:"Driver ISO",messageBoxProps:eG,selectItems:Y,selectProps:{onChange:e=>{let{target:{value:t}}=e;e5(t)},onClearIndicatorClick:()=>e5(""),value:ek}}),(0,r.jsx)(Z.Z,{disableItem:e=>!eQ.includes(e),id:"ps-anvil",inputLabelProps:{isNotifyRequired:0===eB.length},label:"Anvil node",messageBoxProps:ew,selectItems:H,selectProps:{onChange:e=>{let{target:{value:t}}=e;te(t)},onClearIndicatorClick:()=>te(""),renderValue:e=>{var t;let{anvilName:n="Unknown ".concat(e)}=null!==(t=R[e])&&void 0!==t?t:{};return n},value:eB}}),(0,r.jsx)(m.Z,{id:"ps-optimize-for-os",extendRenderInput:e=>{let{inputLabelProps:t={}}=e;t.isNotifyRequired=null===eO},isOptionEqualToValue:(e,t)=>e.key===t.key,label:"Optimize for OS",messageBoxProps:eT,noOptionsText:"No matching OS",onChange:(e,t)=>{eN(t)},openOnFocus:!0,options:X,renderOption:(e,t)=>(0,i.createElement)("li",{...e,key:"ps-optimize-for-os-".concat(t.key),children:[t.label," (",t.key,")"]}),value:eO})]}):(0,r.jsx)(D.Z,{}),(0,r.jsxs)(o.Z,{sx:{display:"flex",flexDirection:"column",marginTop:"1em","& > :not(:first-child)":{marginTop:"1em"}},children:[e$>0&&(0,r.jsx)(b.Z,{isAllowClose:!0,text:"Provision server job registered. You can provision another server, or exit; it won't affect the registered job."}),eK?(0,r.jsx)(D.Z,{mt:0}):(0,r.jsx)(o.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"flex-end",width:"100%"},children:(0,r.jsx)(v.Z,{disabled:!e8({isIgnoreOnCallbacks:!0}),onClick:()=>{eY(!0)},sx:G,children:"Provision"})})]})]}),eJ&&(0,r.jsx)(g.Z,{actionProceedText:"Provision",content:(0,r.jsxs)(a.ZP,{container:!0,columns:10,direction:"column",children:[(0,r.jsx)(a.ZP,{item:!0,xs:10,children:(0,r.jsxs)(C.Ac,{children:["Server ",(0,r.jsx)(C.Q0,{text:en})," will be created on anvil node"," ",(0,r.jsx)(C.Q0,{text:R[eB].anvilName})," ","with the following properties:"]})}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(C.Ac,{text:"CPU"})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsxs)(C.Ac,{children:[(0,r.jsx)(C.Q0,{edge:"start",children:ei})," ","core(s)"]})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(C.Ac,{children:[(0,r.jsx)(C.Q0,{edge:"start",children:ea})," ","core(s) available"]})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(C.Ac,{text:"Memory"})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsx)(C.Ac,{children:(0,r.jsxs)(C.Q0,{edge:"start",children:[ej," ",eS]})})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(C.Ac,{children:[(0,r.jsxs)(C.Q0,{edge:"start",children:[ef," ",eS]})," ","available"]})})]}),eI.stateIds.map((e,t)=>{let n=eI.inputMaxes[t],s=eI.inputSizes[t],l=eI.inputUnits[t],i=W[eI.inputStorageGroupUUIDs[t]].storageGroupName;return(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsxs)(C.Ac,{children:["Disk ",(0,r.jsx)(C.Q0,{text:t})]})}),(0,r.jsx)(a.ZP,{item:!0,xs:5,children:(0,r.jsxs)(C.Ac,{children:[(0,r.jsxs)(C.Q0,{edge:"start",children:[s," ",l]})," ","on ",(0,r.jsx)(C.Q0,{children:i})]})}),(0,r.jsx)(a.ZP,{item:!0,xs:3,children:(0,r.jsxs)(C.Ac,{children:[(0,r.jsxs)(C.Q0,{edge:"start",children:[n," ",l]})," ","available"]})})]},"ps-virtual-disk-".concat(e,"-summary"))}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(C.Ac,{text:"Install ISO"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(C.Ac,{children:(0,r.jsx)(C.Q0,{edge:"start",children:q[eD].fileName})})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(C.Ac,{text:"Driver ISO"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(C.Ac,{children:q[ek]?(0,r.jsx)(C.Q0,{edge:"start",children:q[ek].fileName}):"none"})})]}),(0,r.jsxs)(a.ZP,{container:!0,direction:"row",item:!0,xs:10,children:[(0,r.jsx)(a.ZP,{item:!0,xs:2,children:(0,r.jsx)(C.Ac,{text:"Optimize for OS"})}),(0,r.jsx)(a.ZP,{item:!0,xs:8,children:(0,r.jsx)(C.Ac,{children:(0,r.jsx)(C.Q0,{edge:"start",children:"".concat(null==eO?void 0:eO.label)})})})]})]}),dialogProps:{open:eJ},onCancelAppend:()=>{eY(!1)},onProceedAppend:()=>{let e={serverName:en,cpuCores:ei,memory:ep.toString(),virtualDisks:eI.stateIds.map((e,t)=>({storageSize:eI.sizes[t].toString(),storageGroupUUID:eI.inputStorageGroupUUIDs[t]})),installISOFileUUID:eD,driverISOFileUUID:ek,anvilUUID:eB,optimizeForOS:null==eO?void 0:eO.key};eX(!0),h.Z.post("/server",e).then(()=>{eX(!1),e0(e$+1)}),eY(!1)},proceedButtonProps:{sx:G},titleText:"Provision ".concat(en,"?")})]})}},6189:function(e,t,n){n.d(t,{Z:function(){return I}});var s=n(85893),l=n(84799),r=n(20869),i=n(60166),o=n(51714),a=n(82492),u=n.n(a),c=n(67294),d=n(77831),p=n(34635),x=n(23833),h=n(15627),m=n(79237),g=n(12641),v=n(49440),f=n(80543),U=n(79588),j=n(99657),b=n(80594),S=n(64242),y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[r]=t,{onClearIndicatorClick:i,...o}=r,{sx:a,value:u,...p}=o,x=(0,c.useMemo)(()=>({["& .".concat(l.Z.icon)]:{color:d.s7},["& .".concat(v.Z.root)]:{marginRight:".8em"},["& .".concat(f.Z.root)]:{color:d.s7,visibility:"hidden"},["&:hover .".concat(v.Z.root," .").concat(f.Z.root,",\n      &.").concat(U.Z.focused," .").concat(v.Z.root," .").concat(f.Z.root)]:{visibility:"visible"},...a}),[a]),h=(0,c.useMemo)(()=>String(u).length>0&&i&&(0,s.jsx)(j.Z,{position:"end",children:(0,s.jsx)(b.Z,{onClick:i,children:(0,s.jsx)(g.Z,{fontSize:"small"})})}),[i,u]);return(0,s.jsx)(S.Z,{endAdornment:h,value:u,...p,sx:x})},I=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let[a]=t,{id:g,label:v,selectItems:f,checkItem:U,disableItem:j,formControlProps:b,hideItem:S,inputLabelProps:I={},isReadOnly:Z=!1,messageBoxProps:D={},name:P,noOptionsText:C="No options",onBlur:M,onChange:k,onFocus:A,required:G,selectProps:{MenuProps:B,multiple:F,sx:w,...z}={},value:O,isCheckableItems:N=F}=a,T=(0,c.useMemo)(()=>Z?u()({["& .".concat(l.Z.icon)]:{visibility:"hidden"}},w):w,[Z,w]),R=(0,c.useCallback)(e=>N&&(0,s.jsx)(r.Z,{checked:null==U?void 0:U.call(null,e)}),[U,N]),Q=(0,c.useCallback)((e,t)=>(0,s.jsxs)(x.Z,{disabled:null==j?void 0:j.call(null,e),sx:{display:(null==S?void 0:S.call(null,e))?"none":void 0},value:e,children:[R(e),t]},"".concat(g,"-").concat(e)),[R,j,S,g]),q=(0,c.useMemo)(()=>"".concat(g,"-select-element"),[g]),L=(0,c.useMemo)(()=>(0,s.jsx)(h.Z,{id:g,label:v}),[g,v]),E=(0,c.useMemo)(()=>v&&(0,s.jsx)(m.Z,{htmlFor:q,isNotifyRequired:G,...I,children:v}),[I,G,v,q]),V=(0,c.useMemo)(()=>f.length?f.map(e=>{if("string"==typeof e)return Q(e,e);let{value:t,displayValue:n=String(t)}=e;return Q(t,n)}):(0,s.jsx)(x.Z,{disabled:!0,children:C}),[Q,C,f]),W=(0,c.useMemo)(()=>u()({sx:{["& .".concat(i.Z.paper)]:{backgroundColor:d.s7}}},B),[B]);return(0,s.jsxs)(o.Z,{fullWidth:!0,...b,children:[E,(0,s.jsx)(y,{id:q,input:L,MenuProps:W,multiple:F,name:P,onBlur:M,onChange:k,onFocus:A,readOnly:Z,value:O,...z,sx:T,children:V}),(0,s.jsx)(p.Z,{...D})]})}},84628:function(e,t,n){n.d(t,{k:function(){return s}});let s=["B","KiB","MiB","GiB","TiB"].map(e=>({value:e}))},62800:function(e,t,n){n.d(t,{Bh:function(){return l},KY:function(){return r},MU:function(){return i}});var s=n(54490),l=function(e){let{fromUnit:t,onFailure:n,onSuccess:l,precision:r,toUnit:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,s.gO)(e,{fromUnit:t,precision:r,toUnit:i});if(o){let{value:e,unit:t}=o;try{var a,u,c;null==l||null===(a=l.bigint)||void 0===a||a.call(null,BigInt(e),t),null==l||null===(u=l.number)||void 0===u||u.call(null,parseFloat(e),t),null==l||null===(c=l.string)||void 0===c||c.call(null,e,t)}catch(s){null==n||n.call(null,s,e,t)}}else null==n||n.call(null)},r=(e,t,n,s)=>{l(e,{fromUnit:t,onFailure:s,onSuccess:{bigint:n},precision:0,toUnit:"B"})},i=e=>(0,s._d)(e,{toUnit:"ibyte"})},52675:function(e,t,n){n.d(t,{_:function(){return o},dg:function(){return a},qY:function(){return d},Gn:function(){return p},LT:function(){return U},BD:function(){return f},X7:function(){return j},HJ:function(){return i},SQ:function(){return u}});var s=n(85893),l=n(38189),r=n(59278),i=e=>{let{value:t}=e;return!!t&&String(t).length>0},o=function(e,t){let{isRequired:n,onFinishBatch:r,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:r,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];a((0,s.jsxs)(s.Fragment,{children:[e," should be a valid IPv4 address."]}),...n)},test:e=>{let{value:t}=e;return l.tf.test(t)}}]}},a=function(e,t){let{isRequired:n,onFinishBatch:r,...o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return{defaults:{...o,onSuccess:t},isRequired:n,onFinishBatch:r,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];a((0,s.jsxs)(s.Fragment,{children:[e," must be one or more valid IPv4 addresses separated by comma(s); without trailing comma."]}),...n)},test:e=>{let{value:t}=e;return l.ah.test(t)}}]}},u=e=>{let{max:t,min:n,value:s}=e;return!!s&&s>=n&&s<=t},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parseInt";return"number"==typeof e?e:Number[t](String(e))},d=function(e,t){let{isRequired:n,onFinishBatch:l,...r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,d=[];return i?d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];i((0,s.jsxs)(s.Fragment,{children:[e," must be a valid integer."]}),...n)},test:e=>{let{value:t}=e;return Number.isSafeInteger(c(t))}}):o&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];o((0,s.jsxs)(s.Fragment,{children:[e," must be a valid floating-point number."]}),...n)},test:e=>{let{value:t}=e;return Number.isFinite(c(t,"parseFloat"))}}),a&&d.push({onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];let{displayMax:r,displayMin:i}=n[0];a((0,s.jsxs)(s.Fragment,{children:[e," is expected to be between ",i," and ",r,"."]}),...n)},test:u}),{defaults:{...r,onSuccess:t},isRequired:n,onFinishBatch:l,tests:d}},p=function(e,t){let{isRequired:n,onFinishBatch:o,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;return{defaults:{...a,onSuccess:t},isRequired:n,onFinishBatch:o,tests:[{test:i},{onFailure:function(){for(var t=arguments.length,n=Array(t),l=0;l<t;l++)n[l]=arguments[l];u((0,s.jsxs)(s.Fragment,{children:[e," cannot contain single-quote (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:"'"}),"), double-quote (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:'"'}),"), slash (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:"/"}),"), backslash (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:"\\"}),"), angle brackets (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:"<>"}),"), curly brackets (",(0,s.jsx)(r.Q0,{inheritColour:!0,text:"{}"}),")."]}),...n)},test:e=>{let{value:t}=e;return l.OU.test(t)}}]}};let x=()=>({}),h=e=>{let{onFailure:t,onSuccess:n}=e;return{cbFailure:t,cbSuccess:n}},m=e=>{let{isIgnoreOnCallbacks:t,onFinishBatch:n}=e;return t?{setTestCallbacks:x}:{cbFinishBatch:n,setTestCallbacks:h}},g=(e,t)=>null!=e?e:t,v=(e,t)=>e||t;var f=function(){let{excludeTestIds:e=[],excludeTestIdsRe:t,inputs:n={},isContinueOnFailure:s,isIgnoreOnCallbacks:l,isTestAll:r=0===Object.keys(n).length,tests:i={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=[...e],a={},u=!0;return r&&Object.keys(i).forEach(e=>{a[e]={}}),a={...a,...n},t&&Object.keys(a).forEach(e=>{t.test(e)&&o.push(e)}),o.forEach(e=>{delete a[e]}),Object.keys(a).every(e=>{let{defaults:{compare:t=[],displayMax:n,displayMin:r,getCompare:o,getValue:c,isIgnoreOnCallbacks:d=l,max:p=0,min:x=0,onSuccess:h,value:f=null}={},isRequired:U=!1,onFinishBatch:j,optionalTests:b,tests:S}=i[e],{getCompare:y=o,getValue:I=c,isIgnoreOnCallbacks:Z=d,max:D=p,min:P=x,compare:C=g(null==y?void 0:y.call(null),t),value:M=g(null==I?void 0:I.call(null),f),displayMax:k=v(n,String(D)),displayMin:A=v(r,String(P))}=a[e],{cbFinishBatch:G,setTestCallbacks:B}=m({isIgnoreOnCallbacks:Z,onFinishBatch:j});if(!M&&!U)return null==G||G.call(null,!0,e),!0;let F=e=>{let{onFailure:t,onSuccess:n=h,test:s}=e,l={},r=s({append:l,compare:C,max:D,min:P,value:M}),{cbFailure:i,cbSuccess:o}=B({onFailure:t,onSuccess:n});return r?null==o||o.call(null,{append:l}):(u=r,null==i||i.call(null,{append:l,compare:C,displayMax:k,displayMin:A,max:D,min:P,value:M})),r};null==b||b.forEach(F);let w=S.every(F);return null==G||G.call(null,w,e),w||s}),u},U=function(e){let{excludeTestIds:t=[],...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){let{excludeTestIds:s=[],...l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f({tests:e,excludeTestIds:[...t,...s],...n,...l})}},j=e=>{let{max:t,min:n}=e;return t>=n}}}]);