"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{4903:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(37876),o=t(41316);let a=e=>{let{children:n}=e;return(0,r.jsxs)(o.Ay,{columns:{lg:8,xs:1},container:!0,children:[(0,r.jsx)(o.Ay,{item:!0,xs:1}),(0,r.jsx)(o.Ay,{item:!0,lg:6,xs:1,children:n}),(0,r.jsx)(o.Ay,{item:!0,xs:1})]})}},6759:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(91423);let o=e=>Object.entries(e).reduce((e,n)=>{let[,t]=n,{ip:o,link1Uuid:a,link2Uuid:s="",sequence:i,subnetMask:l,type:c}=t;return e[1===i?"default".concat(c):(0,r.A)()]={interfaces:[a,s],ip:o,sequence:String(i),subnetMask:l,type:c},e},{})},43010:(e,n,t)=>{t.d(n,{A:()=>b});var r=t(37876),o=t(45363),a=t(97422),s=t(7254),i=t(58939),l=t(76847),c=t(15681),u=t(14924),d=t(28893),m=t(35268),p=t(50046),x=t.n(p),h=t(14232),k=t(10595),A=t(41282),g=t(69146);let f=e=>(0,r.jsx)(i.A,{in:!0,children:(0,r.jsx)(u.A,{...e})}),w=(0,m.Ay)("ul")({padding:0}),j=l.A,b=e=>{let{componentsProps:n,extendRenderInput:t,getGroupLabel:i,label:l,ListboxProps:u,messageBoxProps:m,renderGroup:p,renderInput:b,required:y,sx:v,...C}=e,M=(0,h.useMemo)(()=>x()({paper:{sx:{backgroundColor:k.Qu,["& .".concat(o.A.groupLabel)]:{backgroundColor:k.Qu}}}},n),[n]),I=(0,h.useMemo)(()=>x()({sx:{["& .".concat(o.A.option)]:{'&[aria-selected="true"]':{backgroundColor:k.a$,["&.".concat(o.A.focused)]:{backgroundColor:k.a$}},["&.".concat(o.A.focused)]:{backgroundColor:k.a$}}}},u),[u]),N=(0,h.useMemo)(()=>p||i&&(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)(j,{component:"div",className:o.A.groupLabel,children:i(e.group)}),(0,r.jsx)(w,{className:o.A.groupUl,children:e.children})]},e.key)),[i,p]),q=(0,h.useMemo)(()=>null!=b?b:e=>{let{fullWidth:n,InputProps:o,InputLabelProps:a,inputProps:s}=e,i={formControlProps:{fullWidth:n,ref:o.ref},inputLabelProps:a,inputProps:{className:o.className,endAdornment:o.endAdornment,inputProps:s,startAdornment:o.startAdornment,sx:{["& .".concat(c.A.input)]:{margin:0}}},label:l,required:y,value:s.value};return null==t||t.call(null,i,e),(0,r.jsx)(g.A,{...i})},[t,l,b,y]),O=(0,h.useMemo)(()=>x()({["& .".concat(c.A.root," .").concat(o.A.endAdornment)]:{right:"7px",["& .".concat(d.A.root)]:{color:k.Qu}}},v),[v]);return(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(a.A,{autoHighlight:!0,autoSelect:y,PaperComponent:f,...C,ListboxProps:I,renderGroup:N,renderInput:q,slotProps:M,sx:O}),(0,r.jsx)(A.A,{...m})]})}},43620:(e,n,t)=>{t.d(n,{A:()=>v});var r=t(37876),o=t(11532),a=t(7227),s=t(83221),i=t(83911),l=t(50046),c=t.n(l),u=t(14232),d=t(10595),m=t(41282),p=t(77630),x=t(31381),h=t(36872),k=t(44725),A=t(77617),g=t(76759),f=t(91549),w=t(78175),j=t(96363),b=t(36269);let y=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[o]=n,{onClearIndicatorClick:a,...s}=o,{sx:l,value:c,...m}=s,p=(0,u.useMemo)(()=>({["& .".concat(i.A.icon)]:{color:d.Qu},["& .".concat(j.A.root)]:{marginRight:".8em"},["& .".concat(A.A.root)]:{color:d.Qu,visibility:"hidden"},["&:hover .".concat(j.A.root," .").concat(A.A.root,",\n      &.").concat(f.A.focused," .").concat(j.A.root," .").concat(A.A.root)]:{visibility:"visible"},...l}),[l]),x=(0,u.useMemo)(()=>{if(c&&a)return(0,r.jsx)(b.A,{position:"end",children:(0,r.jsx)(g.A,{onClick:a,tabIndex:-1,children:(0,r.jsx)(k.A,{fontSize:"small"})})})},[a,c]);return(0,r.jsx)(w.A,{endAdornment:x,value:c,...m,sx:p})},v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[l]=n,{id:k,label:A,selectItems:g,checkItem:f,disableItem:w,formControlProps:j,hideItem:b,inputLabelProps:v={},isReadOnly:C=!1,messageBoxProps:M={},name:I,noOptionsText:N="No options",onBlur:q,onChange:O,onFocus:S,required:D,selectProps:{MenuProps:P,multiple:F,sx:E,...L}={},value:Q,isCheckableItems:V=F}=l,U=(0,u.useMemo)(()=>C?c()({["& .".concat(i.A.icon)]:{visibility:"hidden"}},E):E,[C,E]),R=(0,u.useCallback)(e=>V&&(0,r.jsx)(o.A,{checked:null==f?void 0:f.call(null,e)}),[f,V]),$=(0,u.useCallback)((e,n)=>(0,r.jsxs)(p.A,{disabled:null==w?void 0:w.call(null,e),sx:{display:(null==b?void 0:b.call(null,e))?"none":void 0},value:e,children:[R(e),n]},"".concat(k,"-").concat(e)),[R,w,b,k]),T=(0,u.useMemo)(()=>"".concat(k,"-select-element"),[k]),W=(0,u.useMemo)(()=>(0,r.jsx)(x.A,{id:k,label:A,required:D}),[k,A,D]),H=(0,u.useMemo)(()=>A&&(0,r.jsx)(h.A,{htmlFor:T,...v,children:A}),[v,A,T]),B=(0,u.useMemo)(()=>g.length?g.map(e=>{if("string"==typeof e)return $(e,e);let{value:n,displayValue:t=String(n)}=e;return $(n,t)}):(0,r.jsx)(p.A,{disabled:!0,children:N}),[$,N,g]),G=(0,u.useMemo)(()=>c()({sx:{["& .".concat(s.A.paper)]:{backgroundColor:d.Qu}}},P),[P]);return(0,r.jsxs)(a.A,{fullWidth:!0,...j,children:[H,(0,r.jsx)(y,{id:T,input:W,MenuProps:G,multiple:F,name:I,onBlur:q,onChange:O,onFocus:S,readOnly:C,value:Q,...L,sx:U,children:B}),(0,r.jsx)(m.A,{...M})]})}},56014:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(37876),o=t(9982),a=t(35268),s=t(10595);let i=(0,a.Ay)(o.A)({color:s.a$,textDecorationColor:s.Qu}),l=e=>{let{children:n,...t}=e;return(0,r.jsx)(i,{underline:"always",variant:"subtitle1",...t,children:n})}},62396:(e,n,t)=>{t.d(n,{A:()=>u,h:()=>c});var r=t(77617),o=t(72693),a=t(35268),s=t(13180),i=t(34637),l=t(10595);let c={draggable:"".concat("DragDataGrid","-draggable")},u=(0,a.Ay)(s.z)({color:l.Qu,["& .".concat(c.draggable)]:{"&:hover":{cursor:"grab",["& .".concat(i.x.cell)]:{["& .".concat(o.A.root)]:{cursor:"auto"}}}},["& .".concat(i.x.columnHeader)]:{"&:focus":{outline:"none"}},["& .".concat(i.x.cell)]:{"&:focus":{outline:"none"},"&:focus-within":{outline:"none"}},["& .".concat(i.x["container--top"])]:{'& [role="row"]':{backgroundColor:"transparent"}},["& .".concat(r.A.root)]:{color:"inherit"}})},68872:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(40143),o=t(65532);let a=(e,n)=>{let{networkInit:t,...a}=e,{networks:s,...i}=t,l=Object.values(s);return{...a,...i,gatewayInterface:l.reduce((e,n)=>{let o,{ip:a,sequence:s,subnetMask:i,type:l}=n;try{o=new r.Netmask("".concat(a,"/").concat(i))}catch(n){return e}return o.contains(t.gateway)?"".concat(l).concat(s):e},""),networks:l.reduce((e,t)=>{let{interfaces:r,ip:a,sequence:s,subnetMask:i,type:l}=t;return r.some(e=>o.KF.test(e))&&e.push({interfaces:r.map(e=>{var t;return e?{mac:null==n||null==(t=n[e])?void 0:t.mac}:null}),ipAddress:a,sequence:s,subnetMask:i,type:l}),e},[])}}},69397:(e,n,t)=>{t.d(n,{A:()=>r});let r=(e,n)=>{let t;try{t=Object.keys(e)}catch(e){t=[]}let r="function"==typeof n?n:()=>n;return t.reduce((n,t)=>{let{[t]:o}=e;return n[t]=r(t,o),n},{})}},73617:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(37876),o=t(7254),a=t(35268),s=t(10595);let i="Decorator",l={ok:"".concat(i,"-ok"),warning:"".concat(i,"-warning"),error:"".concat(i,"-error"),off:"".concat(i,"-off")},c=(0,a.Ay)(o.A)({borderRadius:s.ax,height:"100%",width:"1.4em",["&.".concat(l.ok)]:{backgroundColor:s.ft},["&.".concat(l.warning)]:{backgroundColor:s.hr},["&.".concat(l.error)]:{backgroundColor:s.UH},["&.".concat(l.off)]:{backgroundColor:s.Qu}}),u=e=>{let{colour:n,...t}=e;return(0,r.jsx)(c,{...t,className:l[n]})}},77630:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(93621),o=t(93267),a=t(35268),s=t(10595);let i=(0,a.Ay)(r.A)({backgroundColor:s.Qu,paddingRight:"3em",["&.".concat(o.A.selected)]:{backgroundColor:s.a$,fontWeight:400,["&.".concat(o.A.focusVisible)]:{backgroundColor:s.a$},"&:hover":{backgroundColor:s.a$}},["&.".concat(o.A.focusVisible)]:{backgroundColor:s.a$},"&:hover":{backgroundColor:s.a$}})},87356:(e,n,t)=>{t.d(n,{A:()=>r});let r={bcn:"Back-Channel Network",ifn:"Internet-Facing Network",mn:"Migration Network",sn:"Storage Network"}},99308:(e,n,t)=>{t.d(n,{VT:()=>W,Sf:()=>et,hJ:()=>J});var r=t(37876),o=t(33865),a=t(7),s=t(7254),i=t(41316),l=t(52076),c=t.n(l),u=t(14232),d=t(91423),m=t(73617),p=t(35268);let x={dragging:"".concat("DragArea","-dragging")},h=(0,p.Ay)(s.A)({position:"relative",["&.".concat(x.dragging)]:{cursor:"grabbing",userSelect:"none"}});var k=t(62396),A=t(34318),g=t(72649),f=t.n(g);let w=".5em",j=(0,p.Ay)(s.A)(e=>{let{theme:n}=e;return{display:"grid",[n.breakpoints.up("xs")]:{gridAutoColumns:"calc(100% - ".concat(w,")")},[n.breakpoints.up("sm")]:{gridAutoColumns:"calc(50% - ".concat(w,")")},[n.breakpoints.up("md")]:{gridAutoColumns:"calc(100% / 3 - ".concat(w,")")},[n.breakpoints.up("lg")]:{gridAutoColumns:"calc(25% - ".concat(w,")")},gridAutoFlow:"column",overflowX:"scroll",scrollSnapType:"x","& > div":{scrollSnapAlign:"start"},"& > :not(div:first-child)":{marginLeft:"1em"}}});var b=t(87356),y=t(43010),v=t(10595);let C=(0,p.Ay)(s.A)(()=>({borderColor:v.Qu,borderStyle:"dashed",borderWidth:"4px",display:"flex",flexDirection:"column",padding:".6em","& > :not(:first-child)":{marginTop:".3em"}}));var M=t(92144),I=t(69146),N=t(35755),q=t(43620),O=t(20795),S=t(88259);let D={dr:["bcn","ifn","mn","sn"],striker:["bcn","ifn"],subnode:["bcn","ifn","mn","sn"]},P="3.4em",F=function(){for(var e,n,t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];let[s]=o,{appliedIfaces:l,formikUtils:c,host:d,ifaceHeld:m,ifaces:p,ifaceValues:x,netId:h}=s,{changeFieldValue:k,formik:A,handleChange:g,setFieldChanged:f}=c,j=(0,u.useMemo)(()=>{let e=D[d.type];return e?e.map(e=>{var n;return{displayValue:null!=(n=b.A[e])?n:"Unknown network",value:e}}):[]},[d.type]),v=(0,u.useMemo)(()=>{let e="networkInit.networks",n="".concat(e,".").concat(h);return{ip:"".concat(n,".ip"),link1:"".concat(n,".interfaces.0"),link2:"".concat(n,".interfaces.1"),networks:e,sequence:"".concat(n,".sequence"),subnetMask:"".concat(n,".subnetMask"),type:"".concat(n,".type")}},[h]);return(0,r.jsxs)(N.t$,{children:[(0,r.jsxs)(N.WJ,{children:[(0,r.jsxs)(i.Ay,{container:!0,spacing:"0.1em",children:[(0,r.jsx)(i.Ay,{item:!0,width:{xs:"100%",sm:"calc(100% - ".concat(P,")")},children:(0,r.jsx)(q.A,{id:v.type,label:"Network type",name:v.type,onChange:A.handleChange,required:!0,selectItems:j,value:A.values.networkInit.networks[h].type})}),(0,r.jsx)(i.Ay,{item:!0,width:{xs:"100%",sm:P},children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.sequence,label:"#",name:v.sequence,onChange:g,required:!0,value:A.values.networkInit.networks[h].sequence})})})]}),!A.values.networkInit.networks[h].required&&(0,r.jsx)(M.A,{mapPreset:"delete",onClick:()=>{let{[h]:e,...n}=A.values.networkInit.networks;A.setFieldValue(v.networks,n,!0)},sx:{padding:".2em",position:"absolute",right:"-".concat(w),top:"-.2em"}})]}),(0,r.jsx)(N.BF,{children:(0,r.jsxs)(i.Ay,{columns:1,container:!0,spacing:"1em",children:[(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(C,{onMouseUp:()=>{m&&k(v.link1,m,!0)},children:(0,r.jsx)(y.A,{getOptionDisabled:e=>l[e.uuid]&&e.uuid!==A.values.networkInit.networks[h].interfaces[0],getOptionLabel:e=>e.name,id:v.link1,isOptionEqualToValue:(e,n)=>e.uuid===n.uuid,label:"Link 1",noOptionsText:"No matching interface",onChange:(e,n)=>{k(v.link1,n?n.uuid:"",!0)},openOnFocus:!0,options:x,renderOption:(e,n)=>(0,u.createElement)("li",{...e,key:"link1-ifop-".concat(n.uuid)},(0,r.jsx)(O.a3,{inheritColour:!0,children:n.name})),slotProps:{clearIndicator:{onClick:()=>{f(v.link1,!0)}}},value:null!=(e=p[A.values.networkInit.networks[h].interfaces[0]])?e:null})})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(C,{onMouseUp:()=>{m&&k(v.link2,m,!0)},children:(0,r.jsx)(y.A,{getOptionDisabled:e=>l[e.uuid]&&e.uuid!==A.values.networkInit.networks[h].interfaces[1],getOptionLabel:e=>e.name,id:v.link2,isOptionEqualToValue:(e,n)=>e.uuid===n.uuid,label:"Link 2",noOptionsText:"No matching interface",onChange:(e,n)=>{k(v.link2,n?n.uuid:"",!0)},openOnFocus:!0,options:x,renderOption:(e,n)=>(0,u.createElement)("li",{...e,key:"link2-ifop-".concat(n.uuid)},(0,r.jsx)(O.a3,{inheritColour:!0,children:n.name})),slotProps:{clearIndicator:{onClick:()=>{f(v.link2,!0)}}},value:null!=(n=p[A.values.networkInit.networks[h].interfaces[1]])?n:null})})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.ip,label:"IP address",name:v.ip,onChange:g,required:!0,value:A.values.networkInit.networks[h].ip})})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.subnetMask,label:"Subnet mask",name:v.subnetMask,onChange:g,required:!0,value:A.values.networkInit.networks[h].subnetMask})})})]})})]})},E={applied:"".concat("IfaceDragHandle","-applied")},L=(0,p.Ay)(s.A)({alignItems:"center",display:"flex",flexDirection:"row","&:hover":{cursor:"grab"},"& > svg":{color:v.Qu},["&.".concat(E.applied)]:{"&:hover":{cursor:"auto"},"& > svg":{color:v.ft}}}),Q=(0,p.Ay)(s.A)({alignItems:"center",display:"flex",flexDirection:"row","& > :not(:first-child)":{marginLeft:".5em"}}),V=(0,p.Ay)(Q)({borderColor:v.Qu,borderRadius:v.ax,borderStyle:"solid",borderWidth:"1px",backgroundColor:v.Uv,padding:".6em 1.2em",position:"absolute",zIndex:999}),U=e=>{let{boxProps:n,iface:t}=e;return(0,r.jsx)(V,{...n,children:(0,r.jsx)(O.NA,{children:t.name})})};var R=t(11457),$=t(38750),T=t(30827);let W=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[l]=n,{formikUtils:p,host:g,onFetchSuccess:w}=l,{formik:b,handleChange:y}=p,v=(0,u.useMemo)(()=>{let e="networkInit";return{dns:"".concat(e,".dns"),gateway:"".concat(e,".gateway"),networkInit:e,networks:"".concat(e,".networks"),ntp:"".concat(e,".ntp")}},[]),[C,N]=(0,u.useState)(),[q,D]=(0,u.useState)({x:0,y:0}),[P,Q]=(0,u.useState)(!1),V=(0,u.useMemo)(()=>Object.values(b.values.networkInit.networks).reduce((e,n)=>(n.interfaces.forEach(n=>{n&&(e[n]=!0)}),e),{}),[b.values.networkInit.networks]),{data:W,validating:H}=(0,T.A)("/init/network-interface/".concat(g.uuid),{onError:()=>{Q(!0)},onSuccess:e=>{Q(!1),(e=>{let{appliedNics:n,chains:t,nics:r,formikUtils:o,host:a,subnodeCount:s=2}=e,{formik:i,getFieldChanged:l}=o,c=f()(i.values.networkInit),u=Object.entries(i.values.networkInit.networks),d=Object.values(r).filter(e=>{let{uuid:t}=e;return!n[t]}).filter(e=>{let{slot:n}=e;if(!n)return!0;let r=u.find(e=>{let[,t]=e;return"".concat(t.type).concat(t.sequence)==="".concat(n.type).concat(n.sequence)});if(!r)return!0;let[o]=r,a=c.networks[o],s=i.initialValues.networkInit,d=s.networks[o],m=n.link-1,p="".concat(t.networks,".").concat(o),x="".concat(p,".interfaces.").concat(m),h="".concat(p,".ip"),k="".concat(p,".subnetMask");return l(x)||(null==d?void 0:d.interfaces[m])||(a.interfaces[m]=e.uuid),l(h)||(null==d?void 0:d.ip)||(a.ip=n.ip||""),l(k)||(null==d?void 0:d.subnetMask)||(a.subnetMask=n.subnetMask||""),l(t.dns)||s.dns||(c.dns=n.dns||""),l(t.gateway)||s.gateway||(c.gateway=n.gateway||""),!1}).reduce((e,n)=>{let{ip:t}=n;return t&&(/^10\.10/.test(t)?e.sn.push(n):/^10\.19/.test(t)?e.mn.push(n):/^10\.20/.test(t)?e.bcn.push(n):e.ifn.push(n)),e},{bcn:[],ifn:[],mn:[],sn:[]}),m=u.reduce((e,n)=>{let[,t]=n;return"bcn"===t.type?e.bcn.push(n):"ifn"===t.type?e.ifn.push(n):"mn"===t.type?e.mn.push(n):"sn"===t.type&&e.sn.push(n),e},{bcn:[],ifn:[],mn:[],sn:[]});if(a.sequence>0){let e={bcn:200,sn:100};["bcn","mn","sn"].forEach(n=>{let r="??";"striker"===a.type?r="4":a.parentSequence>0&&(r=String(10+s*(a.parentSequence-1))),m[n].forEach(o=>{let[u]=o,m=c.networks[u],p=i.initialValues.networkInit.networks[u],x="".concat(t.networks,".").concat(u),h="".concat(x,".interfaces.0"),k="".concat(x,".ip"),A="".concat(x,".subnetMask");if(!l(k)&&!(null==p?void 0:p.ip)){let t="mn"===n?199:e[n]+Number(m.sequence),o=a.sequence;"dr"===a.type&&(o+=s),m.ip="10.".concat(t,".").concat(r,".").concat(o)}if(l(A)||(null==p?void 0:p.subnetMask)||(m.subnetMask="255.255.0.0"),!l(h)&&!(null==p?void 0:p.interfaces[0])){let e=d[n].find(e=>e.ip===m.ip);e&&(m.interfaces[0]=e.uuid)}})})}m.ifn.forEach(e=>{let[n]=e,r=c.networks[n],o=i.initialValues.networkInit,a=o.networks[n],s="".concat(t.networks,".").concat(n),u="".concat(s,".interfaces.0"),m="".concat(s,".ip"),p="".concat(s,".subnetMask"),x=d.ifn.shift();x&&(l(u)||(null==a?void 0:a.interfaces[0])||(r.interfaces[0]=x.uuid),l(m)||(null==a?void 0:a.ip)||(r.ip=x.ip||""),l(p)||(null==a?void 0:a.subnetMask)||(r.subnetMask=x.subnetMask||""),"1"===r.sequence&&(l(t.dns)||o.dns||(c.dns=x.dns||""),l(t.gateway)||o.gateway||(c.gateway=x.gateway||"")))}),i.setFieldValue(t.networkInit,c,!0)})({appliedNics:V,chains:v,nics:e,host:g,formikUtils:p}),null==w||w.call(null,e)},refreshInterval:2e3}),B=(0,u.useMemo)(()=>Object.entries(b.values.networkInit.networks),[b.values.networkInit.networks]),G=(0,u.useMemo)(()=>W&&Object.values(W),[W]),Y=(0,u.useMemo)(()=>{if(C)return{className:x.dragging,onMouseLeave:()=>N(void 0),onMouseMove:e=>{let{currentTarget:n,nativeEvent:{clientX:t,clientY:r}}=e,{left:o,top:a}=n.getBoundingClientRect();D({x:t-o,y:r-a})},onMouseUp:()=>N(void 0)}},[C]),_=(0,u.useMemo)(()=>{if(!(null==G?void 0:G.length))return!0;let e=Object.keys(V).length;return G.length-e<=B.filter(e=>{let[,n]=e;return!n.interfaces[0]}).length},[V,B,null==G?void 0:G.length]),z=(0,u.useMemo)(()=>[{align:"center",display:"flex",field:"",renderCell:e=>{let n,{uuid:t}=e.row,s=()=>{N(t)},i=(0,r.jsx)(a.A,{});return V[t]&&(n=E.applied,s=void 0,i=(0,r.jsx)(o.A,{})),(0,r.jsx)(L,{className:n,onMouseDown:s,children:i})},renderHeader:()=>(0,r.jsx)($.A,{syncing:H}),sortable:!1,width:1},{display:"flex",field:"name",flex:1,headerName:"Name",renderCell:e=>{let n,{name:t,state:o}=e.row;return n=P||"down"===o?"warning":"up"===o?"ok":"error",(0,r.jsxs)(A.A,{row:!0,children:[(0,r.jsx)(m.A,{colour:n,sx:{alignSelf:"stretch",height:"auto"}}),(0,r.jsx)(O.NA,{children:t})]})}},{field:"mac",flex:1,headerName:"MAC",renderCell:e=>{let{mac:n}=e.row;return(0,r.jsx)(O.NA,{children:n})}},{field:"state",flex:1,headerName:"State",renderCell:e=>{let{state:n}=e.row;return P?"Lost":c()(n)}},{field:"speed",flex:1,headerName:"Speed",renderCell:e=>{let{speed:n}=e.row;return"".concat(n," Mbps")}},{field:"order",flex:1,headerName:"Order"}],[V,P,H]);return W&&G?(0,r.jsxs)(i.Ay,{columns:{xs:1,sm:2,md:3},container:!0,spacing:"1em",children:[(0,r.jsx)(i.Ay,{item:!0,width:"100%",children:(0,r.jsxs)(h,{onMouseDown:e=>{let{clientX:n,clientY:t,currentTarget:r}=e,{left:o,top:a}=r.getBoundingClientRect();D({x:n-o,y:t-a})},...Y,children:[C&&(0,r.jsx)(U,{boxProps:{left:"calc(".concat(q.x,"px + .4em)"),top:"calc(".concat(q.y,"px - 1em)")},iface:W[C]}),(0,r.jsx)(k.A,{autoHeight:!0,columns:z,disableColumnMenu:!0,disableRowSelectionOnClick:!0,getRowClassName:e=>{let{row:n}=e;return C||V[n.uuid]?"":k.h.draggable},getRowId:e=>e.uuid,hideFooter:!0,initialState:{sorting:{sortModel:[{field:"name",sort:"asc"}]}},rows:G,slotProps:{row:{onMouseDown:e=>{var n;let{target:t}=e,r=null==(n=t.parentElement)?void 0:n.dataset.id;r&&(V[r]||N(r))}}}}),(0,r.jsx)(j,{children:B.map(e=>{let[n]=e;return(0,r.jsx)(s.A,{children:(0,r.jsx)(F,{appliedIfaces:V,formikUtils:p,host:g,ifaceHeld:C,ifaces:W,ifaceValues:G,netId:n})},"hostnet-".concat(n))})})]})}),(0,r.jsx)(i.Ay,{alignSelf:"center",item:!0,xs:1,sm:"auto",children:(0,r.jsx)(M.A,{disabled:_,mapPreset:"add",onClick:()=>{let e=(0,d.A)();b.setFieldValue("".concat(v.networks,".").concat(e),{interfaces:["",""],ip:"",sequence:"",subnetMask:"",type:""},!0)}})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.gateway,label:"Gateway",name:v.gateway,onChange:y,required:!0,value:b.values.networkInit.gateway})})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.dns,label:"DNS",name:v.dns,onChange:y,value:b.values.networkInit.dns})})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(S.A,{input:(0,r.jsx)(I.A,{id:v.ntp,label:"NTP",name:v.ntp,onChange:y,value:b.values.networkInit.ntp})})})]}):(0,r.jsx)(R.A,{})};var H=t(91408),B=t(65532),G=t(69397),Y=t(27743);let _=e=>e.some(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return B.KF.test(e)}),z=e=>e.when(["interfaces","required"],(e,n)=>{let[t,r]=e;return r||_(t)?n.required():n}),K=H.Ik({interfaces:H.YO().of(H.Yj()).length(2).required().when(["required"],(e,n)=>{let[t]=e;return t?n.test({name:"atleast1",message:"At least 1 network interface is required",test:_}):n}),ip:z((0,Y.W5)()),required:H.lc(),sequence:z(H.ai()),subnetMask:z((0,Y.W5)()),type:H.Yj().oneOf(["bcn","ifn","mn","sn"])}),J=H.Ik({dns:H.Yj().matches(B.BU,"DNS must be a comma-separated list of IPv4 addresses"),gateway:(0,Y.W5)().required(),networks:H.RZ(e=>H.Ik((0,G.A)(e,K)))});var X=t(40038);let Z=e=>"network-confirm-".concat(e),ee=(e,n)=>"".concat(b.A[e]," ").concat(n),en=(e,n)=>"".concat(e.toUpperCase()).concat(n),et=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[o]=n,{gatewayIface:a,ifaces:s,values:l}=o,c=(0,u.useMemo)(()=>Object.entries(l.networkInit.networks),[l.networkInit.networks]),{hasIface:d,noIface:m}=(0,u.useMemo)(()=>{let e=[],n=[];return c.forEach(t=>{let[r,o]=t,{interfaces:a}=o;a.some(e=>B.KF.test(e))?e.push(r):n.push(r)}),{hasIface:e,noIface:n}},[c]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Ay,{item:!0,sx:{marginTop:"1.4em"},xs:2,children:(0,r.jsx)(O.a3,{children:"Networks"})}),d.map(e=>{let{interfaces:n,ip:t,sequence:o,subnetMask:a,type:c}=l.networkInit.networks[e],u=Z(e),d=ee(c,o),m=en(c,o);return(0,r.jsx)(i.Ay,{item:!0,mb:"1.4em",xs:1,children:(0,r.jsxs)(i.Ay,{container:!0,spacing:".6em",columns:2,children:[(0,r.jsx)(i.Ay,{item:!0,width:"100%",children:(0,r.jsxs)(O.a3,{children:[d," (",(0,r.jsx)(O.kp,{children:m}),")"]})}),n.map((e,n)=>{let t="".concat(u,"-interface").concat(n),o="none";if(""!==e){var a;t="".concat(t,"-").concat(e),o=null==(a=s[e])?void 0:a.name}return(0,r.jsxs)(i.Ay,{columns:2,container:!0,item:!0,children:[(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.a3,{children:"Link ".concat(n+1)})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.NA,{children:o})})]},t)}),(0,r.jsx)(i.Ay,{item:!0,width:"100%",children:(0,r.jsx)(O.NA,{children:"".concat(t,"/").concat(a)})})]})},u)}),m.map((e,n,t)=>{let{sequence:o,type:a}=l.networkInit.networks[e],s=Z(e),c=ee(a,o),u=en(a,o),d=n===t.length-1?"1.4em":".2em";return(0,r.jsx)(i.Ay,{item:!0,mb:d,width:"100%",children:(0,r.jsxs)(X.A,{children:["No interface(s) set for ",c," (",(0,r.jsx)(O.kp,{inheritColour:!0,children:u}),"), it will be discarded."]})},s)}),(0,r.jsx)(i.Ay,{item:!0,width:"100%"}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.a3,{children:"Gateway"})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.NA,{children:l.networkInit.gateway})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.a3,{children:"Gateway network"})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.NA,{children:a.toUpperCase()})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.a3,{children:"Domain name server(s)"})}),(0,r.jsx)(i.Ay,{item:!0,xs:1,children:(0,r.jsx)(O.NA,{children:l.networkInit.dns})})]})}}}]);