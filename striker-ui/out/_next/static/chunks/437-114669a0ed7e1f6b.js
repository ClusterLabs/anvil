"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[437],{588:(e,n,t)=>{t.d(n,{A:()=>o});var r=t(91423);let o=e=>Object.entries(e).reduce((e,n)=>{let t,[,o]=n,{ip:a,link1Uuid:s,link2Uuid:l="",sequence:i,subnetMask:c,type:u}=o;return e[1===i?"default".concat(u):(0,r.A)()]={interfaces:[s,l],ip:a,sequence:String(i),subnetMask:c,type:u},e},{})},2062:(e,n,t)=>{t.d(n,{A:()=>r});let r=(e,n)=>{let t;try{t=Object.keys(e)}catch(e){t=[]}let r="function"==typeof n?n:()=>n;return t.reduce((n,t)=>{let{[t]:o}=e;return n[t]=r(t,o),n},{})}},19659:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(37876),o=t(94760),a=t(54773),s=t(90890);let l=(0,a.Ay)(o.A)({color:s.a$,textDecorationColor:s.Qu}),i=e=>{let{children:n,...t}=e;return(0,r.jsx)(l,{underline:"always",variant:"subtitle1",...t,children:n})}},27341:(e,n,t)=>{t.d(n,{A:()=>c,h:()=>i});var r=t(50174),o=t(54773),a=t(29296),s=t(34637),l=t(90890);let i={draggable:"".concat("DragDataGrid","-draggable")},c=(0,o.Ay)(a.z)({color:l.Qu,[".".concat(s.x.columnHeader)]:{"&:focus":{outline:"none"}},[".".concat(s.x.columnHeaders)]:{[".".concat(s.x["row--borderBottom"])]:{backgroundColor:"inherit"}},["& .".concat(r.A.root)]:{color:"inherit"},["& .".concat(s.x.cell)]:{"&:focus":{outline:"none"},"&:focus-within":{outline:"none"}},["& .".concat(s.x.row)]:{["&.".concat(i.draggable,":hover")]:{cursor:"grab",["& .".concat(s.x.cell," p")]:{cursor:"auto"}}}})},42658:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(37876),o=t(12981),a=t(54773),s=t(90890);let l="Decorator",i={ok:"".concat(l,"-ok"),warning:"".concat(l,"-warning"),error:"".concat(l,"-error"),off:"".concat(l,"-off")},c=(0,a.Ay)(o.A)({borderRadius:s.ax,height:"100%",width:"1.4em",["&.".concat(i.ok)]:{backgroundColor:s.ft},["&.".concat(i.warning)]:{backgroundColor:s.hr},["&.".concat(i.error)]:{backgroundColor:s.UH},["&.".concat(i.off)]:{backgroundColor:s.Qu}}),u=e=>{let{colour:n,...t}=e;return(0,r.jsx)(c,{...t,className:i[n]})}},57763:(e,n,t)=>{t.d(n,{A:()=>b});var r=t(37876),o=t(85088),a=t(99623),s=t(12981),l=t(24766),i=t(69209),c=t(7674),u=t(11951),d=t(4590),m=t(54773),x=t(50046),h=t.n(x),p=t(14232),A=t(90890),k=t(71949),g=t(69267);let f=e=>(0,r.jsx)(l.A,{in:!0,children:(0,r.jsx)(u.A,{...e})}),w=(0,m.Ay)("ul")({padding:0}),j=i.A,b=e=>{let{componentsProps:n,extendRenderInput:t,getGroupLabel:l,label:i,ListboxProps:u,messageBoxProps:m,renderGroup:x,renderInput:b,required:y,sx:v,...C}=e,I=(0,p.useMemo)(()=>h()({paper:{sx:{backgroundColor:A.Qu,["& .".concat(o.A.groupLabel)]:{backgroundColor:A.Qu}}}},n),[n]),M=(0,p.useMemo)(()=>h()({sx:{["& .".concat(o.A.option)]:{'&[aria-selected="true"]':{backgroundColor:A.a$,["&.".concat(o.A.focused)]:{backgroundColor:A.a$}},["&.".concat(o.A.focused)]:{backgroundColor:A.a$}}}},u),[u]),N=(0,p.useMemo)(()=>x||l&&(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)(j,{component:"div",className:o.A.groupLabel,children:l(e.group)}),(0,r.jsx)(w,{className:o.A.groupUl,children:e.children})]},e.key)),[l,x]),q=(0,p.useMemo)(()=>null!=b?b:e=>{let{fullWidth:n,InputProps:o,InputLabelProps:a,inputProps:s}=e,l={formControlProps:{fullWidth:n,ref:o.ref},inputLabelProps:a,inputProps:{className:o.className,endAdornment:o.endAdornment,inputProps:s,startAdornment:o.startAdornment,sx:{["& .".concat(c.A.input)]:{margin:0}}},label:i,required:y,value:s.value};return null==t||t.call(null,l,e),(0,r.jsx)(g.A,{...l})},[t,i,b,y]),O=(0,p.useMemo)(()=>h()({["& .".concat(c.A.root," .").concat(o.A.endAdornment)]:{right:"7px",["& .".concat(d.A.root)]:{color:A.Qu}}},v),[v]);return(0,r.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(a.A,{autoHighlight:!0,autoSelect:y,PaperComponent:f,...C,ListboxProps:M,renderGroup:N,renderInput:q,slotProps:I,sx:O}),(0,r.jsx)(k.A,{...m})]})}},61057:(e,n,t)=>{t.d(n,{A:()=>r});let r={bcn:"Back-Channel Network",ifn:"Internet-Facing Network",mn:"Migration Network",sn:"Storage Network"}},65873:(e,n,t)=>{t.d(n,{A:()=>v});var r=t(37876),o=t(99846),a=t(32378),s=t(75638),l=t(54024),i=t(50046),c=t.n(i),u=t(14232),d=t(90890),m=t(71949),x=t(72015),h=t(49210),p=t(42262),A=t(48504),k=t(50174),g=t(86250),f=t(98630),w=t(21220),j=t(38456),b=t(75720);let y=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[o]=n,{onClearIndicatorClick:a,...s}=o,{sx:i,value:c,...m}=s,x=(0,u.useMemo)(()=>({["& .".concat(l.A.icon)]:{color:d.Qu},["& .".concat(j.A.root)]:{marginRight:".8em"},["& .".concat(k.A.root)]:{color:d.Qu,visibility:"hidden"},["&:hover .".concat(j.A.root," .").concat(k.A.root,",\n      &.").concat(f.A.focused," .").concat(j.A.root," .").concat(k.A.root)]:{visibility:"visible"},...i}),[i]),h=(0,u.useMemo)(()=>{if(c&&a)return(0,r.jsx)(b.A,{position:"end",children:(0,r.jsx)(g.A,{onClick:a,tabIndex:-1,children:(0,r.jsx)(A.A,{fontSize:"small"})})})},[a,c]);return(0,r.jsx)(w.A,{endAdornment:h,value:c,...m,sx:x})},v=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[i]=n,{id:A,label:k,selectItems:g,checkItem:f,disableItem:w,formControlProps:j,hideItem:b,inputLabelProps:v={},isReadOnly:C=!1,messageBoxProps:I={},name:M,noOptionsText:N="No options",onBlur:q,onChange:O,onFocus:S,required:D,selectProps:{MenuProps:P,multiple:F,sx:E,...L}={},value:Q,isCheckableItems:V=F}=i,U=(0,u.useMemo)(()=>C?c()({["& .".concat(l.A.icon)]:{visibility:"hidden"}},E):E,[C,E]),R=(0,u.useCallback)(e=>V&&(0,r.jsx)(o.A,{checked:null==f?void 0:f.call(null,e)}),[f,V]),$=(0,u.useCallback)((e,n)=>(0,r.jsxs)(x.A,{disabled:null==w?void 0:w.call(null,e),sx:{display:(null==b?void 0:b.call(null,e))?"none":void 0},value:e,children:[R(e),n]},"".concat(A,"-").concat(e)),[R,w,b,A]),T=(0,u.useMemo)(()=>"".concat(A,"-select-element"),[A]),H=(0,u.useMemo)(()=>(0,r.jsx)(h.A,{id:A,label:k,required:D}),[A,k,D]),W=(0,u.useMemo)(()=>k&&(0,r.jsx)(p.A,{htmlFor:T,...v,children:k}),[v,k,T]),B=(0,u.useMemo)(()=>g.length?g.map(e=>{if("string"==typeof e)return $(e,e);let{value:n,displayValue:t=String(n)}=e;return $(n,t)}):(0,r.jsx)(x.A,{disabled:!0,children:N}),[$,N,g]),G=(0,u.useMemo)(()=>c()({sx:{["& .".concat(s.A.paper)]:{backgroundColor:d.Qu}}},P),[P]);return(0,r.jsxs)(a.A,{fullWidth:!0,...j,children:[W,(0,r.jsx)(y,{id:T,input:H,MenuProps:G,multiple:F,name:M,onBlur:q,onChange:O,onFocus:S,readOnly:C,value:Q,...L,sx:U,children:B}),(0,r.jsx)(m.A,{...I})]})}},72015:(e,n,t)=>{t.d(n,{A:()=>l});var r=t(47160),o=t(31880),a=t(54773),s=t(90890);let l=(0,a.Ay)(r.A)({backgroundColor:s.Qu,paddingRight:"3em",["&.".concat(o.A.selected)]:{backgroundColor:s.a$,fontWeight:400,["&.".concat(o.A.focusVisible)]:{backgroundColor:s.a$},"&:hover":{backgroundColor:s.a$}},["&.".concat(o.A.focusVisible)]:{backgroundColor:s.a$},"&:hover":{backgroundColor:s.a$}})},86149:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(40143),o=t(96043);let a=(e,n)=>{let{networkInit:t,...a}=e,{networks:s,...l}=t,i=Object.values(s);return{...a,...l,gatewayInterface:i.reduce((e,n)=>{let o,{ip:a,sequence:s,subnetMask:l,type:i}=n;try{o=new r.Netmask("".concat(a,"/").concat(l))}catch(n){return e}return o.contains(t.gateway)?"".concat(i).concat(s):e},""),networks:i.reduce((e,t)=>{let{interfaces:r,ip:a,sequence:s,subnetMask:l,type:i}=t;return r.some(e=>o.KF.test(e))&&e.push({interfaces:r.map(e=>{var t;return e?{mac:null==n||null==(t=n[e])?void 0:t.mac}:null}),ipAddress:a,sequence:s,subnetMask:l,type:i}),e},[])}}},87986:(e,n,t)=>{t.d(n,{A:()=>a});var r=t(37876),o=t(64410);let a=e=>{let{children:n}=e;return(0,r.jsxs)(o.Ay,{columns:{lg:8,xs:1},container:!0,children:[(0,r.jsx)(o.Ay,{item:!0,xs:1}),(0,r.jsx)(o.Ay,{item:!0,lg:6,xs:1,children:n}),(0,r.jsx)(o.Ay,{item:!0,xs:1})]})}},89275:(e,n,t)=>{t.d(n,{VT:()=>W,Sf:()=>er,hJ:()=>X});var r=t(37876),o=t(15692),a=t(98732),s=t(12981),l=t(64410),i=t(52076),c=t.n(i),u=t(14232),d=t(91423),m=t(42658),x=t(54773);let h={dragging:"".concat("DragArea","-dragging")},p=(0,x.Ay)(s.A)({position:"relative",["&.".concat(h.dragging)]:{cursor:"grabbing",userSelect:"none"}});var A=t(27341),k=t(31465),g=t(72649),f=t.n(g);let w=e=>{let{appliedIfaces:n,chains:t,data:r,formikUtils:o,host:a,subnodeCount:s=2}=e,{formik:l,getFieldChanged:i}=o,c=f()(l.values.networkInit),u=Object.values(r).reduce((e,t)=>{let{ip:r,uuid:o}=t;return n[o]||!r||(/^10\.10/.test(r)?e.sn.push(t):/^10\.19/.test(r)?e.mn.push(t):/^10\.20/.test(r)?e.bcn.push(t):e.ifn.push(t)),e},{bcn:[],ifn:[],mn:[],sn:[]}),d=Object.entries(l.values.networkInit.networks).reduce((e,n)=>{let[,t]=n;return"bcn"===t.type?e.bcn.push(n):"ifn"===t.type?e.ifn.push(n):"mn"===t.type?e.mn.push(n):"sn"===t.type&&e.sn.push(n),e},{bcn:[],ifn:[],mn:[],sn:[]});if(a.sequence>0){let e={bcn:200,sn:100};["bcn","mn","sn"].forEach(n=>{let r="??";"striker"===a.type?r="4":a.parentSequence>0&&(r=String(10+s*(a.parentSequence-1))),d[n].forEach(o=>{let[d]=o,m=c.networks[d],x=l.initialValues.networkInit.networks[d],h="".concat(t.networks,".").concat(d),p="".concat(h,".interfaces.0"),A="".concat(h,".ip"),k="".concat(h,".subnetMask");if(!i(A)&&!(null==x?void 0:x.ip)){let t="mn"===n?199:e[n]+Number(m.sequence),o=a.sequence;"dr"===a.type&&(o+=s),m.ip="10.".concat(t,".").concat(r,".").concat(o)}if(i(k)||(null==x?void 0:x.subnetMask)||(m.subnetMask="255.255.0.0"),!i(p)&&!(null==x?void 0:x.interfaces[0])){let e=u[n].find(e=>e.ip===m.ip);e&&(m.interfaces[0]=e.uuid)}})})}d.ifn.forEach(e=>{let[n]=e,r=c.networks[n],o=l.initialValues.networkInit.networks[n],a=l.initialValues.networkInit,s="".concat(t.networks,".").concat(n),d="".concat(s,".interfaces.0"),m="".concat(s,".ip"),x="".concat(s,".subnetMask"),h=u.ifn.shift();h&&(i(d)||(null==o?void 0:o.interfaces[0])||(r.interfaces[0]=h.uuid),i(m)||(null==o?void 0:o.ip)||(r.ip=h.ip||""),i(x)||(null==o?void 0:o.subnetMask)||(r.subnetMask=h.subnetMask||""),"1"===r.sequence&&(i(t.dns)||a.dns||(c.dns=h.dns||""),i(t.gateway)||a.gateway||(c.gateway=h.gateway||"")))}),l.setFieldValue(t.networkInit,c,!0)},j=".5em",b=(0,x.Ay)(s.A)(e=>{let{theme:n}=e;return{display:"grid",[n.breakpoints.up("xs")]:{gridAutoColumns:"calc(100% - ".concat(j,")")},[n.breakpoints.up("sm")]:{gridAutoColumns:"calc(50% - ".concat(j,")")},[n.breakpoints.up("md")]:{gridAutoColumns:"calc(100% / 3 - ".concat(j,")")},[n.breakpoints.up("lg")]:{gridAutoColumns:"calc(25% - ".concat(j,")")},gridAutoFlow:"column",overflowX:"scroll",scrollSnapType:"x","& > div":{scrollSnapAlign:"start"},"& > :not(div:first-child)":{marginLeft:"1em"}}});var y=t(61057),v=t(57763),C=t(90890);let I=(0,x.Ay)(s.A)(()=>({borderColor:C.Qu,borderStyle:"dashed",borderWidth:"4px",display:"flex",flexDirection:"column",padding:".6em","& > :not(:first-child)":{marginTop:".3em"}}));var M=t(22481),N=t(69267),q=t(23437),O=t(65873),S=t(51677),D=t(4064);let P={dr:["bcn","ifn","mn","sn"],striker:["bcn","ifn"],subnode:["bcn","ifn","mn","sn"]},F="3.4em",E=function(){for(var e,n,t=arguments.length,o=Array(t),a=0;a<t;a++)o[a]=arguments[a];let[s]=o,{appliedIfaces:i,formikUtils:c,host:d,ifaceHeld:m,ifaces:x,ifaceValues:h,netId:p}=s,{changeFieldValue:A,formik:k,handleChange:g,setFieldChanged:f}=c,w=(0,u.useMemo)(()=>{let e=P[d.type];return e?e.map(e=>{var n;return{displayValue:null!=(n=y.A[e])?n:"Unknown network",value:e}}):[]},[d.type]),b=(0,u.useMemo)(()=>{let e="networkInit.networks",n="".concat(e,".").concat(p);return{ip:"".concat(n,".ip"),link1:"".concat(n,".interfaces.0"),link2:"".concat(n,".interfaces.1"),networks:e,sequence:"".concat(n,".sequence"),subnetMask:"".concat(n,".subnetMask"),type:"".concat(n,".type")}},[p]);return(0,r.jsxs)(q.t$,{children:[(0,r.jsxs)(q.WJ,{children:[(0,r.jsxs)(l.Ay,{container:!0,spacing:"0.1em",children:[(0,r.jsx)(l.Ay,{item:!0,width:{xs:"100%",sm:"calc(100% - ".concat(F,")")},children:(0,r.jsx)(O.A,{id:b.type,label:"Network type",name:b.type,onChange:k.handleChange,required:!0,selectItems:w,value:k.values.networkInit.networks[p].type})}),(0,r.jsx)(l.Ay,{item:!0,width:{xs:"100%",sm:F},children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:b.sequence,label:"#",name:b.sequence,onChange:g,required:!0,value:k.values.networkInit.networks[p].sequence})})})]}),!k.values.networkInit.networks[p].required&&(0,r.jsx)(M.A,{mapPreset:"delete",onClick:()=>{let{[p]:e,...n}=k.values.networkInit.networks;k.setFieldValue(b.networks,n,!0)},sx:{padding:".2em",position:"absolute",right:"-".concat(j),top:"-.2em"}})]}),(0,r.jsx)(q.BF,{children:(0,r.jsxs)(l.Ay,{columns:1,container:!0,spacing:"1em",children:[(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(I,{onMouseUp:()=>{m&&A(b.link1,m,!0)},children:(0,r.jsx)(v.A,{getOptionDisabled:e=>i[e.uuid]&&e.uuid!==k.values.networkInit.networks[p].interfaces[0],getOptionLabel:e=>e.name,id:b.link1,isOptionEqualToValue:(e,n)=>e.uuid===n.uuid,label:"Link 1",noOptionsText:"No matching interface",onChange:(e,n)=>{A(b.link1,n?n.uuid:"",!0)},openOnFocus:!0,options:h,renderOption:(e,n)=>(0,u.createElement)("li",{...e,key:"link1-ifop-".concat(n.uuid)},(0,r.jsx)(S.a3,{inheritColour:!0,children:n.name})),slotProps:{clearIndicator:{onClick:()=>{f(b.link1,!0)}}},value:null!=(e=x[k.values.networkInit.networks[p].interfaces[0]])?e:null})})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(I,{onMouseUp:()=>{m&&A(b.link2,m,!0)},children:(0,r.jsx)(v.A,{getOptionDisabled:e=>i[e.uuid]&&e.uuid!==k.values.networkInit.networks[p].interfaces[1],getOptionLabel:e=>e.name,id:b.link2,isOptionEqualToValue:(e,n)=>e.uuid===n.uuid,label:"Link 2",noOptionsText:"No matching interface",onChange:(e,n)=>{A(b.link2,n?n.uuid:"",!0)},openOnFocus:!0,options:h,renderOption:(e,n)=>(0,u.createElement)("li",{...e,key:"link2-ifop-".concat(n.uuid)},(0,r.jsx)(S.a3,{inheritColour:!0,children:n.name})),slotProps:{clearIndicator:{onClick:()=>{f(b.link2,!0)}}},value:null!=(n=x[k.values.networkInit.networks[p].interfaces[1]])?n:null})})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:b.ip,label:"IP address",name:b.ip,onChange:g,required:!0,value:k.values.networkInit.networks[p].ip})})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:b.subnetMask,label:"Subnet mask",name:b.subnetMask,onChange:g,required:!0,value:k.values.networkInit.networks[p].subnetMask})})})]})})]})},L={applied:"".concat("IfaceDragHandle","-applied")},Q=(0,x.Ay)(s.A)({alignItems:"center",display:"flex",flexDirection:"row","&:hover":{cursor:"grab"},"& > svg":{color:C.Qu},["&.".concat(L.applied)]:{"&:hover":{cursor:"auto"},"& > svg":{color:C.ft}}}),V=(0,x.Ay)(s.A)({alignItems:"center",display:"flex",flexDirection:"row","& > :not(:first-child)":{marginLeft:".5em"}}),U=(0,x.Ay)(V)({borderColor:C.Qu,borderRadius:C.ax,borderStyle:"solid",borderWidth:"1px",backgroundColor:C.Uv,padding:".6em 1.2em",position:"absolute",zIndex:999}),R=e=>{let{boxProps:n,iface:t}=e;return(0,r.jsx)(U,{...n,children:(0,r.jsx)(S.NA,{children:t.name})})};var $=t(79982),T=t(14361),H=t(59664);let W=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[i]=n,{formikUtils:x,host:g,onFetchSuccess:f}=i,{formik:j,handleChange:y}=x,v=(0,u.useMemo)(()=>{let e="networkInit";return{dns:"".concat(e,".dns"),gateway:"".concat(e,".gateway"),networkInit:e,networks:"".concat(e,".networks"),ntp:"".concat(e,".ntp")}},[]),[C,I]=(0,u.useState)(),[q,O]=(0,u.useState)({x:0,y:0}),[P,F]=(0,u.useState)(!1),V=(0,u.useMemo)(()=>Object.values(j.values.networkInit.networks).reduce((e,n)=>(n.interfaces.forEach(n=>{n&&(e[n]=!0)}),e),{}),[j.values.networkInit.networks]),{data:U,validating:W}=(0,H.A)("/init/network-interface/".concat(g.uuid),{onError:()=>{F(!0)},onSuccess:e=>{F(!1),w({appliedIfaces:V,chains:v,data:e,host:g,formikUtils:x}),null==f||f.call(null,e)},refreshInterval:2e3}),B=(0,u.useMemo)(()=>Object.entries(j.values.networkInit.networks),[j.values.networkInit.networks]),G=(0,u.useMemo)(()=>U&&Object.values(U),[U]),Y=(0,u.useMemo)(()=>{if(C)return{className:h.dragging,onMouseLeave:()=>I(void 0),onMouseMove:e=>{let{currentTarget:n,nativeEvent:{clientX:t,clientY:r}}=e,{left:o,top:a}=n.getBoundingClientRect();O({x:t-o,y:r-a})},onMouseUp:()=>I(void 0)}},[C]),_=(0,u.useMemo)(()=>{if(!(null==G?void 0:G.length))return!0;let e=Object.keys(V).length;return G.length-e<=B.filter(e=>{let[,n]=e;return!n.interfaces[0]}).length},[V,B,null==G?void 0:G.length]),z=(0,u.useMemo)(()=>[{align:"center",display:"flex",field:"",renderCell:e=>{let n,{uuid:t}=e.row,s=()=>{I(t)},l=(0,r.jsx)(a.A,{});return V[t]&&(n=L.applied,s=void 0,l=(0,r.jsx)(o.A,{})),(0,r.jsx)(Q,{className:n,onMouseDown:s,children:l})},renderHeader:()=>(0,r.jsx)(T.A,{syncing:W}),sortable:!1,width:1},{display:"flex",field:"name",flex:1,headerName:"Name",renderCell:e=>{let n,{name:t,state:o}=e.row;return n=P||"down"===o?"warning":"up"===o?"ok":"error",(0,r.jsxs)(k.A,{row:!0,children:[(0,r.jsx)(m.A,{colour:n,sx:{alignSelf:"stretch",height:"auto"}}),(0,r.jsx)(S.NA,{children:t})]})}},{field:"mac",flex:1,headerName:"MAC",renderCell:e=>{let{mac:n}=e.row;return(0,r.jsx)(S.NA,{children:n})}},{field:"state",flex:1,headerName:"State",renderCell:e=>{let{state:n}=e.row;return P?"Lost":c()(n)}},{field:"speed",flex:1,headerName:"Speed",renderCell:e=>{let{speed:n}=e.row;return"".concat(n," Mbps")}},{field:"order",flex:1,headerName:"Order"}],[V,P,W]);return U&&G?(0,r.jsxs)(l.Ay,{columns:{xs:1,sm:2,md:3},container:!0,spacing:"1em",children:[(0,r.jsx)(l.Ay,{item:!0,width:"100%",children:(0,r.jsxs)(p,{onMouseDown:e=>{let{clientX:n,clientY:t,currentTarget:r}=e,{left:o,top:a}=r.getBoundingClientRect();O({x:n-o,y:t-a})},...Y,children:[C&&(0,r.jsx)(R,{boxProps:{left:"calc(".concat(q.x,"px + .4em)"),top:"calc(".concat(q.y,"px - 1em)")},iface:U[C]}),(0,r.jsx)(A.A,{autoHeight:!0,columns:z,disableColumnMenu:!0,disableRowSelectionOnClick:!0,getRowClassName:e=>{let{row:n}=e;return C||V[n.uuid]?"":A.h.draggable},getRowId:e=>e.uuid,hideFooter:!0,initialState:{sorting:{sortModel:[{field:"name",sort:"asc"}]}},rows:G,slotProps:{row:{onMouseDown:e=>{var n;let{target:t}=e,r=null==(n=t.parentElement)?void 0:n.dataset.id;r&&(V[r]||I(r))}}}}),(0,r.jsx)(b,{children:B.map(e=>{let[n]=e;return(0,r.jsx)(s.A,{children:(0,r.jsx)(E,{appliedIfaces:V,formikUtils:x,host:g,ifaceHeld:C,ifaces:U,ifaceValues:G,netId:n})},"hostnet-".concat(n))})})]})}),(0,r.jsx)(l.Ay,{alignSelf:"center",item:!0,xs:1,sm:"auto",children:(0,r.jsx)(M.A,{disabled:_,mapPreset:"add",onClick:()=>{let e=(0,d.A)();j.setFieldValue("".concat(v.networks,".").concat(e),{interfaces:["",""],ip:"",sequence:"",subnetMask:"",type:""},!0)}})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:v.gateway,label:"Gateway",name:v.gateway,onChange:y,required:!0,value:j.values.networkInit.gateway})})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:v.dns,label:"DNS",name:v.dns,onChange:y,value:j.values.networkInit.dns})})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,sm:!0,md:"auto",children:(0,r.jsx)(D.A,{input:(0,r.jsx)(N.A,{id:v.ntp,label:"NTP",name:v.ntp,onChange:y,value:j.values.networkInit.ntp})})})]}):(0,r.jsx)($.A,{})};var B=t(91408),G=t(96043),Y=t(2062),_=t(45566);let z=e=>e.some(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return G.KF.test(e)}),K=e=>e.when(["interfaces","required"],(e,n)=>{let[t,r]=e;return r||z(t)?n.required():n}),J=B.Ik({interfaces:B.YO().of(B.Yj()).length(2).required().when(["required"],(e,n)=>{let[t]=e;return t?n.test({name:"atleast1",message:"At least 1 network interface is required",test:z}):n}),ip:K((0,_.W5)()),required:B.lc(),sequence:K(B.ai()),subnetMask:K((0,_.W5)()),type:B.Yj().oneOf(["bcn","ifn","mn","sn"])}),X=B.Ik({dns:B.Yj().matches(G.BU,"DNS must be a comma-separated list of IPv4 addresses"),gateway:(0,_.W5)().required(),networks:B.RZ(e=>B.Ik((0,Y.A)(e,J)))});var Z=t(5755);let ee=e=>"network-confirm-".concat(e),en=(e,n)=>"".concat(y.A[e]," ").concat(n),et=(e,n)=>"".concat(e.toUpperCase()).concat(n),er=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];let[o]=n,{gatewayIface:a,ifaces:s,values:i}=o,c=(0,u.useMemo)(()=>Object.entries(i.networkInit.networks),[i.networkInit.networks]),{hasIface:d,noIface:m}=(0,u.useMemo)(()=>{let e=[],n=[];return c.forEach(t=>{let[r,o]=t,{interfaces:a}=o;a.some(e=>G.KF.test(e))?e.push(r):n.push(r)}),{hasIface:e,noIface:n}},[c]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Ay,{item:!0,sx:{marginTop:"1.4em"},xs:2,children:(0,r.jsx)(S.a3,{children:"Networks"})}),d.map(e=>{let{interfaces:n,ip:t,sequence:o,subnetMask:a,type:c}=i.networkInit.networks[e],u=ee(e),d=en(c,o),m=et(c,o);return(0,r.jsx)(l.Ay,{item:!0,mb:"1.4em",xs:1,children:(0,r.jsxs)(l.Ay,{container:!0,spacing:".6em",columns:2,children:[(0,r.jsx)(l.Ay,{item:!0,width:"100%",children:(0,r.jsxs)(S.a3,{children:[d," (",(0,r.jsx)(S.kp,{children:m}),")"]})}),n.map((e,n)=>{let t="".concat(u,"-interface").concat(n),o="none";if(""!==e){var a;t="".concat(t,"-").concat(e),o=null==(a=s[e])?void 0:a.name}return(0,r.jsxs)(l.Ay,{columns:2,container:!0,item:!0,children:[(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.a3,{children:"Link ".concat(n+1)})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.NA,{children:o})})]},t)}),(0,r.jsx)(l.Ay,{item:!0,width:"100%",children:(0,r.jsx)(S.NA,{children:"".concat(t,"/").concat(a)})})]})},u)}),m.map((e,n,t)=>{let{sequence:o,type:a}=i.networkInit.networks[e],s=ee(e),c=en(a,o),u=et(a,o),d=n===t.length-1?"1.4em":".2em";return(0,r.jsx)(l.Ay,{item:!0,mb:d,width:"100%",children:(0,r.jsxs)(Z.A,{children:["No interface(s) set for ",c," (",(0,r.jsx)(S.kp,{inheritColour:!0,children:u}),"), it will be discarded."]})},s)}),(0,r.jsx)(l.Ay,{item:!0,width:"100%"}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.a3,{children:"Gateway"})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.NA,{children:i.networkInit.gateway})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.a3,{children:"Gateway network"})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.NA,{children:a.toUpperCase()})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.a3,{children:"Domain name server(s)"})}),(0,r.jsx)(l.Ay,{item:!0,xs:1,children:(0,r.jsx)(S.NA,{children:i.networkInit.dns})})]})}}}]);